import{_ as Y,u as q,h as x,g as h,i as Q,c as i,a as t,b as r,k as n,t as l,d as _,v as R,x as G,F as B,l as j,q as b,o as m,p as M}from"./index-3bdb0cb8.js";import{M as f}from"./message-circle-91eda2dd.js";import{S as J}from"./search-ae1beb38.js";import{P as N}from"./pin-002b154a.js";import{F as A}from"./flame-ea7cabf9.js";import{E as z}from"./eye-e6253139.js";import{U as I}from"./user-3bbcec5b.js";import{c as O}from"./createLucideIcon-dde33caf.js";const Z=O("PlusIcon",[["line",{x1:"12",x2:"12",y1:"5",y2:"19",key:"pwfkuu"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]]);const K={class:"min-h-screen bg-gray-50"},W={class:"relative bg-black border-b border-gray-800 overflow-hidden",style:{"margin-top":"-5rem !important","padding-top":"5rem"}},X={class:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16"},tt={class:"text-center max-w-3xl mx-auto"},et={class:"inline-flex items-center justify-center mb-4"},st={class:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-12 max-w-4xl mx-auto"},ot={class:"text-center"},at={class:"text-3xl font-bold text-[#F8CB00]"},lt={class:"text-center"},rt={class:"text-3xl font-bold text-[#F8CB00]"},nt={class:"text-center"},dt={class:"text-3xl font-bold text-[#F8CB00]"},it={class:"text-center"},mt={class:"text-3xl font-bold text-[#F8CB00] flex items-center justify-center gap-2"},ct={class:"bg-gray-50 relative",id:"forums-content"},ut={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12 relative z-10"},xt={class:"mb-8 md:mb-12"},gt={class:"relative max-w-2xl mx-auto"},pt={key:0,class:"flex justify-center items-center py-12 md:py-20"},ft={key:1},vt={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 md:mb-8 gap-2"},ht={class:"text-sm md:text-base text-gray-600"},_t={class:"text-xs md:text-sm text-gray-500"},bt={key:0,class:"mb-8 md:mb-12"},yt={class:"flex items-center gap-2 md:gap-3 mb-6 md:mb-8"},wt={class:"w-8 h-8 md:w-9 md:h-9 bg-[#F8CB00]/20 rounded-lg flex items-center justify-center flex-shrink-0"},kt={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8"},Ct=["onClick"],Ft={class:"relative"},Bt={class:"flex items-start justify-between mb-3 md:mb-4"},jt={class:"flex items-center flex-wrap gap-1.5 md:gap-2"},Dt={class:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] md:text-xs font-medium bg-[#F8CB00]/20 text-[#F8CB00]"},St={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] md:text-xs font-medium bg-red-100 text-red-700"},Tt={class:"flex items-center gap-3 md:gap-4 text-xs md:text-sm text-gray-500 flex-shrink-0"},Pt={class:"flex items-center gap-1"},$t={class:"flex items-center gap-1"},Mt={class:"text-base md:text-lg font-semibold text-gray-900 mb-2 md:mb-3 group-hover:text-[#F8CB00] transition-colors line-clamp-2"},Nt={class:"text-sm md:text-base text-gray-600 mb-3 md:mb-4 line-clamp-2"},At={class:"flex items-center justify-between"},zt={class:"flex items-center gap-2"},It={class:"w-7 h-7 md:w-8 md:h-8 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0"},Lt={class:"min-w-0"},Ut={class:"text-xs md:text-sm font-medium text-gray-900 truncate"},Vt={class:"text-[10px] md:text-xs text-gray-500"},Et={class:"space-y-3 md:space-y-4 mb-6 md:mb-8"},Ht={class:"flex items-center gap-2 md:gap-3 mb-6 md:mb-8"},Yt={class:"w-8 h-8 md:w-9 md:h-9 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0"},qt=["onClick"],Qt={class:"relative"},Rt={class:"flex items-start gap-3 md:gap-4"},Gt={class:"flex-shrink-0 mt-1"},Jt={class:"flex-1 min-w-0"},Ot={class:"flex items-center flex-wrap gap-1.5 md:gap-2 mb-2"},Zt={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] md:text-xs font-medium bg-red-100 text-red-700"},Kt={class:"text-base md:text-lg font-semibold text-gray-900 mb-2 group-hover:text-[#F8CB00] transition-colors line-clamp-2"},Wt={class:"text-gray-600 text-xs md:text-sm mb-3 md:mb-4 line-clamp-2"},Xt={class:"flex items-center justify-between gap-3"},te={class:"flex items-center gap-2 min-w-0"},ee={class:"w-7 h-7 md:w-8 md:h-8 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0"},se={class:"min-w-0"},oe={class:"text-xs md:text-sm font-medium text-gray-900 truncate"},ae={class:"text-[10px] md:text-xs text-gray-500"},le={class:"flex items-center gap-3 md:gap-4 text-xs md:text-sm text-gray-500 flex-shrink-0"},re={class:"flex items-center gap-1"},ne={class:"hidden sm:inline"},de={class:"flex items-center gap-1"},ie={key:1,class:"flex justify-center items-center gap-1.5 md:gap-2 mt-8 md:mt-12"},me=["disabled"],ce={class:"flex items-center gap-1"},ue=["onClick"],xe=["disabled"],ge={key:2,class:"text-center py-12 md:py-20 px-4"},pe={class:"w-12 h-12 md:w-16 md:h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4"},fe={class:"text-sm md:text-base text-gray-600 mb-4 md:mb-6"},ve={class:"fixed bottom-6 right-6 md:bottom-8 md:right-8 z-40"},he={__name:"forums",setup(_e){var P;const g=q(),o=x(()=>g.getters.forums),y=x(()=>g.getters.station);x(()=>g.getters.isPlaying);const c=h(!1),u=h(""),w=h(null),p=h({search:"",station_id:((P=y.value)==null?void 0:P.id)||1,page:1,per_page:12}),v=x(()=>{var a;return(a=o.value)!=null&&a.metrics?{total_topics:o.value.metrics.total_topics||0,total_replies:o.value.metrics.total_comments||0,active_users:o.value.metrics.total_views||0,online_now:o.value.metrics.online_now||0}:{total_topics:0,total_replies:0,active_users:0,online_now:0}}),D=x(()=>{var a;return(a=o.value)!=null&&a.data?o.value.data.filter(e=>e.is_pinned):[]}),L=x(()=>{var a;return(a=o.value)!=null&&a.data?o.value.data.filter(e=>!e.is_pinned):[]}),U=x(()=>{var $;if(!(($=o.value)!=null&&$.total_pages))return[];const a=o.value.current_page,e=o.value.total_pages,s=[],d=Math.max(1,a-2),C=Math.min(e,a+2);for(let F=d;F<=C;F++)s.push(F);return s}),S=a=>{const e=new Date(a),s=new Date,d=(s-e)/(1e3*60*60);return d<1?`${Math.floor((s-e)/(1e3*60))} minutes ago`:d<24?`${Math.floor(d)} hours ago`:d<48?"Yesterday":e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:e.getFullYear()!==s.getFullYear()?"numeric":void 0})},V=()=>{w.value&&clearTimeout(w.value),w.value=setTimeout(()=>{p.value.search=u.value,p.value.page=1,E()},500)},E=async()=>{c.value=!0;try{await g.dispatch("fetch_user_forums",p.value)}catch(a){console.error("Failed to fetch filtered forums:",a)}finally{c.value=!1}},k=async a=>{var s;if(a<1||a>o.value.total_pages)return;p.value.page=a,c.value=!0;const e={...p.value,station_id:((s=y.value)==null?void 0:s.id)||1};try{await g.dispatch("fetch_user_forums",e),window.scrollTo({top:0,behavior:"smooth"})}catch(d){console.error("Failed to fetch forums:",d)}finally{c.value=!1}},T=()=>{console.log("Create new topic")},H=async()=>{var e;c.value=!0;const a={...p.value,station_id:((e=y.value)==null?void 0:e.id)||1};try{await g.dispatch("fetch_user_forums",a)}catch(s){console.error("Failed to fetch forums:",s)}finally{c.value=!1}};return Q(()=>{H()}),(a,e)=>(m(),i("div",K,[t("div",W,[e[11]||(e[11]=t("div",{class:"absolute inset-0"},[t("img",{src:"https://images.unsplash.com/photo-1516280440614-37939bbacd81?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80",alt:"Community Discussion",class:"w-full h-full object-cover opacity-40"}),t("div",{class:"absolute inset-0 bg-gradient-to-br from-black/80 via-black/70 to-black/80"})],-1)),t("div",X,[t("div",tt,[t("div",et,[r(n(f),{class:"text-[#F8CB00] mr-2",size:24}),e[3]||(e[3]=t("span",{class:"text-[#F8CB00] font-semibold uppercase tracking-wider text-sm"},"Community",-1))]),e[4]||(e[4]=t("h1",{class:"text-4xl sm:text-5xl font-bold text-white mb-4"}," Community Forums ",-1)),e[5]||(e[5]=t("p",{class:"text-lg text-gray-300"}," Join the discussion and connect with fellow Capital FM listeners ",-1))]),t("div",st,[t("div",ot,[t("div",at,l(v.value.total_topics),1),e[6]||(e[6]=t("div",{class:"text-sm text-gray-400 mt-1"},"Total Topics",-1))]),t("div",lt,[t("div",rt,l(v.value.total_replies),1),e[7]||(e[7]=t("div",{class:"text-sm text-gray-400 mt-1"},"Total Replies",-1))]),t("div",nt,[t("div",dt,l(v.value.active_users),1),e[8]||(e[8]=t("div",{class:"text-sm text-gray-400 mt-1"},"Active Users",-1))]),t("div",it,[t("div",mt,[_(l(v.value.online_now)+" ",1),e[9]||(e[9]=t("div",{class:"w-2 h-2 bg-[#F8CB00] rounded-full animate-pulse"},null,-1))]),e[10]||(e[10]=t("div",{class:"text-sm text-gray-400 mt-1"},"Online Now",-1))])])])]),t("div",ct,[t("div",ut,[t("div",xt,[t("div",gt,[r(n(J),{class:"absolute left-3 md:left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 md:w-5 md:h-5"}),R(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),onInput:V,type:"text",placeholder:"Search forum discussions...",class:"w-full pl-10 md:pl-12 pr-3 md:pr-4 py-3 md:py-4 bg-white border border-gray-300 rounded-lg md:rounded-xl text-sm md:text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#F8CB00] focus:border-transparent shadow-sm"},null,544),[[G,u.value]])])]),c.value?(m(),i("div",pt,e[12]||(e[12]=[t("div",{class:"w-8 h-8 md:w-12 md:h-12 border-4 border-gray-300 border-t-[#F8CB00] rounded-full animate-spin"},null,-1)]))):o.value&&o.value.data&&o.value.data.length>0?(m(),i("div",ft,[t("div",vt,[t("div",ht,l(u.value?`Search results for "${u.value}"`:"All Discussions")+" - Showing "+l(o.value.data.length)+" of "+l(o.value.total),1),t("div",_t," Page "+l(o.value.current_page)+" of "+l(o.value.total_pages),1)]),D.value.length>0?(m(),i("div",bt,[t("div",yt,[t("div",wt,[r(n(N),{class:"w-4 h-4 md:w-5 md:h-5 text-[#F8CB00]"})]),e[13]||(e[13]=t("h2",{class:"text-xl md:text-2xl font-bold text-gray-900"}," Pinned Discussions ",-1)),e[14]||(e[14]=t("div",{class:"flex-1 h-px bg-gray-200"},null,-1))]),t("div",kt,[(m(!0),i(B,null,j(D.value,s=>{var d;return m(),i("div",{key:s.id,class:"bg-white rounded-lg md:rounded-xl p-4 md:p-6 border border-gray-200 shadow-sm hover:shadow-md hover:border-[#F8CB00] transition-all group cursor-pointer relative",onClick:C=>a.$router.push({name:"forum_details",params:{id:s.slug}})},[t("div",Ft,[t("div",Bt,[t("div",jt,[t("span",Dt,[r(n(N),{class:"w-2.5 h-2.5 md:w-3 md:h-3 mr-1"}),e[15]||(e[15]=_(" Pinned ",-1))]),s.is_hot?(m(),i("span",St,[r(n(A),{class:"w-2.5 h-2.5 md:w-3 md:h-3 mr-1"}),e[16]||(e[16]=_(" Hot ",-1))])):b("",!0)]),t("div",Tt,[t("div",Pt,[r(n(z),{class:"w-3 h-3 md:w-4 md:h-4"}),t("span",null,l(s.views_count||0),1)]),t("div",$t,[r(n(f),{class:"w-3 h-3 md:w-4 md:h-4"}),t("span",null,l(s.comments_count||0),1)])])]),t("h3",Mt,l(s.title),1),t("p",Nt,l(s.body),1),t("div",At,[t("div",zt,[t("div",It,[r(n(I),{class:"w-3.5 h-3.5 md:w-4 md:h-4 text-gray-500"})]),t("div",Lt,[t("p",Ut,l(((d=s.creator)==null?void 0:d.name)||"Anonymous"),1),t("p",Vt,l(S(s.created_at)),1)])])])])],8,Ct)}),128))])])):b("",!0),t("div",Et,[t("div",Ht,[t("div",Yt,[r(n(f),{class:"w-4 h-4 md:w-5 md:h-5 text-gray-900"})]),e[17]||(e[17]=t("h2",{class:"text-xl md:text-2xl font-bold text-gray-900"},"All Discussions",-1)),e[18]||(e[18]=t("div",{class:"flex-1 h-px bg-gray-200"},null,-1))]),(m(!0),i(B,null,j(L.value,s=>{var d;return m(),i("div",{key:s.id,class:"bg-white rounded-lg md:rounded-xl p-4 md:p-6 border border-gray-200 shadow-sm hover:shadow-md hover:border-[#F8CB00] transition-all group cursor-pointer relative",onClick:C=>a.$router.push({name:"forum_details",params:{id:s.slug}})},[t("div",Qt,[t("div",Rt,[t("div",Gt,[t("div",{class:M(["w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center",s.is_hot?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"])},[r(n(f),{class:"w-5 h-5 md:w-6 md:h-6"})],2)]),t("div",Jt,[t("div",Ot,[e[20]||(e[20]=t("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] md:text-xs font-medium bg-gray-100 text-gray-700"}," General Discussion ",-1)),s.is_hot?(m(),i("span",Zt,[r(n(A),{class:"w-2.5 h-2.5 md:w-3 md:h-3 mr-1"}),e[19]||(e[19]=_(" Hot ",-1))])):b("",!0)]),t("h3",Kt,l(s.title),1),t("p",Wt,l(s.body),1),t("div",Xt,[t("div",te,[t("div",ee,[r(n(I),{class:"w-3.5 h-3.5 md:w-4 md:h-4 text-gray-500"})]),t("div",se,[t("p",oe,l(((d=s.creator)==null?void 0:d.name)||"Anonymous"),1),t("p",ae,l(S(s.created_at)),1)])]),t("div",le,[t("div",re,[r(n(z),{class:"w-3 h-3 md:w-4 md:h-4"}),t("span",ne,l(s.views_count||0),1)]),t("div",de,[r(n(f),{class:"w-3 h-3 md:w-4 md:h-4"}),t("span",null,l(s.comments_count||0),1)])])])])])])],8,qt)}),128))]),o.value.total_pages>1?(m(),i("div",ie,[t("button",{onClick:e[1]||(e[1]=s=>k(o.value.current_page-1)),disabled:o.value.current_page<=1,class:"px-3 md:px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors text-sm md:text-base"},e[21]||(e[21]=[t("span",{class:"hidden sm:inline"},"Previous",-1),t("span",{class:"sm:hidden"},"Prev",-1)]),8,me),t("div",ce,[(m(!0),i(B,null,j(U.value,s=>(m(),i("button",{key:s,onClick:d=>k(s),class:M(["w-8 h-8 md:w-10 md:h-10 rounded-lg transition-colors font-medium text-sm md:text-base",s===o.value.current_page?"bg-[#F8CB00] text-black":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"])},l(s),11,ue))),128))]),t("button",{onClick:e[2]||(e[2]=s=>k(o.value.current_page+1)),disabled:o.value.current_page>=o.value.total_pages,class:"px-3 md:px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors text-sm md:text-base"}," Next ",8,xe)])):b("",!0)])):(m(),i("div",ge,[t("div",pe,[r(n(f),{class:"w-6 h-6 md:w-8 md:h-8 text-gray-400"})]),e[22]||(e[22]=t("h3",{class:"text-lg md:text-xl font-semibold text-gray-900 mb-2"}," No Discussions Found ",-1)),t("p",fe,l(u.value?`No results found for "${u.value}"`:"Be the first to start a discussion!"),1),t("button",{onClick:T,class:"px-5 md:px-6 py-2.5 md:py-3 bg-[#F8CB00] text-black rounded-lg hover:bg-yellow-500 transition-colors font-medium text-sm md:text-base"}," Start New Discussion ")])),t("div",ve,[t("button",{onClick:T,class:"w-12 h-12 md:w-14 md:h-14 bg-[#F8CB00] rounded-full flex items-center justify-center text-black shadow-lg hover:shadow-xl hover:scale-110 transition-all duration-200 hover:bg-yellow-500"},[r(n(Z),{class:"w-5 h-5 md:w-6 md:h-6"})])])]),e[23]||(e[23]=t("div",{class:"absolute bottom-0 left-0 w-full transform translate-y-1"},[t("svg",{viewBox:"0 0 1200 120",preserveAspectRatio:"none",class:"w-full h-16"},[t("path",{fill:"rgb(248 250 252)",d:"M0,120 Q300,80 600,100 T1200,90 L1200,120 Z"})])],-1))])]))}},De=Y(he,[["__scopeId","data-v-ce33207c"]]);export{De as default};
