import{c as O,_ as W,u as Y,d as C,r as h,o as Z,h as a,z as ee,i as e,k as d,m as u,B as F,C as te,y as c,p as I,G as $,F as N,n as S,H as A,j as g,t as l,f as se,g as o,x as E,l as z}from"./index-c66276e5.js";import{S as ae}from"./search-717c4e48.js";import{C as le}from"./chevron-down-fec76aa5.js";import{X as oe}from"./x-e3b1c884.js";import{C as H}from"./calendar-c6eed731.js";import{C as q}from"./clock-55935058.js";import{E as G}from"./eye-8e1fae20.js";import{H as ne}from"./heart-88def72d.js";import{B as re}from"./bookmark-146d5daf.js";import{N as ie}from"./newspaper-7f34cd8d.js";const de=O("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ue=O("Share2Icon",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const ce={class:"min-h-screen bg-slate-900 pt-20"},pe={class:"container mx-auto px-4 py-8"},ge={class:"mb-8"},ve={class:"flex flex-col md:flex-row gap-4 mb-6"},be={class:"relative flex-1"},fe={key:0,class:"bg-slate-800/50 rounded-lg p-6 mb-6 border border-slate-700"},me={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},xe=["value"],_e={class:"space-y-2"},he={class:"flex items-center"},ye={class:"flex items-center"},we={class:"flex items-end"},ke={key:0,class:"flex justify-center items-center py-20"},Ce={key:1},Fe={class:"flex items-center justify-between mb-6"},Ne={class:"text-slate-400"},Se={class:"text-slate-400"},je={key:0,class:"mb-12"},Be={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Ve={class:"relative"},Me=["src","alt"],Te={key:0,class:"absolute top-4 left-4"},De={key:1,class:"absolute top-4 right-4"},Pe={class:"absolute bottom-0 left-0 right-0 p-6"},Le={class:"flex items-center gap-4 mb-3 text-sm text-slate-300"},Ue={class:"flex items-center gap-1"},Ie={class:"flex items-center gap-1"},$e={class:"text-slate-300 mb-4 line-clamp-2"},Ae={class:"flex items-center justify-between"},Ee={class:"flex items-center gap-2"},ze=["src","alt"],He={class:"text-sm text-slate-300"},qe={class:"flex items-center gap-4 text-sm text-slate-400"},Ge={class:"flex items-center gap-1"},Oe={class:"flex items-center gap-1"},Qe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},Xe={class:"relative"},Je=["src","alt"],Ke={class:"absolute top-3 left-3 flex gap-2"},Re={key:0,class:"bg-capital-red px-2 py-1 rounded text-xs font-bold text-white uppercase"},We={key:1,class:"bg-capital-yellow px-2 py-1 rounded text-xs font-bold text-black uppercase"},Ye={class:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},Ze={class:"w-8 h-8 bg-black/50 rounded-full flex items-center justify-center text-white hover:bg-black/70"},et={class:"w-8 h-8 bg-black/50 rounded-full flex items-center justify-center text-white hover:bg-black/70"},tt={class:"p-4"},st={class:"flex items-center gap-2 mb-2"},at={class:"text-xs text-slate-500 flex items-center gap-1"},lt={class:"text-slate-300 text-sm mb-3 line-clamp-2"},ot={class:"flex items-center justify-between text-xs text-slate-500 mb-3"},nt={class:"flex items-center gap-2"},rt=["src","alt"],it={class:"flex items-center gap-3"},dt={class:"flex items-center gap-1"},ut={class:"flex items-center gap-1"},ct={key:0,class:"flex flex-wrap gap-1"},pt={key:1,class:"flex justify-center items-center gap-4 mt-8"},gt=["disabled"],vt={class:"flex items-center gap-2"},bt=["onClick"],ft=["disabled"],mt={key:2,class:"text-center py-20"},xt={class:"text-slate-400"},_t={__name:"news",setup(ht){const y=Y(),n=C(()=>y.getters.news),j=C(()=>y.getters.station),f=h(!1),B=h(!1),x=h(""),V=h(null),r=h({search:"",category_id:"",author_id:"",station_id:j.value.id,is_featured:!1,is_breaking:!1,order_by:"created_at",page:1,per_page:12}),Q=h([{id:"1",name:"Politics",color:"#ef4444"},{id:"2",name:"Entertainment",color:"#f59e0b"},{id:"3",name:"Sports",color:"#10b981"},{id:"4",name:"Technology",color:"#3b82f6"}]),T=C(()=>{var i;return(i=n.value)!=null&&i.data?n.value.data.filter(s=>s.is_featured||s.is_breaking):[]}),X=C(()=>r.value.search||r.value.category_id||r.value.is_featured||r.value.is_breaking||r.value.order_by!=="created_at"),J=C(()=>{var b;if(!((b=n.value)!=null&&b.pages))return[];const i=n.value.page,s=n.value.pages,m=[],t=Math.max(1,i-2),v=Math.min(s,i+2);for(let p=t;p<=v;p++)m.push(p);return m}),D=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),K=()=>{V.value&&clearTimeout(V.value),V.value=setTimeout(()=>{r.value.search=x.value,r.value.page=1,_()},500)},_=async()=>{f.value=!0;try{await y.dispatch("fetch_user_news",r.value)}catch(i){console.error("Failed to fetch filtered news:",i)}finally{f.value=!1}},P=()=>{x.value="",r.value={search:"",category_id:"",author_id:"",station_id:j.value.id,is_featured:!1,is_breaking:!1,order_by:"created_at",page:1,per_page:12},_()},M=async i=>{if(i<1||i>n.value.pages)return;r.value.page=i,f.value=!0;let s={...r.value,station_id:j.value.id};try{await y.dispatch("fetch_user_news",s),window.scrollTo({top:0,behavior:"smooth"})}catch(m){console.error("Failed to fetch news:",m)}finally{f.value=!1}},R=async()=>{f.value=!0;let i={...r.value,station_id:j.value.id};try{await y.dispatch("fetch_user_news",i)}catch(s){console.error("Failed to fetch user news:",s)}finally{f.value=!1}};return Z(()=>{R()}),(i,s)=>{const m=se("router-link");return o(),a("div",ce,[s[24]||(s[24]=ee('<div class="bg-gradient-to-r from-slate-800 to-slate-900 py-12" data-v-dfe45ded><div class="container mx-auto px-4" data-v-dfe45ded><div class="text-center" data-v-dfe45ded><h1 class="text-4xl md:text-5xl font-bold text-white mb-4" data-v-dfe45ded> Latest <span class="text-capital-yellow" data-v-dfe45ded>News</span></h1><p class="text-slate-300 text-lg" data-v-dfe45ded>Stay updated with the latest news and updates from Capital FM</p></div></div></div>',1)),e("div",pe,[e("div",ge,[e("div",ve,[e("div",be,[d(u(ae),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),F(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>x.value=t),onInput:K,type:"text",placeholder:"Search news articles...",class:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-capital-blue focus:border-transparent"},null,544),[[te,x.value]])]),e("button",{onClick:s[1]||(s[1]=t=>B.value=!B.value),class:"px-6 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white hover:bg-slate-700 transition-colors flex items-center gap-2"},[d(u(de),{class:"w-5 h-5"}),s[8]||(s[8]=c(" Filters ")),d(u(le),{class:I(["w-4 h-4 transition-transform",{"rotate-180":B.value}])},null,8,["class"])])]),B.value?(o(),a("div",fe,[e("div",me,[e("div",null,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Category",-1)),F(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>r.value.category_id=t),onChange:_,class:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-capital-blue"},[s[9]||(s[9]=e("option",{value:""},"All Categories",-1)),(o(!0),a(N,null,S(Q.value,t=>(o(),a("option",{key:t.id,value:t.id},l(t.name),9,xe))),128))],544),[[$,r.value.category_id]])]),e("div",null,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Sort By",-1)),F(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>r.value.order_by=t),onChange:_,class:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-capital-blue"},s[11]||(s[11]=[e("option",{value:"created_at"},"Latest",-1),e("option",{value:"published_at"},"Published Date",-1),e("option",{value:"views"},"Most Viewed",-1),e("option",{value:"priority"},"Priority",-1)]),544),[[$,r.value.order_by]])]),e("div",null,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Type",-1)),e("div",_e,[e("label",he,[F(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>r.value.is_featured=t),onChange:_,type:"checkbox",class:"w-4 h-4 text-capital-blue bg-slate-700 border-slate-600 rounded focus:ring-capital-blue"},null,544),[[A,r.value.is_featured]]),s[13]||(s[13]=e("span",{class:"ml-2 text-white text-sm"},"Featured Only",-1))]),e("label",ye,[F(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>r.value.is_breaking=t),onChange:_,type:"checkbox",class:"w-4 h-4 text-capital-red bg-slate-700 border-slate-600 rounded focus:ring-capital-red"},null,544),[[A,r.value.is_breaking]]),s[14]||(s[14]=e("span",{class:"ml-2 text-white text-sm"},"Breaking News",-1))])])]),e("div",we,[e("button",{onClick:P,class:"w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors flex items-center justify-center gap-2"},[d(u(oe),{class:"w-4 h-4"}),s[16]||(s[16]=c(" Clear All "))])])])])):g("",!0)]),f.value?(o(),a("div",ke,s[17]||(s[17]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-capital-blue"},null,-1)]))):n.value&&n.value.data&&n.value.data.length>0?(o(),a("div",Ce,[e("div",Fe,[e("div",Ne," Showing "+l(n.value.data.length)+" of "+l(n.value.total)+" articles ",1),e("div",Se," Page "+l(n.value.page)+" of "+l(n.value.pages),1)]),T.value.length>0?(o(),a("div",je,[s[21]||(s[21]=e("h2",{class:"text-2xl font-bold text-white mb-6 flex items-center gap-2"},[e("span",{class:"w-2 h-2 bg-capital-red rounded-full animate-pulse"}),c(" Breaking & Featured News ")],-1)),e("div",Be,[(o(!0),a(N,null,S(T.value.slice(0,2),t=>{var v,b,p,w,k;return o(),a("article",{key:t.id,class:"bg-slate-800/70 rounded-xl overflow-hidden hover:bg-slate-800 transition-all duration-300 group cursor-pointer"},[e("div",Ve,[e("img",{src:t.featured_image_url,alt:t.title,class:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300"},null,8,Me),s[20]||(s[20]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/60 to-transparent"},null,-1)),t.is_breaking?(o(),a("div",Te,s[18]||(s[18]=[e("span",{class:"bg-capital-red px-3 py-1 rounded-full text-xs font-bold text-white uppercase tracking-wider flex items-center gap-1"},[e("span",{class:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),c(" Breaking ")],-1)]))):g("",!0),t.is_featured?(o(),a("div",De,s[19]||(s[19]=[e("span",{class:"bg-capital-yellow px-3 py-1 rounded-full text-xs font-bold text-black uppercase tracking-wider"}," Featured ",-1)]))):g("",!0),e("div",Pe,[e("div",Le,[e("span",{class:"bg-slate-800/80 px-2 py-1 rounded text-xs backdrop-blur",style:E({color:((v=t.category)==null?void 0:v.color)||"#64748b"})},l(((b=t.category)==null?void 0:b.name)||"News"),5),e("span",Ue,[d(u(H),{class:"w-3 h-3"}),c(" "+l(D(t.published_at)),1)]),e("span",Ie,[d(u(q),{class:"w-3 h-3"}),c(" "+l(t.reading_time)+"min ",1)])]),d(m,{to:{name:"news_details",params:{id:t.slug}},class:"text-xl font-bold text-white mb-3 group-hover:text-capital-blue transition-colors line-clamp-2"},{default:z(()=>[c(l(t.title),1)]),_:2},1032,["to"]),e("p",$e,l(t.excerpt),1),e("div",Ae,[e("div",Ee,[e("img",{src:(p=t.author)==null?void 0:p.image_url,alt:(w=t.author)==null?void 0:w.name,class:"w-8 h-8 rounded-full"},null,8,ze),e("span",He,l((k=t.author)==null?void 0:k.name),1)]),e("div",qe,[e("span",Ge,[d(u(G),{class:"w-4 h-4"}),c(" "+l(t.views_count),1)]),e("span",Oe,[d(u(ne),{class:"w-4 h-4"}),c(" "+l(t.likes_count),1)])])])])])])}),128))])])):g("",!0),e("div",Qe,[(o(!0),a(N,null,S(n.value.data,t=>{var v,b,p,w,k,L;return o(),a("article",{key:t.id,class:"bg-slate-800/50 rounded-xl overflow-hidden hover:bg-slate-800/70 transition-all duration-300 hover:scale-105 group cursor-pointer"},[e("div",Xe,[e("img",{src:t.featured_image_url,alt:t.title,class:"w-full h-48 object-cover"},null,8,Je),s[22]||(s[22]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent"},null,-1)),e("div",Ke,[t.is_breaking?(o(),a("span",Re," Breaking ")):g("",!0),t.is_featured?(o(),a("span",We," Featured ")):g("",!0)]),e("div",Ye,[e("button",Ze,[d(u(re),{class:"w-4 h-4"})]),e("button",et,[d(u(ue),{class:"w-4 h-4"})])])]),e("div",tt,[e("div",st,[e("span",{class:"text-xs px-2 py-1 rounded",style:E({backgroundColor:(((v=t.category)==null?void 0:v.color)||"#64748b")+"20",color:((b=t.category)==null?void 0:b.color)||"#64748b"})},l(((p=t.category)==null?void 0:p.name)||"News"),5),e("span",at,[d(u(H),{class:"w-3 h-3"}),c(" "+l(D(t.published_at)),1)])]),d(m,{to:{name:"news_details",params:{id:t.slug}},class:"text-lg font-bold text-white mb-2 group-hover:text-capital-blue transition-colors line-clamp-2"},{default:z(()=>[c(l(t.title),1)]),_:2},1032,["to"]),e("p",lt,l(t.excerpt),1),e("div",ot,[e("div",nt,[e("img",{src:(w=t.author)==null?void 0:w.image_url,alt:(k=t.author)==null?void 0:k.name,class:"w-6 h-6 rounded-full"},null,8,rt),e("span",null,l((L=t.author)==null?void 0:L.name),1)]),e("div",it,[e("span",dt,[d(u(G),{class:"w-3 h-3"}),c(" "+l(t.views_count),1)]),e("span",ut,[d(u(q),{class:"w-3 h-3"}),c(" "+l(t.reading_time)+"min ",1)])])]),t.tags&&t.tags.length>0?(o(),a("div",ct,[(o(!0),a(N,null,S(t.tags.slice(0,3),U=>(o(),a("span",{key:U,class:"text-xs bg-slate-700 text-slate-300 px-2 py-1 rounded hover:bg-slate-600 cursor-pointer"}," #"+l(U),1))),128))])):g("",!0)])])}),128))]),n.value.pages>1?(o(),a("div",pt,[e("button",{onClick:s[6]||(s[6]=t=>M(n.value.page-1)),disabled:n.value.page<=1,class:"px-4 py-2 bg-slate-800 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-700 transition-colors"}," Previous ",8,gt),e("div",vt,[(o(!0),a(N,null,S(J.value,t=>(o(),a("button",{key:t,onClick:v=>M(t),class:I(["w-10 h-10 rounded-lg transition-colors",t===n.value.page?"bg-capital-blue text-white":"bg-slate-800 text-slate-300 hover:bg-slate-700"])},l(t),11,bt))),128))]),e("button",{onClick:s[7]||(s[7]=t=>M(n.value.page+1)),disabled:n.value.page>=n.value.pages,class:"px-4 py-2 bg-slate-800 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-700 transition-colors"}," Next ",8,ft)])):g("",!0)])):(o(),a("div",mt,[d(u(ie),{class:"w-16 h-16 text-slate-600 mx-auto mb-4"}),s[23]||(s[23]=e("h3",{class:"text-xl font-bold text-white mb-2"},"No News Available",-1)),e("p",xt,l(x.value?`No results found for "${x.value}"`:"Check back later for the latest updates."),1),X.value?(o(),a("button",{key:0,onClick:P,class:"mt-4 px-4 py-2 bg-capital-blue text-white rounded-lg hover:bg-blue-600 transition-colors"}," Clear Filters ")):g("",!0)]))])])}}},Mt=W(_t,[["__scopeId","data-v-dfe45ded"]]);export{Mt as default};
