import{c as L,_ as J,u as O,d as b,r as f,o as Q,h as i,z as R,i as e,k as r,m as d,B as q,C as K,t as o,F as C,n as S,j as p,g as c,y as T,p as U}from"./index-c66276e5.js";import{S as W}from"./search-717c4e48.js";import{M as h}from"./message-circle-08832ec4.js";import{U as M}from"./users-c52082ff.js";import{P as I}from"./pin-947b5df0.js";import{F as V}from"./flame-d499ba7f.js";import{E as A}from"./eye-8e1fae20.js";import{U as B}from"./user-fcfaf86a.js";const X=L("PlusIcon",[["line",{x1:"12",x2:"12",y1:"5",y2:"19",key:"pwfkuu"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]]),Z=L("TrendingUpIcon",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const ee={class:"min-h-screen bg-slate-50 dark:bg-slate-900 pt-32"},te={class:"max-w-7xl mx-auto px-6 py-8"},se={class:"mb-8"},ae={class:"relative max-w-2xl mx-auto"},le={class:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-12"},oe={class:"bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700 text-center shadow-sm"},re={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center mx-auto mb-3"},de={class:"text-2xl font-bold text-slate-900 dark:text-white mb-1"},ne={class:"bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700 text-center shadow-sm"},ie={class:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center mx-auto mb-3"},ce={class:"text-2xl font-bold text-slate-900 dark:text-white mb-1"},ue={class:"bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700 text-center shadow-sm"},xe={class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center mx-auto mb-3"},me={class:"text-2xl font-bold text-slate-900 dark:text-white mb-1"},be={class:"bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700 text-center shadow-sm"},he={class:"w-12 h-12 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center mx-auto mb-3"},ve={class:"relative"},_e={class:"text-2xl font-bold text-slate-900 dark:text-white mb-1"},fe={key:0,class:"flex justify-center items-center py-20"},pe={key:1},ge={class:"flex items-center justify-between mb-8"},we={class:"text-slate-600 dark:text-slate-400"},ke={class:"text-slate-600 dark:text-slate-400"},ye={key:0,class:"mb-12"},je={class:"flex items-center gap-3 mb-6"},Ce={class:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg flex items-center justify-center"},Se={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Te=["onClick"],Fe={class:"flex items-start justify-between mb-4"},De={class:"flex items-center space-x-2"},$e={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"},Ne={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"},Pe={class:"flex items-center space-x-4 text-sm text-slate-500 dark:text-slate-400"},Ue={class:"flex items-center space-x-1"},Me={class:"flex items-center space-x-1"},Ie={class:"text-lg font-semibold text-slate-900 dark:text-white mb-3 group-hover:text-blue-600 transition-colors line-clamp-2"},Ve={class:"text-slate-600 dark:text-slate-300 mb-4 line-clamp-2"},Ae={class:"flex items-center justify-between"},Be={class:"flex items-center space-x-2"},Le={class:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center"},Ee={class:"text-sm font-medium text-slate-900 dark:text-white"},He={class:"text-xs text-slate-500 dark:text-slate-400"},Ye={class:"space-y-4 mb-8"},ze={class:"flex items-center gap-3 mb-6"},Ge={class:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},Je=["onClick"],Oe={class:"flex items-start space-x-4"},Qe={class:"flex-shrink-0 mt-1"},Re={class:"flex-1 min-w-0"},qe={class:"flex items-center space-x-3 mb-2"},Ke={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"},We={class:"text-lg font-semibold text-slate-900 dark:text-white mb-2 group-hover:text-blue-600 transition-colors line-clamp-2"},Xe={class:"text-slate-600 dark:text-slate-300 text-sm mb-4 line-clamp-2"},Ze={class:"flex items-center justify-between"},et={class:"flex items-center space-x-2"},tt={class:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center"},st={class:"text-sm font-medium text-slate-900 dark:text-white"},at={class:"text-xs text-slate-500 dark:text-slate-400"},lt={class:"flex items-center space-x-4 text-sm text-slate-500 dark:text-slate-400"},ot={class:"flex items-center space-x-1"},rt={class:"flex items-center space-x-1"},dt={key:1,class:"flex justify-center items-center gap-2 mt-12"},nt=["disabled"],it={class:"flex items-center gap-1"},ct=["onClick"],ut=["disabled"],xt={key:2,class:"text-center py-20"},mt={class:"w-16 h-16 bg-slate-200 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4"},bt={class:"text-slate-600 dark:text-slate-400 mb-6"},ht={class:"fixed bottom-8 right-8"},vt={__name:"forums",setup(_t){var N;const v=O(),a=b(()=>v.getters.forums),g=b(()=>v.getters.station),u=f(!1),x=f(""),w=f(null),m=f({search:"",station_id:((N=g.value)==null?void 0:N.id)||1,page:1,per_page:12}),_=b(()=>{var l;return(l=a.value)!=null&&l.metrics?{total_topics:a.value.metrics.total_topics||0,total_replies:a.value.metrics.total_comments||0,active_users:a.value.metrics.total_views||0,online_now:a.value.metrics.online_now||0}:{total_topics:0,total_replies:0,active_users:0,online_now:0}}),F=b(()=>{var l;return(l=a.value)!=null&&l.data?a.value.data.filter(t=>t.is_pinned):[]}),E=b(()=>{var l;return(l=a.value)!=null&&l.data?a.value.data.filter(t=>!t.is_pinned):[]}),H=b(()=>{var P;if(!((P=a.value)!=null&&P.total_pages))return[];const l=a.value.current_page,t=a.value.total_pages,s=[],n=Math.max(1,l-2),y=Math.min(t,l+2);for(let j=n;j<=y;j++)s.push(j);return s}),D=l=>{const t=new Date(l),s=new Date,n=(s-t)/(1e3*60*60);return n<1?`${Math.floor((s-t)/(1e3*60))} minutes ago`:n<24?`${Math.floor(n)} hours ago`:n<48?"Yesterday":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==s.getFullYear()?"numeric":void 0})},Y=()=>{w.value&&clearTimeout(w.value),w.value=setTimeout(()=>{m.value.search=x.value,m.value.page=1,z()},500)},z=async()=>{u.value=!0;try{await v.dispatch("fetch_user_forums",m.value)}catch(l){console.error("Failed to fetch filtered forums:",l)}finally{u.value=!1}},k=async l=>{var s;if(l<1||l>a.value.total_pages)return;m.value.page=l,u.value=!0;const t={...m.value,station_id:((s=g.value)==null?void 0:s.id)||1};try{await v.dispatch("fetch_user_forums",t),window.scrollTo({top:0,behavior:"smooth"})}catch(n){console.error("Failed to fetch forums:",n)}finally{u.value=!1}},$=()=>{console.log("Create new topic")},G=async()=>{var t;u.value=!0;const l={...m.value,station_id:((t=g.value)==null?void 0:t.id)||1};try{await v.dispatch("fetch_user_forums",l)}catch(s){console.error("Failed to fetch forums:",s)}finally{u.value=!1}};return Q(()=>{G()}),(l,t)=>(c(),i("div",ee,[t[16]||(t[16]=R('<div class="bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700" data-v-22994390><div class="max-w-7xl mx-auto px-6 py-12" data-v-22994390><div class="text-center" data-v-22994390><h1 class="text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-4" data-v-22994390> Community <span class="text-blue-600" data-v-22994390>Forums</span></h1><p class="text-xl text-slate-600 dark:text-slate-300 max-w-2xl mx-auto" data-v-22994390> Join the discussion and connect with fellow Capital FM listeners across Uganda </p></div></div></div>',1)),e("div",te,[e("div",se,[e("div",ae,[r(d(W),{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),q(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),onInput:Y,type:"text",placeholder:"Search forum discussions...",class:"w-full pl-12 pr-4 py-4 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-xl text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"},null,544),[[K,x.value]])])]),e("div",le,[e("div",oe,[e("div",re,[r(d(h),{class:"w-6 h-6 text-blue-600"})]),e("div",de,o(_.value.total_topics),1),t[3]||(t[3]=e("div",{class:"text-sm text-slate-600 dark:text-slate-400"},"Total Topics",-1))]),e("div",ne,[e("div",ie,[r(d(M),{class:"w-6 h-6 text-green-600"})]),e("div",ce,o(_.value.total_replies),1),t[4]||(t[4]=e("div",{class:"text-sm text-slate-600 dark:text-slate-400"},"Total Replies",-1))]),e("div",ue,[e("div",xe,[r(d(Z),{class:"w-6 h-6 text-purple-600"})]),e("div",me,o(_.value.active_users),1),t[5]||(t[5]=e("div",{class:"text-sm text-slate-600 dark:text-slate-400"},"Active Users",-1))]),e("div",be,[e("div",he,[e("div",ve,[r(d(M),{class:"w-6 h-6 text-emerald-600"}),t[6]||(t[6]=e("div",{class:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"},null,-1))])]),e("div",_e,o(_.value.online_now),1),t[7]||(t[7]=e("div",{class:"text-sm text-slate-600 dark:text-slate-400"},"Online Now",-1))])]),u.value?(c(),i("div",fe,t[8]||(t[8]=[e("div",{class:"w-12 h-12 border-4 border-slate-300 border-t-blue-600 rounded-full animate-spin"},null,-1)]))):a.value&&a.value.data&&a.value.data.length>0?(c(),i("div",pe,[e("div",ge,[e("div",we,o(x.value?`Search results for "${x.value}"`:"All Discussions")+" - Showing "+o(a.value.data.length)+" of "+o(a.value.total),1),e("div",ke," Page "+o(a.value.current_page)+" of "+o(a.value.total_pages),1)]),F.value.length>0?(c(),i("div",ye,[e("div",je,[e("div",Ce,[r(d(I),{class:"w-5 h-5 text-yellow-600"})]),t[9]||(t[9]=e("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Pinned Discussions",-1))]),e("div",Se,[(c(!0),i(C,null,S(F.value,s=>{var n;return c(),i("div",{key:s.id,class:"bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md hover:border-blue-300 dark:hover:border-blue-500 transition-all group cursor-pointer",onClick:y=>l.$router.push({name:"forum_details",params:{id:s.slug}})},[e("div",Fe,[e("div",De,[e("span",$e,[r(d(I),{class:"w-3 h-3 mr-1"}),t[10]||(t[10]=T(" Pinned "))]),s.is_hot?(c(),i("span",Ne,[r(d(V),{class:"w-3 h-3 mr-1"}),t[11]||(t[11]=T(" Hot "))])):p("",!0)]),e("div",Pe,[e("div",Ue,[r(d(A),{class:"w-4 h-4"}),e("span",null,o(s.views_count||0),1)]),e("div",Me,[r(d(h),{class:"w-4 h-4"}),e("span",null,o(s.comments_count||0),1)])])]),e("h3",Ie,o(s.title),1),e("p",Ve,o(s.body),1),e("div",Ae,[e("div",Be,[e("div",Le,[r(d(B),{class:"w-4 h-4 text-slate-500 dark:text-slate-400"})]),e("div",null,[e("p",Ee,o(((n=s.creator)==null?void 0:n.name)||"Anonymous"),1),e("p",He,o(D(s.created_at)),1)])])])],8,Te)}),128))])])):p("",!0),e("div",Ye,[e("div",ze,[e("div",Ge,[r(d(h),{class:"w-5 h-5 text-blue-600"})]),t[12]||(t[12]=e("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"All Discussions",-1))]),(c(!0),i(C,null,S(E.value,s=>{var n;return c(),i("div",{key:s.id,class:"bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md hover:border-blue-300 dark:hover:border-blue-500 transition-all group cursor-pointer",onClick:y=>l.$router.push({name:"forum_details",params:{id:s.slug}})},[e("div",Oe,[e("div",Qe,[e("div",{class:U(["w-12 h-12 rounded-full flex items-center justify-center",s.is_hot?"bg-red-100 dark:bg-red-900/20 text-red-600":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"])},[r(d(h),{class:"w-6 h-6"})],2)]),e("div",Re,[e("div",qe,[t[14]||(t[14]=e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"}," General Discussion ",-1)),s.is_hot?(c(),i("span",Ke,[r(d(V),{class:"w-3 h-3 mr-1"}),t[13]||(t[13]=T(" Hot "))])):p("",!0)]),e("h3",We,o(s.title),1),e("p",Xe,o(s.body),1),e("div",Ze,[e("div",et,[e("div",tt,[r(d(B),{class:"w-4 h-4 text-slate-500 dark:text-slate-400"})]),e("div",null,[e("p",st,o(((n=s.creator)==null?void 0:n.name)||"Anonymous"),1),e("p",at,o(D(s.created_at)),1)])]),e("div",lt,[e("div",ot,[r(d(A),{class:"w-4 h-4"}),e("span",null,o(s.views_count||0),1)]),e("div",rt,[r(d(h),{class:"w-4 h-4"}),e("span",null,o(s.comments_count||0),1)])])])])])],8,Je)}),128))]),a.value.total_pages>1?(c(),i("div",dt,[e("button",{onClick:t[1]||(t[1]=s=>k(a.value.current_page-1)),disabled:a.value.current_page<=1,class:"px-4 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors"}," Previous ",8,nt),e("div",it,[(c(!0),i(C,null,S(H.value,s=>(c(),i("button",{key:s,onClick:n=>k(s),class:U(["w-10 h-10 rounded-lg transition-colors font-medium",s===a.value.current_page?"bg-blue-600 text-white":"bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"])},o(s),11,ct))),128))]),e("button",{onClick:t[2]||(t[2]=s=>k(a.value.current_page+1)),disabled:a.value.current_page>=a.value.total_pages,class:"px-4 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors"}," Next ",8,ut)])):p("",!0)])):(c(),i("div",xt,[e("div",mt,[r(d(h),{class:"w-8 h-8 text-slate-400"})]),t[15]||(t[15]=e("h3",{class:"text-xl font-semibold text-slate-900 dark:text-white mb-2"},"No Discussions Found",-1)),e("p",bt,o(x.value?`No results found for "${x.value}"`:"Be the first to start a discussion!"),1),e("button",{onClick:$,class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Start New Discussion ")])),e("div",ht,[e("button",{onClick:$,class:"w-14 h-14 bg-blue-600 rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-xl hover:scale-110 transition-all duration-200 hover:bg-blue-700"},[r(d(X),{class:"w-6 h-6"})])])])]))}},St=J(vt,[["__scopeId","data-v-22994390"]]);export{St as default};
