import{_ as L,u as R,g as C,f as b,p as T,c as u,o,b as e,h as _,l as c,k as H,i as r,t as g,F as U,s as V,a as z,n as B,d as k,w as p,v,C as M}from"./index-nOqVMhSP.js";import{L as h}from"./loader-CmDhcKWI.js";import{c as F}from"./createLucideIcon-BxhE3_JV.js";import{M as q}from"./mail-CzBhq506.js";import{C as J}from"./calendar-BNS961R1.js";import{S as O}from"./square-pen-BYKpSTKJ.js";import{T as X}from"./trash-CULHkSjr.js";import{X as Y}from"./x-D4KeTYyF.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=F("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=F("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=F("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),W={class:"space-y-6"},Z={class:"flex justify-between items-center"},ee={class:"flex items-center gap-3"},te=["disabled"],ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},se={class:"relative"},le=["src","alt"],oe={key:0,class:"absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-1 rounded-full flex items-center"},de=["onClick","disabled"],ie={key:1},re={class:"p-4"},ne={class:"text-lg font-semibold text-slate-900 dark:text-white"},ue={class:"text-indigo-600 dark:text-indigo-400 text-sm mb-2"},ce={class:"text-slate-600 dark:text-slate-400 text-sm mb-4 line-clamp-2"},pe={class:"flex justify-between items-center"},ge={class:"flex space-x-2"},ve=["title"],me=["title"],be={class:"text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400",title:"Schedule"},he={class:"flex space-x-2"},xe=["onClick","disabled"],fe=["onClick","disabled"],_e={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},ke={class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},ye={class:"p-6 border-b border-slate-200 dark:border-slate-700"},we={class:"flex justify-between items-center"},Ce={class:"text-lg font-semibold text-slate-900 dark:text-white"},Fe={class:"p-6 space-y-4"},He={class:"flex items-center space-x-4"},Ue={class:"relative"},Ve=["src"],Me=["disabled"],je={class:"grid grid-cols-2 gap-4"},Ie={class:"grid grid-cols-2 gap-4"},Se={class:"grid grid-cols-2 gap-4"},Ae={class:"flex items-center space-x-4"},De={class:"flex items-center"},$e={class:"flex items-center"},Ne={class:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3"},Pe=["disabled"],Ee={key:0},Le={key:1},Re={__name:"Hosts",setup(Te){const d=R(),j=C(()=>d.getters.hosts),i=C(()=>d.getters.loading);C(()=>d.getters.error);const x=b(!1),n=b(null),I=b(1),f=b(null),s=b({name:"",role:"",email:"",phone:"",bio:"",social_media:"",experience_years:0,status:!0,on_air_status:!1,image_url:"",image_path:"",imageFile:null}),S=()=>{s.value={name:"",role:"",email:"",phone:"",bio:"",social_media:"",experience_years:0,status:!0,on_air_status:!1,image_url:"",image_path:"",imageFile:null},f.value&&(f.value.value="")},A=()=>{var l;(l=f.value)==null||l.click()},D=async l=>{const t=l.target.files[0];if(t)if(s.value.imageFile=t,n.value){const a=new FormData;a.append("image",t);try{await d.dispatch("update_host_profile_image",{id:n.value.id,data:a}),d.dispatch("template_play_success_file","Profile image updated successfully")}catch(m){console.error("Failed to update profile image:",m),d.dispatch("template_play_error_file","Failed to update profile image")}}else{const a=new FileReader;a.onload=m=>{s.value.image_url=m.target.result},a.readAsDataURL(t)}},$=l=>{s.value={...l,imageFile:null},n.value=l,x.value=!0},y=()=>{x.value=!1,n.value=null,S()},N=async()=>{try{const l=new FormData;Object.keys(s.value).forEach(t=>{t!=="imageFile"&&s.value[t]!==null&&s.value[t]!==void 0&&(typeof s.value[t]=="boolean"?l.append(t,s.value[t].toString()):l.append(t,s.value[t]))}),s.value.imageFile&&l.append("image",s.value.imageFile),n.value?await d.dispatch("update_host",{hostId:n.value.id,data:l}):await d.dispatch("create_host",l),await w(),y(),n.value?d.dispatch("template_play_success_file","Host updated successfully"):d.dispatch("template_play_success_file","Host created successfully")}catch(l){console.error("Failed to save host:",l),d.dispatch("template_play_error_file","Failed to save host")}},P=async l=>{if(confirm(`Are you sure you want to delete ${l.name}?`))try{await d.dispatch("delete_host",{id:l.id,data:{}}),await w(),d.dispatch("template_play_delete_file","Host deleted successfully")}catch(t){console.error("Failed to delete host:",t),d.dispatch("template_play_error_file","Failed to delete host")}},E=async l=>{try{const t=!l.status;await d.dispatch("toggle_host_status",{id:l.id,data:{status:t}}),l.status=t,d.dispatch("template_play_success_file","Host status updated")}catch(t){console.error("Failed to toggle host status:",t),d.dispatch("template_play_error_file","Failed to update host status")}},w=async()=>{let l={per_page:10},t=I.value;try{await d.dispatch("fetch_hosts",{data:l,page:t})}catch(a){console.error("Failed to fetch hosts:",a),d.dispatch("template_play_error_file","Failed to load hosts")}};return T(()=>{w()}),(l,t)=>(o(),u("div",W,[e("div",Z,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-2xl font-semibold text-slate-900 dark:text-white"},"Hosts & DJs"),e("p",{class:"text-sm text-slate-600 dark:text-slate-400 mt-1"},"Manage your radio hosts and DJs")],-1)),e("div",ee,[e("button",{onClick:t[0]||(t[0]=a=>x.value=!0),disabled:i.value==="create_host",class:"bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium disabled:opacity-50"},[i.value==="create_host"?(o(),c(r(h),{key:0,class:"h-4 w-4 animate-spin"})):(o(),c(r(Q),{key:1,class:"h-4 w-4"})),H(" "+g(i.value==="create_host"?"Creating...":"Add Host"),1)],8,te)])]),e("div",ae,[i.value==="fetch_hosts"?(o(),u(U,{key:0},V(8,a=>e("div",{key:`skeleton-${a}`,class:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden animate-pulse"},t[11]||(t[11]=[z('<div class="h-48 bg-slate-200 dark:bg-slate-700" data-v-17da04a1></div><div class="p-4 space-y-3" data-v-17da04a1><div class="h-5 bg-slate-200 dark:bg-slate-700 rounded w-3/4" data-v-17da04a1></div><div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2" data-v-17da04a1></div><div class="space-y-2" data-v-17da04a1><div class="h-3 bg-slate-200 dark:bg-slate-700 rounded" data-v-17da04a1></div><div class="h-3 bg-slate-200 dark:bg-slate-700 rounded w-5/6" data-v-17da04a1></div></div><div class="flex justify-between items-center pt-2" data-v-17da04a1><div class="flex space-x-2" data-v-17da04a1><div class="h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded" data-v-17da04a1></div><div class="h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded" data-v-17da04a1></div><div class="h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded" data-v-17da04a1></div></div><div class="flex space-x-2" data-v-17da04a1><div class="h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded" data-v-17da04a1></div><div class="h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded" data-v-17da04a1></div></div></div></div>',2)]))),64)):(o(!0),u(U,{key:1},V(j.value.data,a=>(o(),u("div",{key:a.id,class:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-lg transition-shadow"},[e("div",se,[e("img",{src:a.image_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(a.name)}&background=6366f1&color=fff&size=400`,alt:`${a.name} profile`,class:"w-full h-48 object-cover"},null,8,le),a.on_air_status?(o(),u("div",oe,t[12]||(t[12]=[e("div",{class:"w-2 h-2 bg-white rounded-full mr-1 animate-pulse"},null,-1),H(" LIVE ")]))):_("",!0),e("button",{onClick:m=>E(a),disabled:i.value==="toggle_host_status",class:B(["absolute top-2 left-2 text-xs px-2 py-1 rounded-full disabled:opacity-50",a.status?"bg-green-600 text-white":"bg-slate-600 text-white"])},[i.value==="toggle_host_status"?(o(),c(r(h),{key:0,class:"w-3 h-3 animate-spin"})):(o(),u("span",ie,g(a.status?"Active":"Inactive"),1))],10,de)]),e("div",re,[e("h3",ne,g(a.name),1),e("p",ue,g(a.role||"Radio Host"),1),e("p",ce,g(a.bio||"No bio available"),1),e("div",pe,[e("div",ge,[a.phone?(o(),u("button",{key:0,class:"text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400",title:a.phone},[k(r(K),{class:"h-5 w-5"})],8,ve)):_("",!0),a.email?(o(),u("button",{key:1,class:"text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400",title:a.email},[k(r(q),{class:"h-5 w-5"})],8,me)):_("",!0),e("button",be,[k(r(J),{class:"h-5 w-5"})])]),e("div",he,[e("button",{onClick:m=>$(a),disabled:i.value==="update_host",class:"text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 disabled:opacity-50"},[i.value!=="update_host"?(o(),c(r(O),{key:0,class:"h-5 w-5"})):(o(),c(r(h),{key:1,class:"h-5 w-5 animate-spin"}))],8,xe),e("button",{onClick:m=>P(a),disabled:i.value==="delete_host",class:"text-slate-400 hover:text-red-600 dark:hover:text-red-400 disabled:opacity-50"},[i.value!=="delete_host"?(o(),c(r(X),{key:0,class:"h-5 w-5"})):(o(),c(r(h),{key:1,class:"h-5 w-5 animate-spin"}))],8,fe)])])])]))),128))]),x.value||n.value?(o(),u("div",_e,[e("div",ke,[e("div",ye,[e("div",we,[e("h2",Ce,g(n.value?"Edit Host":"Add New Host"),1),e("button",{onClick:y,class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"},[k(r(Y),{class:"h-5 w-5"})])])]),e("div",Fe,[e("div",He,[e("div",Ue,[e("img",{src:s.value.image_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(s.value.name||"Host")}&background=6366f1&color=fff&size=150`,alt:"Host profile",class:"w-20 h-20 rounded-full object-cover border-2 border-slate-200 dark:border-slate-600"},null,8,Ve),e("button",{onClick:A,disabled:i.value==="update_host_profile_image",class:"absolute bottom-0 right-0 bg-indigo-600 hover:bg-indigo-700 text-white p-1.5 rounded-full disabled:opacity-50"},[i.value==="update_host_profile_image"?(o(),c(r(h),{key:0,class:"w-3 h-3 animate-spin"})):(o(),c(r(G),{key:1,class:"w-3 h-3"}))],8,Me),e("input",{ref_key:"imageInput",ref:f,type:"file",accept:"image/*",onChange:D,class:"hidden"},null,544)]),t[13]||(t[13]=e("div",null,[e("p",{class:"text-sm font-medium text-slate-700 dark:text-slate-300"},"Profile Picture"),e("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Click the camera icon to upload")],-1))]),e("div",je,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Full Name",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>s.value.name=a),class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"Enter host name",required:""},null,512),[[v,s.value.name]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Role/Title",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>s.value.role=a),class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"e.g. Morning Show Host"},null,512),[[v,s.value.role]])])]),e("div",Ie,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Email",-1)),p(e("input",{type:"email","onUpdate:modelValue":t[3]||(t[3]=a=>s.value.email=a),class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"host@example.com"},null,512),[[v,s.value.email]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Phone",-1)),p(e("input",{type:"tel","onUpdate:modelValue":t[4]||(t[4]=a=>s.value.phone=a),class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"+1 (555) 123-4567"},null,512),[[v,s.value.phone]])])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Bio",-1)),p(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.value.bio=a),rows:"3",class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"Tell us about this host..."},null,512),[[v,s.value.bio]])]),e("div",Se,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Social Media",-1)),p(e("input",{type:"url","onUpdate:modelValue":t[6]||(t[6]=a=>s.value.social_media=a),class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"https://twitter.com/host"},null,512),[[v,s.value.social_media]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Experience Years",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=a=>s.value.experience_years=a),class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"5"},null,512),[[v,s.value.experience_years]])])]),e("div",Ae,[e("div",De,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=a=>s.value.status=a),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-slate-300 dark:border-slate-600 rounded"},null,512),[[M,s.value.status]]),t[21]||(t[21]=e("label",{class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},"Active Host",-1))]),e("div",$e,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=a=>s.value.on_air_status=a),class:"h-4 w-4 text-red-600 focus:ring-red-500 border-slate-300 dark:border-slate-600 rounded"},null,512),[[M,s.value.on_air_status]]),t[22]||(t[22]=e("label",{class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},"Currently On Air",-1))])])]),e("div",Ne,[e("button",{onClick:y,class:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100"}," Cancel "),e("button",{onClick:N,disabled:i.value==="create_host"||i.value==="update_host",class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 text-white rounded-md text-sm font-medium disabled:opacity-50"},[i.value==="create_host"||i.value==="update_host"?(o(),u("span",Ee,g(n.value?"Updating...":"Creating..."),1)):(o(),u("span",Le,g(n.value?"Update":"Create"),1))],8,Pe)])])])):_("",!0)]))}},Ke=L(Re,[["__scopeId","data-v-17da04a1"]]);export{Ke as default};
