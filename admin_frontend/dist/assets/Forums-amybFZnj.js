import{u as Z,g as v,i as C,h as ee,r as te,c as r,o,b as e,s as y,d as p,p as V,k as i,l as f,I as E,F,C as S,t as n,j as k,m as ae,n as U,y as A,v as P,x as se,J as $,B as z}from"./index-C6Jd7ikw.js";import{P as oe}from"./plus-CPMASaO5.js";import{L as N}from"./loader-h5BeRNO0.js";import{T as re,a as le}from"./toggle-right-BhgsziAy.js";import{S as ne}from"./square-pen-DrvszpwB.js";import{T as ie}from"./trash-DsgLcRxG.js";import{M as de}from"./message-square-Dh6d75qh.js";import{X as ue}from"./x-bzCpu7B1.js";import{T as ce}from"./triangle-alert-DctAOIJa.js";import"./createLucideIcon-BALkPLUs.js";const ge={class:""},pe={class:"flex justify-between items-center mb-6"},me={class:"mb-6 flex flex-wrap gap-4"},be=["value"],xe={key:0,class:"flex justify-center py-8"},ve={key:1,class:"space-y-4"},ye={class:"flex justify-between items-start"},fe={class:"flex-1"},ke={class:"font-semibold text-gray-900 dark:text-white"},he={class:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 px-2 py-1 rounded-full text-xs font-medium"},we={class:"text-gray-600 dark:text-gray-300 text-sm line-clamp-2"},_e={class:"flex items-center gap-4 mt-2 text-xs text-gray-500 dark:text-gray-400"},Ce={class:"flex items-center gap-2 ml-4"},Fe=["onClick","disabled"],Se=["onClick"],Me=["onClick"],Te={key:0,class:"flex justify-center mt-6"},De={class:"flex items-center gap-2"},je=["onClick","disabled"],Ve={key:2,class:"text-center py-12"},Ee={class:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-slate-600"},Ue={class:"text-lg font-semibold text-gray-900 dark:text-white"},Ae=["value"],Ne={class:"flex items-center"},qe={class:"flex justify-end gap-3 pt-4"},Be=["disabled"],Le={class:"p-6"},Pe={class:"flex items-center mb-4"},$e={class:"text-gray-600 dark:text-gray-300 mb-6"},ze={class:"flex justify-end gap-3"},Ie=["disabled"],et={__name:"Forums",setup(Re){const d=Z(),h=v(!1),M=v(!1),m=v(null),w=v(null),x=v({station_id:"",status:"",page:1}),l=v({title:"",body:"",station_id:"",status:!0}),c=C(()=>d.getters.forums),g=C(()=>d.getters.loading),T=C(()=>d.getters.stations||[]),I=C(()=>{var t;if(!((t=c.value)!=null&&t.last_page))return[];const s=[];for(let u=1;u<=c.value.last_page;u++)s.push(u);return s}),R=s=>{const t=T.value.find(u=>u.id===s);return t?t.name:"Unknown Station"},J=async()=>{let s={per_page:100},t=1;try{await d.dispatch("fetch_stations",{data:s,page:t})}catch(u){console.error("Failed to fetch stations:",u),d.dispatch("template_play_error_file","Failed to load stations")}},b=async()=>{await d.dispatch("fetchForums",x.value)},X=s=>new Date(s).toLocaleDateString(),G=()=>{m.value=null,l.value={title:"",body:"",station_id:"",status:!0},h.value=!0},H=s=>{m.value=s,l.value={title:s.title,body:s.body,station_id:s.station_id,status:s.status},h.value=!0},_=()=>{h.value=!1,m.value=null},D=()=>{M.value=!1,w.value=null},K=async()=>{try{m.value?await d.dispatch("updateForum",{id:m.value.id,data:l.value}):await d.dispatch("createForum",l.value),await z(),_(),await b()}catch(s){console.error("Error submitting form:",s)}},O=async s=>{try{await d.dispatch("updateForum",{id:s.id,data:{...s,status:!s.status}}),await b()}catch(t){console.error("Error toggling status:",t)}},Q=s=>{w.value=s,M.value=!0},W=async()=>{try{await d.dispatch("deleteForum",w.value.id),await z(),D(),await b()}catch(s){console.error("Error deleting forum:",s)}},Y=async s=>{x.value.page=s,await b()};return ee(()=>{b(),J()}),(s,t)=>{var q,B,L;const u=te("router-link");return o(),r("div",ge,[e("div",pe,[t[9]||(t[9]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Forums Management",-1)),e("button",{onClick:G,class:"bg-gradient-to-r from-purple-600 to-orange-500 hover:from-purple-700 hover:to-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center"},[p(i(oe),{class:"w-5 h-5 mr-2"}),t[8]||(t[8]=V(" Create Forum ",-1))])]),e("div",me,[f(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>x.value.station_id=a),onChange:b,class:"px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500"},[t[10]||(t[10]=e("option",{value:""},"All Stations",-1)),(o(!0),r(F,null,S(T.value,a=>(o(),r("option",{key:a.id,value:a.id},n(a.name),9,be))),128))],544),[[E,x.value.station_id]]),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>x.value.status=a),onChange:b,class:"px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500"},t[11]||(t[11]=[e("option",{value:""},"All Status",-1),e("option",{value:"1"},"Active",-1),e("option",{value:"0"},"Inactive",-1)]),544),[[E,x.value.status]])]),g.value==="fetchForums"?(o(),r("div",xe,[p(i(N),{class:"w-8 h-8 animate-spin text-purple-600"})])):(B=(q=c.value)==null?void 0:q.data)!=null&&B.length?(o(),r("div",ve,[(o(!0),r(F,null,S(c.value.data,a=>(o(),r("div",{key:a.id,class:"bg-gray-50 dark:bg-slate-700 rounded-lg p-4 border border-gray-200 dark:border-slate-600"},[e("div",ye,[e("div",fe,[p(u,{to:{name:"ForumDetails",params:{id:a.id}},class:"flex items-center gap-3 mb-2"},{default:ae(()=>[e("h3",ke,n(a.title),1),e("span",{class:U([a.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300","px-2 py-1 rounded-full text-xs font-medium"])},n(a.status?"Active":"Inactive"),3),e("span",he,n(R(a.station_id)),1)]),_:2},1032,["to"]),e("p",we,n(a.body),1),e("div",_e,[e("span",null,"Created: "+n(X(a.created_at)),1),e("span",null,"Comments: "+n(a.comments_count||0),1)])]),e("div",Ce,[e("button",{onClick:j=>O(a),disabled:g.value==="updateForum",class:U(["p-2 rounded-lg transition-colors",a.status?"text-green-600 hover:bg-green-100 dark:hover:bg-green-900":"text-red-600 hover:bg-red-100 dark:hover:bg-red-900"])},[a.status?(o(),y(i(le),{key:1,class:"w-5 h-5"})):(o(),y(i(re),{key:0,class:"w-5 h-5"}))],10,Fe),e("button",{onClick:j=>H(a),class:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900 rounded-lg transition-colors"},[p(i(ne),{class:"w-5 h-5"})],8,Se),e("button",{onClick:j=>Q(a),class:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors"},[p(i(ie),{class:"w-5 h-5"})],8,Me)])])]))),128)),c.value.total>c.value.per_page?(o(),r("div",Te,[e("nav",De,[(o(!0),r(F,null,S(I.value,a=>(o(),r("button",{key:a,onClick:j=>Y(a),disabled:a===c.value.current_page,class:U(["px-3 py-2 rounded-lg text-sm font-medium transition-colors",a===c.value.current_page?"bg-purple-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600"])},n(a),11,je))),128))])])):k("",!0)])):(o(),r("div",Ve,[p(i(de),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t[12]||(t[12]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"No forums found",-1)),t[13]||(t[13]=e("p",{class:"text-gray-600 dark:text-gray-400"},"Create your first forum to get started",-1))])),(o(),y($,{to:"body"},[h.value?(o(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:_},[e("div",{onClick:t[6]||(t[6]=A(()=>{},["stop"])),class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4"},[e("div",Ee,[e("h3",Ue,n(m.value?"Edit Forum":"Create Forum"),1),e("button",{onClick:_,class:"text-gray-400 hover:text-gray-600"},[p(i(ue),{class:"w-6 h-6"})])]),e("form",{onSubmit:A(K,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Radio Station ",-1)),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>l.value.station_id=a),required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500"},[t[14]||(t[14]=e("option",{value:""},"Select Station",-1)),(o(!0),r(F,null,S(T.value,a=>(o(),r("option",{key:a.id,value:a.id},n(a.name),9,Ae))),128))],512),[[E,l.value.station_id]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Title ",-1)),f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.title=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter forum title"},null,512),[[P,l.value.title]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Description ",-1)),f(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>l.value.body=a),required:"",rows:"4",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter forum description"},null,512),[[P,l.value.body]])]),e("div",null,[e("label",Ne,[f(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>l.value.status=a),type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"},null,512),[[se,l.value.status]]),t[18]||(t[18]=e("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Active",-1))])]),e("div",qe,[e("button",{type:"button",onClick:_,class:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors"}," Cancel "),e("button",{type:"submit",disabled:g.value==="createForum"||g.value==="updateForum",class:"bg-gradient-to-r from-purple-600 to-orange-500 hover:from-purple-700 hover:to-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center"},[g.value==="createForum"||g.value==="updateForum"?(o(),y(i(N),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):k("",!0),V(" "+n(m.value?"Update":"Create"),1)],8,Be)])],32)])])):k("",!0)])),(o(),y($,{to:"body"},[M.value?(o(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:D},[e("div",{onClick:t[7]||(t[7]=A(()=>{},["stop"])),class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4"},[e("div",Le,[e("div",Pe,[p(i(ce),{class:"w-6 h-6 text-red-600 mr-3"}),t[19]||(t[19]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Delete Forum",-1))]),e("p",$e,' Are you sure you want to delete "'+n((L=w.value)==null?void 0:L.title)+'"? This action cannot be undone. ',1),e("div",ze,[e("button",{onClick:D,class:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors"}," Cancel "),e("button",{onClick:W,disabled:g.value==="deleteForum",class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center"},[g.value==="deleteForum"?(o(),y(i(N),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):k("",!0),t[20]||(t[20]=V(" Delete ",-1))],8,Ie)])])])])):k("",!0)]))])}}};export{et as default};
//# sourceMappingURL=Forums-amybFZnj.js.map
