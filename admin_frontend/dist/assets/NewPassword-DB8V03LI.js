import{u as Y,e as G,A as H,f as M,g as i,i as u,h as X,c as x,o as a,b as e,j as y,d as c,k as r,t as P,y as Z,l as V,q as j,s as o,D as J,n as d,p as B}from"./index-BWGkG0aY.js";import{L as C}from"./lock-HaFXTH0L.js";import{C as p}from"./circle-check-big-DJ5t9rWt.js";import{C as K}from"./circle-alert-CxP-Nb1b.js";import{E}from"./eye-DlwgJV9O.js";import{E as O}from"./eye-off-LiIinSEb.js";import{X as g}from"./x-DmLi2BiI.js";import{L as Q}from"./loader-BTf-1TJ0.js";import{c as ee}from"./createLucideIcon-BKmgJvTr.js";import{I as te}from"./info-DkVgarmk.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=ee("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),re={class:"max-w-md w-full space-y-6 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm p-10 rounded-xl shadow-2xl border border-purple-200 dark:border-slate-700"},ae={class:"text-center"},oe={class:"mx-auto w-12 h-12 bg-gradient-to-r from-purple-600 to-orange-500 rounded-full flex items-center justify-center mb-4"},le={key:0,class:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4"},ne={class:"flex items-start"},de={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},ie={class:"flex items-center"},ue={class:"text-sm text-red-700 dark:text-red-400"},ce={class:"relative"},pe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},xe=["type"],ge={class:"mt-3"},me={class:"flex items-center space-x-2 mb-2"},we={class:"flex-1 bg-gray-200 dark:bg-slate-600 rounded-full h-2"},fe={class:"space-y-1"},he={class:"flex items-center space-x-2 text-xs"},ye={class:"flex items-center space-x-2 text-xs"},be={class:"flex items-center space-x-2 text-xs"},ve={class:"flex items-center space-x-2 text-xs"},ke={class:"flex items-center space-x-2 text-xs"},_e={class:"relative"},Pe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ce=["type"],Se={key:0,class:"mt-2"},Le={class:"flex items-center space-x-2 text-xs"},Ne=["disabled"],Ue={key:3,class:"space-y-4"},qe={class:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},Me={class:"flex"},Fe={__name:"NewPassword",setup(Ve){const L=Y(),N=G(),S=H(),n=M({password:"",confirmPassword:""}),b=i(!1),v=i(!1),m=i(!1),k=i(!1),w=i(""),I=i(S.query.token||""),U=i(S.query.email||""),A=i(S.query.admin_id||""),l=M({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1}),f=u(()=>n.password&&n.confirmPassword&&n.password===n.confirmPassword),_=u(()=>Object.values(l).filter(Boolean).length),D=u(()=>`${_.value/5*100}%`),T=u(()=>{const t=_.value;return t<=1?"bg-red-500":t<=2?"bg-orange-500":t<=3?"bg-yellow-500":t<=4?"bg-blue-500":"bg-green-500"}),$=u(()=>{const t=_.value;return t<=1?"Weak":t<=2?"Fair":t<=3?"Good":t<=4?"Strong":"Excellent"}),z=u(()=>{const t=_.value;return t<=1?"text-red-600 dark:text-red-400":t<=2?"text-orange-600 dark:text-orange-400":t<=3?"text-yellow-600 dark:text-yellow-400":t<=4?"text-blue-600 dark:text-blue-400":"text-green-600 dark:text-green-400"}),q=u(()=>Object.values(l).every(Boolean)&&f.value),F=()=>{const t=n.password;l.length=t.length>=8,l.uppercase=/[A-Z]/.test(t),l.lowercase=/[a-z]/.test(t),l.number=/\d/.test(t),l.special=/[!@#$%^&*(),.?":{}|<>]/.test(t)},R=async()=>{if(!q.value){w.value="Please ensure all password requirements are met and passwords match.";return}try{m.value=!0,w.value="";const t={email:U.value,password:n.password,admin_id:A.value};await L.dispatch("resetAdminPassword",t),k.value=!0}catch(t){console.error("Update password error:",t),w.value=L.getters.error||t.message||"Failed to update password. Please try again."}finally{m.value=!1}},W=()=>{N.push({name:"Login"})};return X(()=>{(!I.value||!U.value)&&N.push({name:"ResetPassword"})}),(t,s)=>(a(),x("div",re,[e("div",ae,[e("div",oe,[c(r(C),{class:"w-6 h-6 text-white"})]),s[4]||(s[4]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Set New Password",-1)),s[5]||(s[5]=e("p",{class:"text-gray-600 dark:text-gray-300 mt-1 max-w-sm mx-auto"}," Create a strong password for your account. Make sure it's at least 8 characters long. ",-1))]),k.value?(a(),x("div",le,[e("div",ne,[c(r(p),{class:"h-5 w-5 text-green-500 mr-3 flex-shrink-0 mt-0.5"}),s[6]||(s[6]=e("div",null,[e("h4",{class:"font-medium text-green-900 dark:text-green-200 mb-1"},"Password updated successfully!"),e("p",{class:"text-sm text-green-700 dark:text-green-300"}," Your password has been changed. You can now sign in with your new password. ")],-1))])])):y("",!0),w.value?(a(),x("div",de,[e("div",ie,[c(r(K),{class:"h-5 w-5 text-red-500 mr-2"}),e("span",ue,P(w.value),1)])])):y("",!0),k.value?y("",!0):(a(),x("form",{key:2,class:"space-y-5",onSubmit:Z(R,["prevent"])},[e("div",null,[s[7]||(s[7]=e("label",{for:"password",class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"}," New Password ",-1)),e("div",ce,[e("div",pe,[c(r(C),{class:"h-5 w-5 text-purple-400 dark:text-purple-300"})]),V(e("input",{id:"password",name:"password",type:b.value?"text":"password",autocomplete:"new-password",required:"","onUpdate:modelValue":s[0]||(s[0]=h=>n.password=h),onInput:F,class:"block w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-slate-600 rounded-lg shadow-sm placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your new password"},null,40,xe),[[j,n.password]]),e("button",{type:"button",onClick:s[1]||(s[1]=h=>b.value=!b.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-purple-400 dark:text-purple-300 hover:text-purple-600 dark:hover:text-purple-100 transition-colors"},[b.value?(a(),o(r(O),{key:1,class:"h-5 w-5"})):(a(),o(r(E),{key:0,class:"h-5 w-5"}))])]),e("div",ge,[e("div",me,[e("div",we,[e("div",{class:d(["h-2 rounded-full transition-all duration-300",T.value]),style:J({width:D.value})},null,6)]),e("span",{class:d(["text-xs font-medium",z.value])},P($.value),3)]),e("div",fe,[e("div",he,[l.length?(a(),o(r(p),{key:0,class:"w-3 h-3 text-green-500"})):(a(),o(r(g),{key:1,class:"w-3 h-3 text-gray-400"})),e("span",{class:d(l.length?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400")}," At least 8 characters ",2)]),e("div",ye,[l.uppercase?(a(),o(r(p),{key:0,class:"w-3 h-3 text-green-500"})):(a(),o(r(g),{key:1,class:"w-3 h-3 text-gray-400"})),e("span",{class:d(l.uppercase?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400")}," One uppercase letter ",2)]),e("div",be,[l.lowercase?(a(),o(r(p),{key:0,class:"w-3 h-3 text-green-500"})):(a(),o(r(g),{key:1,class:"w-3 h-3 text-gray-400"})),e("span",{class:d(l.lowercase?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400")}," One lowercase letter ",2)]),e("div",ve,[l.number?(a(),o(r(p),{key:0,class:"w-3 h-3 text-green-500"})):(a(),o(r(g),{key:1,class:"w-3 h-3 text-gray-400"})),e("span",{class:d(l.number?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400")}," One number ",2)]),e("div",ke,[l.special?(a(),o(r(p),{key:0,class:"w-3 h-3 text-green-500"})):(a(),o(r(g),{key:1,class:"w-3 h-3 text-gray-400"})),e("span",{class:d(l.special?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400")}," One special character (!@#$%^&*) ",2)])])])]),e("div",null,[s[8]||(s[8]=e("label",{for:"confirmPassword",class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"}," Confirm New Password ",-1)),e("div",_e,[e("div",Pe,[c(r(C),{class:"h-5 w-5 text-purple-400 dark:text-purple-300"})]),V(e("input",{id:"confirmPassword",name:"confirmPassword",type:v.value?"text":"password",autocomplete:"new-password",required:"","onUpdate:modelValue":s[2]||(s[2]=h=>n.confirmPassword=h),class:d(["block w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-slate-600 rounded-lg shadow-sm placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":n.confirmPassword&&!f.value}]),placeholder:"Confirm your new password"},null,10,Ce),[[j,n.confirmPassword]]),e("button",{type:"button",onClick:s[3]||(s[3]=h=>v.value=!v.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-purple-400 dark:text-purple-300 hover:text-purple-600 dark:hover:text-purple-100 transition-colors"},[v.value?(a(),o(r(O),{key:1,class:"h-5 w-5"})):(a(),o(r(E),{key:0,class:"h-5 w-5"}))])]),n.confirmPassword?(a(),x("div",Se,[e("div",Le,[f.value?(a(),o(r(p),{key:0,class:"w-3 h-3 text-green-500"})):(a(),o(r(g),{key:1,class:"w-3 h-3 text-red-500"})),e("span",{class:d(f.value?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},P(f.value?"Passwords match":"Passwords do not match"),3)])])):y("",!0)]),e("button",{type:"submit",disabled:m.value||!q.value,class:"relative w-full flex justify-center items-center py-3 px-4 border border-transparent text-sm font-semibold rounded-lg text-white bg-gradient-to-r from-purple-600 to-orange-500 hover:from-purple-700 hover:to-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"},[m.value?(a(),o(r(Q),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):(a(),o(r(C),{key:1,class:"w-5 h-5 mr-2"})),B(" "+P(m.value?"Updating password...":"Update Password"),1)],8,Ne)],32)),k.value?(a(),x("div",Ue,[e("button",{onClick:W,class:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"},[c(r(se),{class:"w-5 h-5 mr-2"}),s[9]||(s[9]=e("span",null,"Continue to Sign In",-1))])])):y("",!0),e("div",qe,[e("div",Me,[c(r(te),{class:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s[10]||(s[10]=e("div",{class:"ml-3"},[e("h4",{class:"text-sm font-medium text-blue-900 dark:text-blue-200 mb-1"},"Security Tips"),e("ul",{class:"text-xs text-blue-700 dark:text-blue-300 space-y-1"},[e("li",null,"• Use a unique password you haven't used before"),e("li",null,"• Consider using a password manager"),e("li",null,"• Don't share your password with anyone"),e("li",null,"• Update your password regularly")])],-1))])]),s[11]||(s[11]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},[B(" Need help? "),e("a",{href:"mailto:support@capitalradio.co.ug",class:"text-purple-600 hover:text-purple-500 dark:text-purple-400 dark:hover:text-purple-300 transition-colors font-medium"}," Contact support ")])],-1))]))}};export{Fe as default};
//# sourceMappingURL=NewPassword-DB8V03LI.js.map
