import{u as te,g as b,i as S,h as le,c as o,o as r,b as e,j as m,d as g,p as T,k as n,l as v,I as L,F as U,C as j,t as d,n as N,s as M,y as P,v as D,x as se}from"./index-D-vGU9A5.js";import{P as re}from"./plus-BwJuEt95.js";import{L as F}from"./loader-DTA6emVv.js";import{I as ae}from"./image-CIwXHJCX.js";import{E as oe}from"./external-link-2PEmZZwX.js";import{T as ne,a as ie}from"./toggle-right-DPVrsQMG.js";import{S as de}from"./square-pen-ChLrttMM.js";import{T as ue}from"./trash-X99Ww17h.js";import{c as ge}from"./createLucideIcon-ZxHZ6e7O.js";import{X as B}from"./x-DW3uA99b.js";import{T as ce}from"./triangle-alert-Bvvoy1EB.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=ge("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),be={class:""},me={class:"flex justify-between items-center mb-6"},ve={class:"mb-6 flex flex-wrap gap-4"},xe=["value"],fe={key:0,class:"flex justify-center py-8"},ye={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ke={class:"relative h-48 bg-gray-200 dark:bg-slate-600"},he=["src","alt"],_e={key:1,class:"flex items-center justify-center h-full"},we={class:"absolute top-2 right-2"},Ce={class:"p-4"},Ae={class:"flex items-center gap-2 mb-2"},Se={class:"font-semibold text-gray-900 dark:text-white truncate"},Te={class:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap"},Ue={class:"text-gray-600 dark:text-gray-300 text-sm mb-3 line-clamp-2"},je={key:0,class:"mb-3"},Me={class:"bg-purple-600 text-white px-3 py-1 rounded text-xs cursor-default"},De={key:1,class:"mb-3"},Ve=["href"],Ie={class:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400 mb-3"},Ee={class:"flex justify-between items-center"},Le=["onClick","disabled"],Ne={class:"flex gap-1"},Pe=["onClick"],Fe=["onClick"],$e={key:0,class:"col-span-full flex justify-center mt-6"},qe={class:"flex items-center gap-2"},Be=["onClick","disabled"],Re={key:2,class:"text-center py-12"},ze={class:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-slate-600 flex-shrink-0"},Xe={class:"text-lg font-semibold text-gray-900 dark:text-white"},Ge={class:"flex-1 overflow-y-auto"},He=["value"],Je={class:"grid grid-cols-2 gap-2"},Ke={class:"space-y-3"},Oe={key:0,class:"relative w-full h-48 bg-gray-100 dark:bg-slate-600 rounded-lg overflow-hidden"},Qe=["src"],We={class:"flex items-center"},Ye={class:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-slate-600 flex-shrink-0"},Ze=["disabled"],et={class:"p-6"},tt={class:"flex items-center mb-4"},lt={class:"text-gray-600 dark:text-gray-300 mb-6"},st={class:"flex justify-end gap-3"},rt=["disabled"],xt={__name:"Adverts",setup(at){const u=te(),_=b(!1),h=b(!1),x=b(null),w=b(null),f=b(null),V=b(null),k=b({station_id:"",status:"",page:1}),a=b({title:"",description:"",target_url:"",button_title:"",station_id:"",status:!0,image:null,image_url:""}),c=S(()=>u.getters.adverts),p=S(()=>u.getters.loading),I=S(()=>u.getters.stations||[]),R=S(()=>{var t;if(!((t=c.value)!=null&&t.last_page))return[];const s=[];for(let i=1;i<=c.value.last_page;i++)s.push(i);return s}),z=async()=>{let s={per_page:100},t=1;try{await u.dispatch("fetch_stations",{data:s,page:t})}catch(i){console.error("Failed to fetch stations:",i),u.dispatch("template_play_error_file","Failed to load stations")}},y=async()=>{await u.dispatch("fetchAdverts",k.value)},X=s=>{const t=I.value.find(i=>i.id==s);return t?t.name:"Unknown"},G=s=>new Date(s).toLocaleDateString(),H=s=>s.length>30?s.substring(0,30)+"...":s,J=()=>{x.value=null,f.value=null,a.value={title:"",description:"",target_url:"",button_title:"",station_id:"",status:!0,image:null,image_url:""},_.value=!0},K=s=>{x.value=s,f.value=null,a.value={title:s.title,description:s.description,target_url:s.target_url,button_title:s.button_title,station_id:s.station_id,status:s.status,image:null,image_url:s.image_url},_.value=!0},C=()=>{_.value=!1,x.value=null,f.value=null},O=s=>{const t=s.target.files[0];if(t){a.value.image=t;const i=new FileReader;i.onload=A=>{f.value=A.target.result},i.readAsDataURL(t)}},Q=()=>{a.value.image=null,a.value.image_url="",f.value=null,V.value&&(V.value.value="")},$=async()=>{try{x.value?await u.dispatch("updateAdvert",{id:x.value.id,data:a.value}):await u.dispatch("createAdvert",a.value),C(),await y()}catch(s){console.error("Error submitting form:",s)}},W=async s=>{try{await u.dispatch("updateAdvert",{id:s.id,data:{...s,status:!s.status}}),await y()}catch(t){console.error("Error toggling status:",t)}},Y=s=>{w.value=s,h.value=!0},Z=async()=>{try{await u.dispatch("deleteAdvert",w.value.id),h.value=!1,w.value=null,await y()}catch(s){console.error("Error deleting advert:",s)}},ee=async s=>{k.value.page=s,await y()};return le(()=>{y(),z()}),(s,t)=>{var i,A,q;return r(),o("div",be,[e("div",me,[t[13]||(t[13]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Adverts Management",-1)),e("button",{onClick:J,class:"bg-gradient-to-r from-purple-600 to-orange-500 hover:from-purple-700 hover:to-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center"},[g(n(re),{class:"w-5 h-5 mr-2"}),t[12]||(t[12]=T(" Create Advert "))])]),e("div",ve,[v(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>k.value.station_id=l),onChange:y,class:"px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500"},[t[14]||(t[14]=e("option",{value:""},"All Stations",-1)),(r(!0),o(U,null,j(I.value,l=>(r(),o("option",{key:l.id,value:l.id},d(l.name),9,xe))),128))],544),[[L,k.value.station_id]]),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>k.value.status=l),onChange:y,class:"px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500"},t[15]||(t[15]=[e("option",{value:""},"All Status",-1),e("option",{value:"1"},"Active",-1),e("option",{value:"0"},"Inactive",-1)]),544),[[L,k.value.status]])]),p.value==="fetchAdverts"?(r(),o("div",fe,[g(n(F),{class:"w-8 h-8 animate-spin text-purple-600"})])):(A=(i=c.value)==null?void 0:i.data)!=null&&A.length?(r(),o("div",ye,[(r(!0),o(U,null,j(c.value.data,l=>(r(),o("div",{key:l.id,class:"bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600 overflow-hidden"},[e("div",ke,[l.image_url?(r(),o("img",{key:0,src:l.image_url,alt:l.title,class:"w-full h-full object-cover"},null,8,he)):(r(),o("div",_e,[g(n(ae),{class:"w-12 h-12 text-gray-400"})])),e("div",we,[e("span",{class:N([l.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300","px-2 py-1 rounded-full text-xs font-medium"])},d(l.status?"Active":"Inactive"),3)])]),e("div",Ce,[e("div",Ae,[e("h3",Se,d(l.title),1),e("span",Te,d(X(l.station_id)),1)]),e("p",Ue,d(l.description),1),l.button_title?(r(),o("div",je,[e("button",Me,d(l.button_title),1)])):m("",!0),l.target_url?(r(),o("div",De,[e("a",{href:l.target_url,target:"_blank",class:"text-purple-600 hover:text-purple-800 text-xs flex items-center"},[g(n(oe),{class:"w-3 h-3 mr-1"}),T(" "+d(H(l.target_url)),1)],8,Ve)])):m("",!0),e("div",Ie,[e("span",null,"Created: "+d(G(l.created_at)),1)]),e("div",Ee,[e("button",{onClick:E=>W(l),disabled:p.value==="updateAdvert",class:N(["p-1 rounded transition-colors",l.status?"text-green-600 hover:bg-green-100 dark:hover:bg-green-900":"text-red-600 hover:bg-red-100 dark:hover:bg-red-900"])},[l.status?(r(),M(n(ie),{key:1,class:"w-4 h-4"})):(r(),M(n(ne),{key:0,class:"w-4 h-4"}))],10,Le),e("div",Ne,[e("button",{onClick:E=>K(l),class:"p-1 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900 rounded transition-colors"},[g(n(de),{class:"w-4 h-4"})],8,Pe),e("button",{onClick:E=>Y(l),class:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded transition-colors"},[g(n(ue),{class:"w-4 h-4"})],8,Fe)])])])]))),128)),c.value.total>c.value.per_page?(r(),o("div",$e,[e("nav",qe,[(r(!0),o(U,null,j(R.value,l=>(r(),o("button",{key:l,onClick:E=>ee(l),disabled:l===c.value.current_page,class:N(["px-3 py-2 rounded-lg text-sm font-medium transition-colors",l===c.value.current_page?"bg-purple-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600"])},d(l),11,Be))),128))])])):m("",!0)])):(r(),o("div",Re,[g(n(pe),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"No adverts found",-1)),t[17]||(t[17]=e("p",{class:"text-gray-600 dark:text-gray-400"},"Create your first advert to get started",-1))])),_.value?(r(),o("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:C},[e("div",{onClick:t[8]||(t[8]=P(()=>{},["stop"])),class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] flex flex-col"},[e("div",ze,[e("h3",Xe,d(x.value?"Edit Advert":"Create Advert"),1),e("button",{onClick:C,class:"text-gray-400 hover:text-gray-600"},[g(n(B),{class:"w-6 h-6"})])]),e("div",Ge,[e("form",{onSubmit:P($,["prevent"]),class:"p-6 space-y-6"},[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Radio Station ",-1)),v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.station_id=l),required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500"},[t[18]||(t[18]=e("option",{value:""},"Select Station",-1)),(r(!0),o(U,null,j(I.value,l=>(r(),o("option",{key:l.id,value:l.id},d(l.name),9,He))),128))],512),[[L,a.value.station_id]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Title ",-1)),v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.title=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter advert title"},null,512),[[D,a.value.title]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Description ",-1)),v(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>a.value.description=l),required:"",rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter advert description"},null,512),[[D,a.value.description]])]),e("div",Je,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Target URL ",-1)),v(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>a.value.target_url=l),type:"url",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"https://example.com"},null,512),[[D,a.value.target_url]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Button Title ",-1)),v(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>a.value.button_title=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Learn More, Shop Now, etc."},null,512),[[D,a.value.button_title]])])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Image ",-1)),e("div",Ke,[a.value.image_url||f.value?(r(),o("div",Oe,[e("img",{src:f.value||a.value.image_url,alt:"Preview",class:"w-full h-full object-cover"},null,8,Qe),e("button",{type:"button",onClick:Q,class:"absolute top-2 right-2 bg-red-600 text-white p-1 rounded-full hover:bg-red-700"},[g(n(B),{class:"w-4 h-4"})])])):m("",!0),e("input",{ref_key:"fileInput",ref:V,type:"file",accept:"image/*",onChange:O,class:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"},null,544)])]),e("div",null,[e("label",We,[v(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>a.value.status=l),type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"},null,512),[[se,a.value.status]]),t[25]||(t[25]=e("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Active",-1))])])],32)]),e("div",Ye,[e("button",{type:"button",onClick:C,class:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors"}," Cancel "),e("button",{type:"submit",onClick:$,disabled:p.value==="createAdvert"||p.value==="updateAdvert",class:"bg-gradient-to-r from-purple-600 to-orange-500 hover:from-purple-700 hover:to-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center"},[p.value==="createAdvert"||p.value==="updateAdvert"?(r(),M(n(F),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):m("",!0),T(" "+d(x.value?"Update":"Create"),1)],8,Ze)])])])):m("",!0),h.value?(r(),o("div",{key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[11]||(t[11]=l=>h.value=!1)},[e("div",{onClick:t[10]||(t[10]=P(()=>{},["stop"])),class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4"},[e("div",et,[e("div",tt,[g(n(ce),{class:"w-6 h-6 text-red-600 mr-3"}),t[26]||(t[26]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Delete Advert",-1))]),e("p",lt,' Are you sure you want to delete "'+d((q=w.value)==null?void 0:q.title)+'"? This action cannot be undone. ',1),e("div",st,[e("button",{onClick:t[9]||(t[9]=l=>h.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors"}," Cancel "),e("button",{onClick:Z,disabled:p.value==="deleteAdvert",class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center"},[p.value==="deleteAdvert"?(r(),M(n(F),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):m("",!0),t[27]||(t[27]=T(" Delete "))],8,rt)])])])])):m("",!0)])}}};export{xt as default};
//# sourceMappingURL=Adverts-DfhmLCsQ.js.map
