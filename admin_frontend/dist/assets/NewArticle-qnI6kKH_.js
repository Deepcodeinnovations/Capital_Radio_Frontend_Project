import{_ as W,e as Q,A as X,u as Y,i as w,g,w as I,h as Z,r as E,c as n,o as d,b as t,d as h,t as c,m as F,p as j,k as M,y as ee,l as s,v as u,I as R,F as _,C as U,s as te,j as re,x as A}from"./index-BWGkG0aY.js";import{A as ae}from"./arrow-left-D6JRRqYm.js";import{N as oe}from"./newspaper-DV2pef5d.js";import"./createLucideIcon-BKmgJvTr.js";const le={class:"p-6 space-y-6"},se={class:"flex items-center justify-between"},de={class:"text-2xl font-bold text-gray-900 dark:text-white"},ie={class:"text-sm text-gray-600 dark:text-gray-400"},ne={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},ue={class:"space-y-4"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},me={class:"md:col-span-2"},be=["value"],ce=["value"],ye={class:"space-y-4"},pe={class:"border border-gray-300 dark:border-gray-600 rounded-md overflow-hidden"},fe={class:"space-y-4"},xe={class:"grid grid-cols-1 gap-4"},ve={class:"space-y-4"},ke={class:"flex items-center space-x-6"},we={class:"h-32 w-32 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600"},he=["src"],_e={class:"flex-1"},Ue={class:"flex items-center"},Se={for:"featured-image",class:"cursor-pointer bg-white dark:bg-gray-700 py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none"},Ce={class:"space-y-4"},Ae={class:"flex items-center"},Ve={for:"gallery-images",class:"cursor-pointer bg-white dark:bg-gray-700 py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none"},Ne={key:0,class:"grid grid-cols-4 gap-4"},Ie=["src"],Ee=["onClick"],Fe=["src"],je=["onClick"],Me={class:"space-y-4"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ge={class:"md:col-span-2"},Be={class:"md:col-span-2 space-y-3"},Te={class:"flex items-center"},Le={class:"flex items-center"},Oe={class:"flex items-center"},Pe={class:"space-y-4"},De={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700"},$e=["disabled"],Je={__name:"NewArticle",setup(qe){const V=Q(),y=X(),i=Y(),p=w(()=>i.getters.loading),G=w(()=>i.getters.categories||[]),B=w(()=>i.getters.stations||[]),m=w(()=>!!y.params.id),r=g({title:"",summary:"",excerpt:"",content:"",meta_title:"",meta_description:"",meta_keywords:"",category_id:"",station_id:"",source:"",source_url:"",priority:0,is_published:!1,is_featured:!1,is_breaking:!1,featured_image_url:"",gallery_images:[]}),S=g(null),f=g([]),C=g(""),x=g([]),b=g(""),T=g({height:300,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],placeholder:"Write your article content here...",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica","Impact","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],callbacks:{onImageUpload:function(o){for(let e=0;e<o.length;e++){const l=o[e],v=new FileReader;v.onload=(function(a){$(this).summernote("insertImage",a.target.result)}).bind(this),v.readAsDataURL(l)}}}}),L=o=>{const e=o.target.files[0];e&&(S.value=e,C.value=URL.createObjectURL(e))},O=o=>{const e=Array.from(o.target.files);f.value=[...f.value,...e],e.forEach(l=>{x.value.push(URL.createObjectURL(l))})},P=o=>{x.value.splice(o,1),f.value.splice(o,1)},D=o=>{r.value.content=o},J=async o=>{if(confirm("Are you sure you want to remove this image?"))try{await i.dispatch("removegalleryimage",{articleId:y.params.id,imageId:o}),await N()}catch(e){console.error("Error removing gallery image:",e)}},N=async()=>{var o,e;if(m.value)try{await i.dispatch("fetcharticle",y.params.id);const l=i.getters.article;l&&(r.value={...l,category_id:((o=l.category)==null?void 0:o.id)||"",station_id:((e=l.station)==null?void 0:e.id)||""},l.tags&&(b.value=l.tags.join(", ")))}catch(l){console.error("Error fetching article:",l),V.push({name:"News"})}},q=async()=>{try{await i.dispatch("fetchcategories")}catch(o){console.error("Error fetching categories:",o)}},z=async()=>{let o={per_page:100},e=1;try{await i.dispatch("fetch_stations",{data:o,page:e})}catch(l){console.error("Failed to fetch stations:",l),i.dispatch("template_play_error_file","Failed to load stations")}},H=async()=>{try{const o=new FormData;if(Object.keys(r.value).forEach(e=>{e!=="gallery_images"&&r.value[e]!==null&&r.value[e]!==""&&(typeof r.value[e]=="boolean"?o.append(e,r.value[e]?"true":"false"):o.append(e,r.value[e]))}),b.value){const e=b.value.split(",").map(l=>l.trim()).filter(l=>l);o.append("tags",JSON.stringify(e))}S.value&&o.append("featured_image",S.value),f.value.forEach((e,l)=>{o.append(`gallery_image_${l}`,e)}),m.value?await i.dispatch("updatearticle",{id:y.params.id,data:o}):await i.dispatch("createarticle",o),V.push({name:"News"})}catch(o){console.error("Error saving article:",o)}};return I(()=>r.value.title,o=>{r.value.meta_title||(r.value.meta_title=o)}),I(()=>r.value.summary,o=>{r.value.meta_description||(r.value.meta_description=o)}),Z(()=>{q(),z(),m.value&&N()}),(o,e)=>{const l=E("router-link"),v=E("SummernoteEditor");return d(),n("div",le,[t("div",se,[t("div",null,[t("h1",de,c(m.value?"Edit News Article":"Add News Article"),1),t("p",ie,c(m.value?"Update your news article":"Create a new news article for your network"),1)]),h(l,{to:{name:"News"},class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 flex items-center"},{default:F(()=>[h(M(ae),{class:"h-4 w-4 mr-1"}),e[16]||(e[16]=j(" Back to News "))]),_:1,__:[16]})]),t("div",ne,[t("form",{onSubmit:ee(H,["prevent"]),class:"space-y-6"},[t("div",ue,[e[22]||(e[22]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Article Information",-1)),t("div",ge,[t("div",me,[e[17]||(e[17]=t("label",{for:"title",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Article Title*",-1)),s(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=a=>r.value.title=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g. New Music Festival Coming This Summer"},null,512),[[u,r.value.title]])]),t("div",null,[e[19]||(e[19]=t("label",{for:"category_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Category",-1)),s(t("select",{id:"category_id","onUpdate:modelValue":e[1]||(e[1]=a=>r.value.category_id=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"},[e[18]||(e[18]=t("option",{value:""},"Select a category",-1)),(d(!0),n(_,null,U(G.value,a=>(d(),n("option",{key:a.id,value:a.id},c(a.name),9,be))),128))],512),[[R,r.value.category_id]])]),t("div",null,[e[21]||(e[21]=t("label",{for:"station_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Station",-1)),s(t("select",{id:"station_id","onUpdate:modelValue":e[2]||(e[2]=a=>r.value.station_id=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"},[e[20]||(e[20]=t("option",{value:""},"Select a station",-1)),(d(!0),n(_,null,U(B.value,a=>(d(),n("option",{key:a.id,value:a.id},c(a.name),9,ce))),128))],512),[[R,r.value.station_id]])])])]),t("div",ye,[e[27]||(e[27]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Article Content",-1)),t("div",null,[e[23]||(e[23]=t("label",{for:"summary",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Summary",-1)),s(t("textarea",{id:"summary","onUpdate:modelValue":e[3]||(e[3]=a=>r.value.summary=a),rows:"2",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"A brief summary of the article..."},null,512),[[u,r.value.summary]])]),t("div",null,[e[24]||(e[24]=t("label",{for:"excerpt",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Excerpt",-1)),s(t("textarea",{id:"excerpt","onUpdate:modelValue":e[4]||(e[4]=a=>r.value.excerpt=a),rows:"2",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Short excerpt for article previews..."},null,512),[[u,r.value.excerpt]])]),t("div",null,[e[25]||(e[25]=t("label",{for:"content",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Full Content*",-1)),t("div",pe,[h(v,{modelValue:r.value.content,"onUpdate:modelValue":e[5]||(e[5]=a=>r.value.content=a),config:T.value,class:"summernote-editor",onInput:D},null,8,["modelValue","config"])]),e[26]||(e[26]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Use the rich text editor to format your article content",-1))])]),t("div",fe,[e[31]||(e[31]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"SEO Settings",-1)),t("div",xe,[t("div",null,[e[28]||(e[28]=t("label",{for:"meta_title",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Meta Title",-1)),s(t("input",{id:"meta_title","onUpdate:modelValue":e[6]||(e[6]=a=>r.value.meta_title=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"SEO title (defaults to article title)"},null,512),[[u,r.value.meta_title]])]),t("div",null,[e[29]||(e[29]=t("label",{for:"meta_description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Meta Description",-1)),s(t("textarea",{id:"meta_description","onUpdate:modelValue":e[7]||(e[7]=a=>r.value.meta_description=a),rows:"2",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"SEO description (defaults to summary)"},null,512),[[u,r.value.meta_description]])]),t("div",null,[e[30]||(e[30]=t("label",{for:"meta_keywords",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Meta Keywords",-1)),s(t("input",{id:"meta_keywords","onUpdate:modelValue":e[8]||(e[8]=a=>r.value.meta_keywords=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"SEO keywords, comma separated"},null,512),[[u,r.value.meta_keywords]])])])]),t("div",ve,[e[35]||(e[35]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Featured Image",-1)),t("div",ke,[t("div",we,[r.value.featured_image_url||C.value?(d(),n("img",{key:0,src:r.value.featured_image_url||C.value,class:"h-full w-full object-cover rounded-lg",alt:"Featured image"},null,8,he)):(d(),te(M(oe),{key:1,class:"h-12 w-12 text-gray-400"}))]),t("div",_e,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Upload Featured Image",-1)),t("div",Ue,[t("label",Se,[e[32]||(e[32]=t("span",null,"Choose file",-1)),t("input",{id:"featured-image",type:"file",class:"sr-only",accept:"image/*",onChange:L},null,32)]),e[33]||(e[33]=t("p",{class:"ml-3 text-xs text-gray-500 dark:text-gray-400"},"PNG, JPG, GIF up to 2MB (1200x630px recommended)",-1))])])])]),t("div",Ce,[e[39]||(e[39]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Gallery Images",-1)),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Upload Gallery Images",-1)),t("div",Ae,[t("label",Ve,[e[36]||(e[36]=t("span",null,"Choose files",-1)),t("input",{id:"gallery-images",type:"file",class:"sr-only",accept:"image/*",multiple:"",onChange:O},null,32)]),e[37]||(e[37]=t("p",{class:"ml-3 text-xs text-gray-500 dark:text-gray-400"},"Select multiple images for gallery",-1))])]),x.value.length>0||r.value.gallery_images&&r.value.gallery_images.length>0?(d(),n("div",Ne,[(d(!0),n(_,null,U(r.value.gallery_images||[],(a,k)=>(d(),n("div",{key:"existing-"+k,class:"relative"},[t("img",{src:a.url,class:"h-20 w-20 object-cover rounded-lg",alt:"Gallery image"},null,8,Ie),t("button",{type:"button",onClick:K=>J(a.id),class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs hover:bg-red-600"}," × ",8,Ee)]))),128)),(d(!0),n(_,null,U(x.value,(a,k)=>(d(),n("div",{key:"new-"+k,class:"relative"},[t("img",{src:a,class:"h-20 w-20 object-cover rounded-lg",alt:"Gallery preview"},null,8,Fe),t("button",{type:"button",onClick:K=>P(k),class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs hover:bg-red-600"}," × ",8,je)]))),128))])):re("",!0)]),t("div",Me,[e[46]||(e[46]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Publishing Details",-1)),t("div",Re,[t("div",null,[e[40]||(e[40]=t("label",{for:"priority",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Priority",-1)),s(t("input",{id:"priority","onUpdate:modelValue":e[9]||(e[9]=a=>r.value.priority=a),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"0"},null,512),[[u,r.value.priority]])]),t("div",null,[e[41]||(e[41]=t("label",{for:"source",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Source",-1)),s(t("input",{id:"source","onUpdate:modelValue":e[10]||(e[10]=a=>r.value.source=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g. Reuters, BBC, etc."},null,512),[[u,r.value.source]])]),t("div",Ge,[e[42]||(e[42]=t("label",{for:"source_url",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Source URL",-1)),s(t("input",{id:"source_url","onUpdate:modelValue":e[11]||(e[11]=a=>r.value.source_url=a),type:"url",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/original-article"},null,512),[[u,r.value.source_url]])]),t("div",Be,[t("label",Te,[s(t("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>r.value.is_published=a),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[A,r.value.is_published]]),e[43]||(e[43]=t("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Publish this article",-1))]),t("label",Le,[s(t("input",{"onUpdate:modelValue":e[13]||(e[13]=a=>r.value.is_featured=a),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[A,r.value.is_featured]]),e[44]||(e[44]=t("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Feature this article on homepage",-1))]),t("label",Oe,[s(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>r.value.is_breaking=a),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[A,r.value.is_breaking]]),e[45]||(e[45]=t("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Mark as breaking news",-1))])])])]),t("div",Pe,[e[48]||(e[48]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Tags",-1)),t("div",null,[e[47]||(e[47]=t("label",{for:"tags",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Article Tags",-1)),s(t("input",{id:"tags","onUpdate:modelValue":e[15]||(e[15]=a=>b.value=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g. music, festival, summer (comma separated)"},null,512),[[u,b.value]])])]),t("div",De,[h(l,{to:"/dashboard/news",class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:F(()=>e[49]||(e[49]=[j(" Cancel ")])),_:1,__:[49]}),t("button",{type:"submit",disabled:p.value==="createarticle"||p.value==="updatearticle",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-purple-500 hover:from-blue-700 hover:to-purple-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},c(p.value==="createarticle"||p.value==="updatearticle"?"Saving...":m.value?"Update Article":"Save Article"),9,$e)])],32)])])}}},Qe=W(Je,[["__scopeId","data-v-a12fa868"]]);export{Qe as default};
//# sourceMappingURL=NewArticle-qnI6kKH_.js.map
