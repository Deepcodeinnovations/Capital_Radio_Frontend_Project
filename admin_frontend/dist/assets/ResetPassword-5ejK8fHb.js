import{u as A,e as I,f as j,g as p,z as M,r as B,c as l,o as r,b as e,j as v,a as L,d as n,k as s,p as g,t as y,y as N,l as T,v as F,n as z,s as b,m as D}from"./index-tkd981dw.js";import{c as q}from"./createLucideIcon-CUtFUaqZ.js";import{C as U}from"./circle-check-big-D1WeLWIS.js";import{C as K}from"./circle-alert-Dw52es-j.js";import{M as O}from"./mail-DQC1Wxzo.js";import{L as k}from"./loader-BKhz6Mud.js";import{S as W}from"./send-Del25l1p.js";import{R as G}from"./rotate-ccw-CKpAMCEd.js";import{A as H}from"./arrow-left-CLtrC5US.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=q("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),J={class:"max-w-md w-full space-y-6 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm p-10 rounded-xl shadow-2xl border border-purple-200 dark:border-slate-700"},Q={class:"text-center"},X={class:"mx-auto w-12 h-12 bg-gradient-to-r from-purple-600 to-orange-500 rounded-full flex items-center justify-center mb-4"},Y={key:0,class:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4"},Z={class:"flex items-start"},$={class:"text-sm text-green-700 dark:text-green-300"},ee={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},te={class:"flex items-center"},re={class:"text-sm text-red-700 dark:text-red-400"},se={class:"relative"},ae={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},oe=["disabled"],le={key:3,class:"space-y-4"},ne=["disabled"],de={key:2},ie={key:3},ue={key:4},me={class:"text-center"},we={__name:"ResetPassword",setup(ce){const x=A(),w=I(),o=j({email:""}),f=p(!1),u=p(!1),m=p(!1),a=p(""),d=p(0);let c=null;const _=()=>{a.value&&(a.value="")},C=async()=>{try{if(u.value=!0,a.value="",!o.email.includes("@"))throw new Error("Please enter a valid email address");await x.dispatch("forgotAdminPassword",o.email.trim()),f.value=!0}catch(i){console.error("Forgot password error:",i),a.value=x.getters.error||i.message||"Failed to send reset code. Please try again."}finally{u.value=!1}},R=async()=>{try{m.value=!0,a.value="",await x.dispatch("forgotAdminPassword",o.email.trim()),S()}catch(i){console.error("Resend error:",i),a.value=x.getters.error||i.message||"Failed to resend email. Please try again."}finally{m.value=!1}},P=()=>{w.push({name:"VerifyOTP",query:{email:o.email.trim()}})},S=()=>{d.value=60,c=setInterval(()=>{d.value--,d.value<=0&&(clearInterval(c),c=null)},1e3)};return M(()=>{c&&clearInterval(c)}),(i,t)=>{const V=B("router-link");return r(),l("div",J,[e("div",Q,[e("div",X,[n(s(h),{class:"w-6 h-6 text-white"})]),t[1]||(t[1]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Forgot Password?",-1)),t[2]||(t[2]=e("p",{class:"text-gray-600 dark:text-gray-300 mt-1 max-w-sm mx-auto"}," Enter your admin email address and we'll send you a verification code to reset your password. ",-1))]),f.value?(r(),l("div",Y,[e("div",Z,[n(s(U),{class:"h-5 w-5 text-green-500 mr-3 flex-shrink-0 mt-0.5"}),e("div",null,[t[5]||(t[5]=e("h4",{class:"font-medium text-green-900 dark:text-green-200 mb-1"},"Reset code sent!",-1)),e("p",$,[t[3]||(t[3]=g(" We've sent a password reset code to ",-1)),e("strong",null,y(o.email),1),t[4]||(t[4]=g(". Please check your email and enter the code on the next page. ",-1))])])])])):v("",!0),a.value?(r(),l("div",ee,[e("div",te,[n(s(K),{class:"h-5 w-5 text-red-500 mr-2"}),e("span",re,y(a.value),1)])])):v("",!0),f.value?v("",!0):(r(),l("form",{key:2,class:"space-y-6",onSubmit:N(C,["prevent"])},[e("div",null,[t[6]||(t[6]=e("label",{for:"email",class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"}," Admin Email Address ",-1)),e("div",se,[e("div",ae,[n(s(O),{class:"h-5 w-5 text-purple-400 dark:text-purple-300"})]),T(e("input",{id:"email",name:"email",type:"email",autocomplete:"email",required:"","onUpdate:modelValue":t[0]||(t[0]=E=>o.email=E),onInput:_,class:z(["block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-slate-600 rounded-lg shadow-sm placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",{"border-red-300 focus:ring-red-500":a.value}]),placeholder:"Enter your admin email address"},null,34),[[F,o.email]])]),t[7]||(t[7]=e("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," Enter the email address associated with your admin account ",-1))]),e("button",{type:"submit",disabled:u.value||!o.email.trim(),class:"relative w-full flex justify-center items-center py-3 px-4 border border-transparent text-sm font-semibold rounded-lg text-white bg-gradient-to-r from-purple-600 to-orange-500 hover:from-purple-700 hover:to-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"},[u.value?(r(),b(s(k),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):(r(),b(s(W),{key:1,class:"w-5 h-5 mr-2"})),g(" "+y(u.value?"Sending...":"Send Reset Code"),1)],8,oe)],32)),f.value?(r(),l("div",le,[e("button",{onClick:R,disabled:m.value||d.value>0,class:"w-full bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-600 disabled:bg-gray-100 dark:disabled:bg-slate-800 text-gray-700 dark:text-gray-300 disabled:text-gray-400 dark:disabled:text-gray-500 font-medium py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center disabled:cursor-not-allowed"},[m.value?(r(),b(s(k),{key:0,class:"animate-spin h-5 w-5 mr-2"})):(r(),b(s(G),{key:1,class:"w-5 h-5 mr-2"})),d.value>0?(r(),l("span",de," Resend in "+y(d.value)+"s ",1)):m.value?(r(),l("span",ie," Sending... ")):(r(),l("span",ue," Resend email "))],8,ne),e("button",{onClick:P,class:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"},[n(s(h),{class:"w-5 h-5 mr-2"}),t[8]||(t[8]=e("span",null,"Enter Verification Code",-1))]),t[9]||(t[9]=e("div",{class:"text-center"},[e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},"Didn't receive the email?"),e("ul",{class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},[e("li",null,"• Check your spam or junk folder"),e("li",null,"• Make sure you entered the correct email address"),e("li",null,"• Contact IT support if you continue having issues")])],-1))])):v("",!0),t[11]||(t[11]=L('<div class="mt-8 mb-6"><div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-200 dark:border-slate-600"></div></div><div class="relative flex justify-center text-sm"><span class="px-4 bg-white dark:bg-slate-800 text-gray-500 dark:text-gray-400">Remember your password?</span></div></div></div>',1)),e("div",me,[n(V,{to:{name:"Login"},class:"inline-flex items-center text-purple-600 hover:text-purple-500 dark:text-purple-400 dark:hover:text-purple-300 transition-colors font-medium text-sm"},{default:D(()=>[n(s(H),{class:"w-4 h-4 mr-2"}),t[10]||(t[10]=g(" Back to admin sign in ",-1))]),_:1,__:[10]})]),t[12]||(t[12]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},[g(" Need help? "),e("a",{href:"mailto:support@capitalradio.co.ug",class:"text-purple-600 hover:text-purple-500 dark:text-purple-400 dark:hover:text-purple-300 transition-colors font-medium"}," Contact IT support ")])],-1))])}}};export{we as default};
//# sourceMappingURL=ResetPassword-5ejK8fHb.js.map
