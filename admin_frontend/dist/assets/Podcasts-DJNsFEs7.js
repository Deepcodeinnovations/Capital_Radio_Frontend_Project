import{_ as ge,u as pe,i as S,g as f,f as ye,h as ve,z as xe,c as d,o as r,b as e,d as h,p as X,k as c,l as A,I as $,F as D,C as V,t as l,a as H,v as me,j as C,n as T,s as N,D as be}from"./index-xh6Kq0Kr.js";import{R as O}from"./radio-DPjS--pG.js";import{M as W}from"./mic-Cf4yPWyD.js";import{C as he}from"./clock-CObjLH6J.js";import{P as _e}from"./play-CCCEFPgs.js";import{P as fe,V as ke,a as G}from"./volume-x-BYW-kOut.js";import{D as we}from"./download-BVbeDmHe.js";import{c as Se}from"./createLucideIcon-BvNgPl9c.js";import{T as Ce}from"./trash-CfijVRUv.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=Se("volume-1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),Pe={class:""},Me={class:"mb-6"},Re={class:"flex justify-between items-center"},Ae={class:"flex gap-2"},De={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6"},Ve={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Te=["value"],Ne=["value"],$e={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden"},Ue={class:"overflow-x-auto"},je={class:"w-full"},Le={class:"divide-y divide-gray-200 dark:divide-gray-600"},ze={class:"px-6 py-4"},Be={class:"flex items-center"},Ie={class:"relative"},Ee={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"},qe={class:"ml-4"},Xe={class:"text-sm font-medium text-gray-900 dark:text-white"},He={class:"text-sm text-gray-500 dark:text-gray-400"},Oe={class:"text-xs text-purple-600 dark:text-purple-400 capitalize"},We={class:"px-6 py-4"},Ge={class:"text-sm text-gray-900 dark:text-white"},Je={class:"text-sm text-gray-500 dark:text-gray-400"},Ke={key:0,class:"text-xs text-green-600 dark:text-green-400"},Qe={class:"px-6 py-4"},Ye={key:0,class:"text-xs text-red-500 mt-1"},Ze={key:1,class:"text-xs text-gray-500 mt-1"},et={class:"px-6 py-4"},tt={key:0,class:"space-y-2"},at={class:"text-sm text-gray-900 dark:text-white"},st={class:"text-xs text-gray-500"},rt={class:"flex items-center gap-2"},ot=["onClick","title"],lt=["href"],dt={key:0,class:"space-y-1"},it={class:"flex items-center justify-between text-xs text-gray-500"},nt={class:"flex items-center justify-between"},ut={class:"flex items-center gap-2"},ct=["value"],gt={class:"text-xs text-gray-500"},pt={key:1,class:"text-sm text-gray-400"},yt={class:"px-6 py-4"},vt={class:"flex items-center gap-2"},xt=["onClick","title"],mt=["onClick"],bt={key:2},ht={colspan:"5",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"},_t={key:0,class:"px-6 py-3 bg-gray-50 dark:bg-gray-700 flex items-center justify-between"},ft={class:"text-sm text-gray-700 dark:text-gray-300"},kt={class:"flex gap-2"},wt=["disabled"],St=["onClick"],Ct=["disabled"],Ft={__name:"Podcasts",setup(Pt){const i=pe(),n=S(()=>i.getters.sessionRecordings),J=S(()=>i.getters.programs),K=S(()=>i.getters.stations),Q=S(()=>i.getters.loading),F=f(1),u=ye({station_id:"",program_id:"",recording_status:"",day_of_week:"",session_date:""}),o=f(null),y=f(null),g=f(!1),P=f(0),k=f(0),m=f(.8),Y=S(()=>k.value>0?P.value/k.value*100:0),Z=S(()=>{var R;if(!((R=n.value)!=null&&R.pagination))return[];const s=n.value.pagination.current_page,t=n.value.pagination.last_page||n.value.pagination.total_pages,v=[],x=5;let p=Math.max(1,s-Math.floor(x/2)),w=Math.min(t,p+x-1);w-p+1<x&&(p=Math.max(1,w-x+1));for(let a=p;a<=w;a++)v.push(a);return v}),_=async()=>{try{await i.dispatch("fetch_session_recordings",{data:{...u,page:F.value,per_page:20},page:F.value})}catch(s){console.error("Failed to fetch session recordings:",s),i.dispatch("template_play_error_file","Failed to load session recordings")}},ee=async()=>{try{await i.dispatch("fetch_programs",{data:{per_page:50},page:1})}catch(s){console.error("Failed to fetch programs:",s)}},te=async()=>{try{await i.dispatch("fetch_stations",{data:{per_page:50},page:1})}catch(s){console.error("Failed to fetch stations:",s)}},U=s=>{s>=1&&s<=(n.value.pagination.last_page||n.value.pagination.total_pages)&&(F.value=s,_())},M=()=>{F.value=1,_()},ae=()=>{Object.keys(u).forEach(s=>{u[s]=""}),F.value=1,_()},se=async s=>{if(confirm(`Are you sure you want to delete this recording from ${I(s.session_date)}?`))try{await i.dispatch("delete_session_recording",{id:s.id,data:{}}),i.dispatch("template_play_delete_file","Recording deleted successfully"),_()}catch(t){console.error("Failed to delete recording:",t),i.dispatch("template_play_error_file","Failed to delete recording")}},re=async s=>{try{await i.dispatch("toggle_session_recording_status",{id:s.id,data:{}});const t=s.status?"deactivated":"activated";i.dispatch("template_play_success_file",`Recording ${t} successfully`),_()}catch(t){console.error("Failed to toggle recording status:",t),i.dispatch("template_play_error_file","Failed to update recording status")}},oe=async s=>{y.value===s.id?g.value?ie():de():await le(s)},le=async s=>{try{o.value&&(o.value.pause(),o.value=null),o.value=new Audio(s.recording_file_url),y.value=s.id,o.value.addEventListener("loadedmetadata",()=>{k.value=o.value.duration}),o.value.addEventListener("timeupdate",()=>{P.value=o.value.currentTime}),o.value.addEventListener("ended",()=>{g.value=!1,P.value=0,y.value=null}),o.value.addEventListener("error",t=>{console.error("Audio playback error:",t),i.dispatch("template_play_error_file","Failed to play audio file"),g.value=!1,y.value=null}),o.value.volume=m.value,await o.value.play(),g.value=!0}catch(t){console.error("Failed to load audio:",t),i.dispatch("template_play_error_file","Failed to load audio file"),g.value=!1,y.value=null}},de=async()=>{if(o.value)try{await o.value.play(),g.value=!0}catch(s){console.error("Failed to play audio:",s),i.dispatch("template_play_error_file","Failed to play audio")}},ie=()=>{o.value&&(o.value.pause(),g.value=!1)},ne=s=>{if(o.value&&k.value>0){const t=s.currentTarget.getBoundingClientRect(),v=s.clientX-t.left,x=t.width,p=v/x*k.value;o.value.currentTime=p,P.value=p}},j=s=>{const t=Math.max(0,Math.min(1,parseFloat(s)));m.value=t,o.value&&(o.value.volume=t)},B=s=>{if(isNaN(s))return"0:00";const t=Math.floor(s/60),v=Math.floor(s%60);return`${t}:${v.toString().padStart(2,"0")}`},I=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"No date",L=s=>s?new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"No time",ue=s=>{switch(s){case"recording":return"bg-red-500";case"completed":return"bg-green-500";case"scheduled":return"bg-blue-500";case"failed":return"bg-red-600";default:return"bg-gray-500"}},ce=s=>{switch(s){case"recording":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return ve(async()=>{try{await Promise.all([_(),ee(),te()])}catch(s){console.error("Failed to initialize session recordings:",s),i.dispatch("template_play_error_file","Failed to load session recordings data")}}),xe(()=>{o.value&&(o.value.pause(),o.value=null)}),(s,t)=>{var v,x,p,w,R;return r(),d("div",Pe,[e("div",Me,[e("div",Re,[t[12]||(t[12]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Session Recordings"),e("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Manage radio session recordings and playback")],-1)),e("div",Ae,[e("button",{onClick:_,class:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},[h(c(O),{class:"w-5 h-5 mr-2"}),t[11]||(t[11]=X(" Refresh "))])])])]),e("div",De,[e("div",Ve,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Station",-1)),A(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>u.station_id=a),onChange:M,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500"},[t[13]||(t[13]=e("option",{value:""},"All Stations",-1)),(r(!0),d(D,null,V((v=K.value)==null?void 0:v.data,a=>(r(),d("option",{key:a.id,value:a.id},l(a.name),9,Te))),128))],544),[[$,u.station_id]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Program",-1)),A(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>u.program_id=a),onChange:M,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500"},[t[15]||(t[15]=e("option",{value:""},"All Programs",-1)),(r(!0),d(D,null,V((x=J.value)==null?void 0:x.data,a=>(r(),d("option",{key:a.id,value:a.id},l(a.title),9,Ne))),128))],544),[[$,u.program_id]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Recording Status",-1)),A(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>u.recording_status=a),onChange:M,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500"},t[17]||(t[17]=[H('<option value="" data-v-dca9b6ea>All Status</option><option value="scheduled" data-v-dca9b6ea>Scheduled</option><option value="recording" data-v-dca9b6ea>Recording</option><option value="completed" data-v-dca9b6ea>Completed</option><option value="failed" data-v-dca9b6ea>Failed</option>',5)]),544),[[$,u.recording_status]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Day",-1)),A(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>u.day_of_week=a),onChange:M,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500"},t[19]||(t[19]=[H('<option value="" data-v-dca9b6ea>All Days</option><option value="monday" data-v-dca9b6ea>Monday</option><option value="tuesday" data-v-dca9b6ea>Tuesday</option><option value="wednesday" data-v-dca9b6ea>Wednesday</option><option value="thursday" data-v-dca9b6ea>Thursday</option><option value="friday" data-v-dca9b6ea>Friday</option><option value="saturday" data-v-dca9b6ea>Saturday</option><option value="sunday" data-v-dca9b6ea>Sunday</option>',8)]),544),[[$,u.day_of_week]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Session Date",-1)),A(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>u.session_date=a),onChange:M,type:"date",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500"},null,544),[[me,u.session_date]])])]),e("div",{class:"flex justify-end mt-4"},[e("button",{onClick:ae,class:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}," Reset Filters ")])]),e("div",$e,[e("div",Ue,[e("table",je,[t[25]||(t[25]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Session Info"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Schedule"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Recording Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"File Info"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Le,[Q.value==="fetch_session_recordings"?(r(),d(D,{key:0},V(5,a=>e("tr",{key:a,class:"animate-pulse"},t[22]||(t[22]=[e("td",{class:"px-6 py-4"},[e("div",{class:"flex items-center"},[e("div",{class:"w-10 h-10 bg-gray-200 dark:bg-gray-600 rounded-lg"}),e("div",{class:"ml-4"},[e("div",{class:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-32 mb-2"}),e("div",{class:"h-3 bg-gray-200 dark:bg-gray-600 rounded w-24"})])])],-1),e("td",{class:"px-6 py-4"},[e("div",{class:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-24 mb-2"}),e("div",{class:"h-3 bg-gray-200 dark:bg-gray-600 rounded w-16"})],-1),e("td",{class:"px-6 py-4"},[e("div",{class:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-20"})],-1),e("td",{class:"px-6 py-4"},[e("div",{class:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-16"})],-1),e("td",{class:"px-6 py-4"},[e("div",{class:"flex gap-2"},[e("div",{class:"w-8 h-8 bg-gray-200 dark:bg-gray-600 rounded"}),e("div",{class:"w-8 h-8 bg-gray-200 dark:bg-gray-600 rounded"})])],-1)]))),64)):(w=(p=n.value)==null?void 0:p.data)!=null&&w.length?(r(!0),d(D,{key:1},V(n.value.data,a=>{var z,E,q;return r(),d("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",ze,[e("div",Be,[e("div",Ie,[e("div",{class:T(["w-10 h-10 rounded-lg flex items-center justify-center",ue(a.recording_status)])},[h(c(W),{class:"w-5 h-5 text-white"})],2),a.recording_status==="recording"?(r(),d("div",Ee)):C("",!0)]),e("div",qe,[e("div",Xe,l(((z=a.station)==null?void 0:z.name)||"Unknown Station"),1),e("div",He,l(((E=a.program)==null?void 0:E.title)||"Unknown Program"),1),e("div",Oe,l(a.day_of_week),1)])])]),e("td",We,[e("div",Ge,l(I(a.session_date)),1),e("div",Je,[h(c(he),{class:"w-3 h-3 inline mr-1"}),X(" "+l(a.scheduled_start_time?L(a.scheduled_start_time):"N/A")+" - "+l(a.scheduled_end_time?L(a.scheduled_end_time):"N/A"),1)]),a.actual_start_time?(r(),d("div",Ke," Started: "+l(L(a.actual_start_time)),1)):C("",!0)]),e("td",Qe,[e("span",{class:T(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",ce(a.recording_status)])},l(a.recording_status||"Unknown"),3),a.error_message?(r(),d("div",Ye,l(a.error_message),1)):C("",!0),a.duration_minutes?(r(),d("div",Ze," Duration: "+l(a.duration_minutes)+"m ",1)):C("",!0)]),e("td",et,[a.recording_file_url?(r(),d("div",tt,[e("div",at,l(a.file_size_mb?`${a.file_size_mb} MB`:"File available"),1),e("div",st,l(((q=a.audio_format)==null?void 0:q.toUpperCase())||"MP3")+" • "+l(a.audio_quality||"128kbps"),1),e("div",rt,[e("button",{onClick:b=>oe(a),class:T(["flex items-center justify-center w-8 h-8 rounded-full transition-colors",y.value===a.id&&g.value?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"]),title:y.value===a.id&&g.value?"Pause":"Play"},[y.value!==a.id||!g.value?(r(),N(c(_e),{key:0,class:"w-4 h-4 ml-0.5"})):(r(),N(c(fe),{key:1,class:"w-4 h-4"}))],10,ot),e("a",{href:a.recording_file_url,download:"",class:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-500 hover:bg-blue-600 text-white transition-colors",title:"Download"},[h(c(we),{class:"w-4 h-4"})],8,lt)]),y.value===a.id?(r(),d("div",dt,[e("div",it,[e("span",null,l(B(P.value)),1),e("span",null,l(B(k.value)),1)]),e("div",{class:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 cursor-pointer",onClick:t[5]||(t[5]=b=>ne(b))},[e("div",{class:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:be({width:`${Y.value}%`})},null,4)]),e("div",nt,[e("div",ut,[e("button",{onClick:t[6]||(t[6]=b=>j(m.value-.1)),class:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},[m.value===0?(r(),N(c(ke),{key:0,class:"w-4 h-4"})):m.value<.5?(r(),N(c(Fe),{key:1,class:"w-4 h-4"})):(r(),N(c(G),{key:2,class:"w-4 h-4"}))]),e("input",{type:"range",min:"0",max:"1",step:"0.1",value:m.value,onInput:t[7]||(t[7]=b=>j(b.target.value)),class:"w-16 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-600"},null,40,ct),e("button",{onClick:t[8]||(t[8]=b=>j(m.value+.1)),class:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},[h(c(G),{class:"w-4 h-4"})])]),e("div",gt,l(Math.round(m.value*100))+"% ",1)])])):C("",!0)])):(r(),d("div",pt," No file available "))]),e("td",yt,[e("div",vt,[e("button",{onClick:b=>re(a),class:T(["p-2 rounded-lg transition-colors",a.status?"text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20":"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20"]),title:a.status?"Deactivate":"Activate"},[h(c(O),{class:"w-4 h-4"})],10,xt),e("button",{onClick:b=>se(a),class:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete Recording"},[h(c(Ce),{class:"w-4 h-4"})],8,mt)])])])}),128)):(r(),d("tr",bt,[e("td",ht,[h(c(W),{class:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),t[23]||(t[23]=e("p",{class:"text-lg font-medium"},"No session recordings found",-1)),t[24]||(t[24]=e("p",{class:"mt-2"},"Recordings will appear here when sessions are scheduled",-1))])]))])])]),(R=n.value)!=null&&R.pagination?(r(),d("div",_t,[e("div",ft," Showing "+l(n.value.pagination.from)+" to "+l(n.value.pagination.to)+" of "+l(n.value.pagination.total)+" results ",1),e("div",kt,[e("button",{onClick:t[9]||(t[9]=a=>U(n.value.pagination.current_page-1)),disabled:!n.value.pagination.has_prev,class:"px-3 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-gray-600"}," Previous ",8,wt),(r(!0),d(D,null,V(Z.value,a=>(r(),d("button",{key:a,onClick:z=>U(a),class:T(["px-3 py-1 text-sm border rounded",a===n.value.pagination.current_page?"bg-purple-600 text-white border-purple-600":"hover:bg-gray-100 dark:hover:bg-gray-600"])},l(a),11,St))),128)),e("button",{onClick:t[10]||(t[10]=a=>U(n.value.pagination.current_page+1)),disabled:!n.value.pagination.has_next,class:"px-3 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-gray-600"}," Next ",8,Ct)])])):C("",!0)])])}}},jt=ge(Ft,[["__scopeId","data-v-dca9b6ea"]]);export{jt as default};
//# sourceMappingURL=Podcasts-DJNsFEs7.js.map
