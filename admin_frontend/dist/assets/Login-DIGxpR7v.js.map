{"version":3,"file":"Login-DIGxpR7v.js","sources":["../../src/views/auth/Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"max-w-md w-full space-y-6 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm p-10 rounded-xl shadow-2xl border border-purple-200 dark:border-slate-700\">\r\n    <!-- Header -->\r\n    <div class=\"text-center\">\r\n      <div class=\"mx-auto w-12 h-12 bg-gradient-to-r from-purple-600 to-orange-500 rounded-full flex items-center justify-center mb-4\">\r\n        <ShieldIcon class=\"w-6 h-6 text-white\" />\r\n      </div>\r\n      <h2 class=\"text-2xl font-bold text-gray-900 dark:text-white\">Admin Portal</h2>\r\n      <p class=\"text-gray-600 dark:text-gray-300 mt-1\">Sign in to access your admin dashboard</p>\r\n    </div>\r\n \r\n    <!-- Error Alert -->\r\n    <div v-if=\"errorMessage\" class=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\">\r\n      <div class=\"flex items-center\">\r\n        <AlertCircleIcon class=\"h-5 w-5 text-red-500 mr-2\" />\r\n        <span class=\"text-sm text-red-700 dark:text-red-400\">{{ errorMessage }}</span>\r\n      </div>\r\n    </div>\r\n        \r\n    <form class=\"space-y-6\" @submit.prevent=\"handleAdminLogin\">\r\n      <div class=\"space-y-5\">\r\n        <!-- Email Field -->\r\n        <div>\r\n          <label for=\"email-address\" class=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\r\n            Admin Email\r\n          </label>\r\n          <div class=\"relative\">\r\n            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n              <MailIcon class=\"h-5 w-5 text-purple-400 dark:text-purple-300\" />\r\n            </div>\r\n            <input\r\n              id=\"email-address\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              autocomplete=\"email\"\r\n              required\r\n              v-model=\"form.email\"\r\n              @input=\"clearError\"\r\n              class=\"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-slate-600 rounded-lg shadow-sm placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200\"\r\n              :class=\"{ 'border-red-300 focus:ring-red-500': errorMessage }\"\r\n              placeholder=\"Enter your admin email\"\r\n            />\r\n          </div>\r\n        </div>\r\n \r\n        <!-- Password Field -->\r\n        <div>\r\n          <div class=\"flex items-center justify-between mb-2\">\r\n            <label for=\"password\" class=\"block text-sm font-semibold text-gray-700 dark:text-gray-300\">\r\n              Password\r\n            </label>\r\n            <router-link \r\n              :to=\"{ name: 'ResetPassword' }\" \r\n              class=\"text-sm font-medium text-purple-600 hover:text-purple-500 dark:text-purple-400 dark:hover:text-purple-300 transition-colors\"\r\n            >\r\n              Forgot password?\r\n            </router-link>\r\n          </div>\r\n          <div class=\"relative\">\r\n            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n              <LockIcon class=\"h-5 w-5 text-purple-400 dark:text-purple-300\" />\r\n            </div>\r\n            <input\r\n              id=\"password\"\r\n              name=\"password\"\r\n              :type=\"showPassword ? 'text' : 'password'\"\r\n              autocomplete=\"current-password\"\r\n              required\r\n              v-model=\"form.password\"\r\n              @input=\"clearError\"\r\n              class=\"block w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-slate-600 rounded-lg shadow-sm placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200\"\r\n              :class=\"{ 'border-red-300 focus:ring-red-500': errorMessage }\"\r\n              placeholder=\"Enter your password\"\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              @click=\"showPassword = !showPassword\"\r\n              class=\"absolute inset-y-0 right-0 pr-3 flex items-center text-purple-400 dark:text-purple-300 hover:text-purple-600 dark:hover:text-purple-100 transition-colors\"\r\n            >\r\n              <EyeIcon v-if=\"!showPassword\" class=\"h-5 w-5\" />\r\n              <EyeOffIcon v-else class=\"h-5 w-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n \r\n      <!-- Remember Me -->\r\n      <div class=\"flex items-center\">\r\n        <input\r\n          id=\"remember-me\"\r\n          name=\"remember-me\"\r\n          type=\"checkbox\"\r\n          v-model=\"form.remember\"\r\n          class=\"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700\"\r\n        />\r\n        <label for=\"remember-me\" class=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\r\n          Keep me signed in for 30 days\r\n        </label>\r\n      </div>\r\n\r\n      <!-- Hidden Device Fingerprint -->\r\n      <input v-model=\"form.device_fingerprint\" type=\"hidden\" />\r\n \r\n      <!-- Submit Button -->\r\n      <button\r\n        type=\"submit\"\r\n        :disabled=\"isLoading || !isFormValid\"\r\n        class=\"relative w-full flex justify-center items-center py-3 px-4 border border-transparent text-sm font-semibold rounded-lg text-white bg-gradient-to-r from-purple-600 to-orange-500 hover:from-purple-700 hover:to-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\r\n      >\r\n        <LoaderIcon v-if=\"isLoading\" class=\"w-5 h-5 mr-2 animate-spin\" />\r\n        <ShieldIcon v-else class=\"w-5 h-5 mr-2\" />\r\n        {{ isLoading ? 'Signing in...' : 'Sign in to Admin' }}\r\n      </button>\r\n    </form>\r\n\r\n    <!-- Security Notice -->\r\n    <div class=\"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg\">\r\n      <div class=\"flex\">\r\n        <AlertTriangleIcon class=\"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5\" />\r\n        <div class=\"ml-3\">\r\n          <h4 class=\"text-sm font-medium text-amber-900 dark:text-amber-200 mb-1\">Admin Access Only</h4>\r\n          <p class=\"text-xs text-amber-700 dark:text-amber-300\">\r\n            This portal is restricted to authorized administrators only. All login attempts are logged and monitored.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n \r\n<script setup>\r\nimport { ref, reactive, computed, onMounted, watch } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from 'vue-router';\r\nimport { \r\n  Lock as LockIcon, \r\n  Loader as LoaderIcon, \r\n  Mail as MailIcon,\r\n  AlertCircle as AlertCircleIcon,\r\n  Eye as EyeIcon,\r\n  EyeOff as EyeOffIcon,\r\n  Shield as ShieldIcon,\r\n  AlertTriangle as AlertTriangleIcon\r\n} from 'lucide-vue-next';\r\n \r\nconst store = useStore();\r\nconst router = useRouter();\r\n\r\nconst form = reactive({\r\n  email: '',\r\n  password: '',\r\n  remember: false,\r\n  device_fingerprint: ''\r\n});\r\n\r\nconst showPassword = ref(false);\r\nconst isLoading = ref(false);\r\nconst errorMessage = ref('');\r\n\r\n// Generate device fingerprint on mount\r\nonMounted(() => {\r\n  generateDeviceFingerprint();\r\n});\r\n\r\nconst generateDeviceFingerprint = () => {\r\n  const fingerprint = btoa(\r\n    navigator.userAgent + \r\n    screen.width + \r\n    screen.height + \r\n    new Date().getTimezoneOffset()\r\n  ).substring(0, 32);\r\n  form.device_fingerprint = fingerprint;\r\n};\r\n\r\n// Computed properties\r\nconst isFormValid = computed(() => {\r\n  return form.email.trim() && \r\n         form.password.length >= 6 && \r\n         form.email.includes('@');\r\n});\r\n\r\n// Clear error message when user types\r\nconst clearError = () => {\r\n  if (errorMessage.value) {\r\n    errorMessage.value = '';\r\n  }\r\n};\r\n\r\n// Watch for form changes to clear errors\r\nwatch([() => form.email, () => form.password], clearError);\r\n\r\n// Handle admin login\r\nconst handleAdminLogin = async () => {\r\n  try {\r\n    isLoading.value = true;\r\n    errorMessage.value = '';\r\n    \r\n    // Validate admin email format\r\n    if (!form.email.includes('@')) {\r\n      throw new Error('Please enter a valid email address');\r\n    }\r\n    \r\n    // Validate password strength\r\n    if (form.password.length < 6) {\r\n      throw new Error('Password must be at least 6 characters long');\r\n    }\r\n    \r\n    // Create login credentials object\r\n    const loginData = {\r\n      email: form.email.trim().toLowerCase(),\r\n      password: form.password,\r\n      remember: form.remember,\r\n      device_fingerprint: form.device_fingerprint\r\n    };\r\n    \r\n    // Dispatch admin login action using the new store structure\r\n    await store.dispatch('adminLogin', loginData);\r\n    \r\n    // If successful, redirect to dashboard\r\n    router.push({ name: 'Dashboard' });\r\n    \r\n  } catch (error) {\r\n    console.error('Admin login error:', error);\r\n    \r\n    // Set specific error messages based on response\r\n    if (error.response?.status === 401) {\r\n      errorMessage.value = 'Invalid admin credentials. Please check your email and password.';\r\n    } else if (error.response?.status === 403) {\r\n      errorMessage.value = 'Access denied. You do not have admin privileges.';\r\n    } else if (error.response?.status === 429) {\r\n      errorMessage.value = 'Too many login attempts. Please try again later.';\r\n    } else {\r\n      // Get error from store or use default message\r\n      errorMessage.value = store.getters.error || error.message || 'Login failed. Please try again.';\r\n    }\r\n    \r\n    // Clear password field on error\r\n    form.password = '';\r\n    \r\n  } finally {\r\n    isLoading.value = false;\r\n  }\r\n};\r\n</script>"],"names":["store","useStore","router","useRouter","form","reactive","showPassword","ref","isLoading","errorMessage","onMounted","generateDeviceFingerprint","fingerprint","isFormValid","computed","clearError","watch","handleAdminLogin","loginData","error","_a","_b","_c"],"mappings":"uiDAiJA,MAAMA,EAAQC,EAAQ,EAChBC,EAASC,EAAS,EAElBC,EAAOC,EAAS,CACpB,MAAO,GACP,SAAU,GACV,SAAU,GACV,mBAAoB,EACtB,CAAC,EAEKC,EAAeC,EAAI,EAAK,EACxBC,EAAYD,EAAI,EAAK,EACrBE,EAAeF,EAAI,EAAE,EAG3BG,EAAU,IAAM,CACdC,GACF,CAAC,EAED,MAAMA,EAA4B,IAAM,CACtC,MAAMC,EAAc,KAClB,UAAU,UACV,OAAO,MACP,OAAO,OACP,IAAI,KAAM,EAAC,kBAAmB,CAClC,EAAI,UAAU,EAAG,EAAE,EACjBR,EAAK,mBAAqBQ,CAC5B,EAGMC,EAAcC,EAAS,IACpBV,EAAK,MAAM,KAAM,GACjBA,EAAK,SAAS,QAAU,GACxBA,EAAK,MAAM,SAAS,GAAG,CAC/B,EAGKW,EAAa,IAAM,CACnBN,EAAa,QACfA,EAAa,MAAQ,GAEzB,EAGAO,EAAM,CAAC,IAAMZ,EAAK,MAAO,IAAMA,EAAK,QAAQ,EAAGW,CAAU,EAGzD,MAAME,EAAmB,SAAY,WACnC,GAAI,CAKF,GAJAT,EAAU,MAAQ,GAClBC,EAAa,MAAQ,GAGjB,CAACL,EAAK,MAAM,SAAS,GAAG,EAC1B,MAAM,IAAI,MAAM,oCAAoC,EAItD,GAAIA,EAAK,SAAS,OAAS,EACzB,MAAM,IAAI,MAAM,6CAA6C,EAI/D,MAAMc,EAAY,CAChB,MAAOd,EAAK,MAAM,KAAI,EAAG,YAAa,EACtC,SAAUA,EAAK,SACf,SAAUA,EAAK,SACf,mBAAoBA,EAAK,kBAC/B,EAGI,MAAMJ,EAAM,SAAS,aAAckB,CAAS,EAG5ChB,EAAO,KAAK,CAAE,KAAM,WAAa,CAAA,CAElC,OAAQiB,EAAO,CACd,QAAQ,MAAM,qBAAsBA,CAAK,IAGrCC,EAAAD,EAAM,WAAN,YAAAC,EAAgB,UAAW,IAC7BX,EAAa,MAAQ,qEACZY,EAAAF,EAAM,WAAN,YAAAE,EAAgB,UAAW,IACpCZ,EAAa,MAAQ,qDACZa,EAAAH,EAAM,WAAN,YAAAG,EAAgB,UAAW,IACpCb,EAAa,MAAQ,mDAGrBA,EAAa,MAAQT,EAAM,QAAQ,OAASmB,EAAM,SAAW,kCAI/Df,EAAK,SAAW,EAEpB,QAAY,CACRI,EAAU,MAAQ,EACnB,CACH"}