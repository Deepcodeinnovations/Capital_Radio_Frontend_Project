import{u as ie,x as ue,e as ce,f as b,g as A,p as me,c as i,o,b as e,h as x,d as n,k as m,i as r,t as u,n as _,l as g,F as ge,s as pe,m as y,w as j,v as U,z as xe,C as be}from"./index-nOqVMhSP.js";import{A as fe}from"./arrow-left-Bad1bqYq.js";import{L as h}from"./loader-CmDhcKWI.js";import{R as ve}from"./radio-C9ykdOzN.js";import{U as H}from"./user-D0yeho4g.js";import{C as ye}from"./calendar-BNS961R1.js";import{M as W}from"./message-square-65oRwxfY.js";import{T as he,a as ke}from"./toggle-right-Dl0JYHjI.js";import{S as we}from"./square-pen-BYKpSTKJ.js";import{T as X}from"./trash-CULHkSjr.js";import{R as Ce}from"./refresh-cw-C3JWXq1e.js";import{c as G}from"./createLucideIcon-BxhE3_JV.js";import{C as _e}from"./clock-Bqxswd8m.js";import{T as L}from"./triangle-alert-CWfHv5fj.js";import{X as Fe}from"./x-D4KeTYyF.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=G("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=G("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),je={class:"min-h-screen bg-gray-50 dark:bg-slate-900 px-6"},Me={class:"max-w-9xl mx-auto space-y-6"},Se={key:0,class:"flex justify-center py-12"},Ee={key:1,class:"bg-white dark:bg-slate-800 rounded-lg shadow-lg overflow-hidden"},Ae={class:"p-6 border-b border-gray-200 dark:border-slate-600"},Ue={class:"flex justify-between items-start"},Le={class:"flex-1"},Re={class:"flex items-center gap-3 mb-2"},Ve={class:"text-2xl font-bold text-gray-900 dark:text-white"},$e={class:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4"},ze={class:"flex items-center"},Ie={class:"flex items-center"},Be={class:"flex items-center"},qe={class:"flex items-center"},Ne={class:"text-gray-700 dark:text-gray-300 leading-relaxed"},Ke={class:"flex items-center gap-2 ml-6"},Pe=["disabled","title"],He={class:"p-6"},We={class:"flex justify-between items-center mb-4"},Xe={class:"text-xl font-semibold text-gray-900 dark:text-white"},Ge=["disabled"],Je={class:"border border-gray-200 dark:border-slate-600 rounded-lg bg-gray-50 dark:bg-slate-700 flex flex-col h-[70vh]"},Oe={key:0,class:"flex justify-center py-8"},Qe={key:1},Ye={class:"flex justify-between items-start"},Ze={class:"flex-1"},et={class:"flex items-center gap-2 mb-2"},tt={class:"w-6 h-6 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center"},st={class:"text-xs text-gray-500 dark:text-gray-400"},rt={class:"text-gray-700 dark:text-gray-300 text-sm"},ot={class:"flex items-center gap-1 ml-2"},at=["onClick","disabled","title"],lt=["onClick"],nt={key:2,class:"flex flex-col items-center justify-center h-full text-center py-8"},dt={class:"border-t border-gray-200 dark:border-slate-600 p-4 bg-white dark:bg-slate-800"},it={class:"flex gap-2"},ut=["onKeydown"],ct=["disabled"],mt={class:"flex items-center justify-between"},gt={class:"flex items-center text-sm"},pt={key:2,class:"text-center py-12"},xt={class:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-slate-600"},bt={class:"flex justify-end gap-3 pt-4"},ft=["disabled"],vt={class:"p-6"},yt={class:"flex items-center mb-4"},ht={class:"text-gray-600 dark:text-gray-300 mb-6"},kt={class:"flex justify-end gap-3"},wt=["disabled"],Ct={class:"p-6"},_t={class:"flex items-center mb-4"},Ft={class:"flex justify-end gap-3"},Dt=["disabled"],Kt={__name:"ForumDetails",setup(Tt){const c=ie(),p=ue(),J=ce(),M=b(!1),k=b(!1),w=b(!1),S=b(null),F=b(null),f=b({title:"",body:"",station_id:""}),v=b({content:"",status:!0}),l=A(()=>c.getters.forum),D=A(()=>c.getters.comments),d=A(()=>c.getters.loading),O=a=>new Date(a).toLocaleDateString(),Q=a=>new Date(a).toLocaleString(),E=async()=>{await c.dispatch("fetchForum",p.params.id)},C=async()=>{await c.dispatch("fetchComments",p.params.id)},Y=async()=>{await C()},Z=()=>{F.value&&(F.value.scrollTop=F.value.scrollHeight)},R=async()=>{try{await c.dispatch("createComment",{forumId:p.params.id,data:v.value}),v.value={content:"",status:!0},await C(),setTimeout(Z,100)}catch(a){console.error("Error creating comment:",a)}},ee=()=>{f.value={title:l.value.title,body:l.value.body,station_id:l.value.station_id},M.value=!0},T=()=>{M.value=!1},te=async()=>{try{await c.dispatch("updateForum",{id:p.params.id,data:f.value}),T(),await E()}catch(a){console.error("Error updating forum:",a)}},se=async()=>{try{await c.dispatch("updateForum",{id:p.params.id,data:{...l.value,status:!l.value.status}}),await E()}catch(a){console.error("Error toggling forum status:",a)}},re=()=>{k.value=!0},oe=async()=>{try{await c.dispatch("deleteForum",p.params.id),k.value=!1,J.push({name:"Forums"})}catch(a){console.error("Error deleting forum:",a)}},ae=async a=>{try{await c.dispatch("updateComment",{forumId:p.params.id,commentId:a.id,data:{...a,status:!a.status}}),await C()}catch(t){console.error("Error toggling comment status:",t)}},le=a=>{S.value=a,w.value=!0},ne=async()=>{try{await c.dispatch("deleteComment",{forumId:p.params.id,commentId:S.value.id}),w.value=!1,S.value=null,await C()}catch(a){console.error("Error deleting comment:",a)}};return me(()=>{E(),C()}),(a,t)=>{var V,$,z,I,B,q,N,K,P;return o(),i("div",je,[e("div",Me,[e("button",{onClick:t[0]||(t[0]=s=>a.$router.go(-1)),class:"flex items-center text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300 transition-colors"},[n(r(fe),{class:"w-5 h-5 mr-2"}),t[12]||(t[12]=m(" Back to Forums "))]),d.value==="fetchForum"?(o(),i("div",Se,[n(r(h),{class:"w-8 h-8 animate-spin text-purple-600"})])):l.value?(o(),i("div",Ee,[e("div",Ae,[e("div",Ue,[e("div",Le,[e("div",Re,[e("h1",Ve,u(l.value.title),1),e("span",{class:_([l.value.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300","px-3 py-1 rounded-full text-sm font-medium"])},u(l.value.status?"Active":"Inactive"),3)]),e("div",$e,[e("div",ze,[n(r(ve),{class:"w-4 h-4 mr-1"}),m(" "+u(((V=l.value.station)==null?void 0:V.name)||"Unknown Station"),1)]),e("div",Ie,[n(r(H),{class:"w-4 h-4 mr-1"}),m(" "+u((($=l.value.creator)==null?void 0:$.name)||"Unknown Creator"),1)]),e("div",Be,[n(r(ye),{class:"w-4 h-4 mr-1"}),m(" "+u(O(l.value.created_at)),1)]),e("div",qe,[n(r(W),{class:"w-4 h-4 mr-1"}),m(" "+u(((I=(z=D.value)==null?void 0:z.data)==null?void 0:I.length)||0)+" Comments ",1)])]),e("p",Ne,u(l.value.body),1)]),e("div",Ke,[e("button",{onClick:se,disabled:d.value==="updateForum",class:_(["p-2 rounded-lg transition-colors",l.value.status?"text-green-600 hover:bg-green-100 dark:hover:bg-green-900":"text-red-600 hover:bg-red-100 dark:hover:bg-red-900"]),title:l.value.status?"Deactivate Forum":"Activate Forum"},[l.value.status?(o(),g(r(ke),{key:1,class:"w-5 h-5"})):(o(),g(r(he),{key:0,class:"w-5 h-5"}))],10,Pe),e("button",{onClick:ee,class:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900 rounded-lg transition-colors",title:"Edit Forum"},[n(r(we),{class:"w-5 h-5"})]),e("button",{onClick:re,class:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors",title:"Delete Forum"},[n(r(X),{class:"w-5 h-5"})])])])]),e("div",He,[e("div",We,[e("h2",Xe," Comments ("+u(((q=(B=D.value)==null?void 0:B.data)==null?void 0:q.length)||0)+") ",1),e("button",{onClick:Y,disabled:d.value==="fetchComments",class:"flex items-center text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300 transition-colors"},[n(r(Ce),{class:_([d.value==="fetchComments"?"animate-spin":"","w-4 h-4 mr-2"])},null,8,["class"]),t[13]||(t[13]=m(" Refresh "))],8,Ge)]),e("div",Je,[e("div",{ref_key:"commentsContainer",ref:F,class:"flex-1 overflow-y-auto p-4 space-y-3"},[d.value==="fetchComments"?(o(),i("div",Oe,[n(r(h),{class:"w-6 h-6 animate-spin text-purple-600"})])):(K=(N=D.value)==null?void 0:N.data)!=null&&K.length?(o(),i("div",Qe,[(o(!0),i(ge,null,pe(D.value.data,s=>(o(),i("div",{key:s.id,class:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-slate-600 shadow-sm mb-2"},[e("div",Ye,[e("div",Ze,[e("div",et,[e("div",tt,[n(r(H),{class:"w-3 h-3 text-purple-600 dark:text-purple-400"})]),t[14]||(t[14]=e("span",{class:"font-medium text-sm text-gray-900 dark:text-white"}," Admin ",-1)),e("span",st,u(Q(s.created_at)),1),s.status!==void 0?(o(),i("span",{key:0,class:_([s.status?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300","px-2 py-0.5 rounded-full text-xs font-medium"])},u(s.status?"Approved":"Pending"),3)):x("",!0)]),e("p",rt,u(s.content||s.body),1)]),e("div",ot,[s.status!==void 0?(o(),i("button",{key:0,onClick:de=>ae(s),disabled:d.value==="updateComment",class:_(["p-1 rounded transition-colors",s.status?"text-orange-600 hover:bg-orange-100 dark:hover:bg-orange-900":"text-green-600 hover:bg-green-100 dark:hover:bg-green-900"]),title:s.status?"Mark as Pending":"Approve Comment"},[s.status?(o(),g(r(_e),{key:1,class:"w-3 h-3"})):(o(),g(r(De),{key:0,class:"w-3 h-3"}))],10,at)):x("",!0),e("button",{onClick:de=>le(s),class:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded transition-colors",title:"Delete Comment"},[n(r(X),{class:"w-3 h-3"})],8,lt)])])]))),128))])):(o(),i("div",nt,[n(r(W),{class:"w-8 h-8 text-gray-400 mb-2"}),t[15]||(t[15]=e("h3",{class:"text-sm font-medium text-gray-900 dark:text-white mb-1"},"No comments yet",-1)),t[16]||(t[16]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Start the conversation below",-1))]))],512),e("div",dt,[e("form",{onSubmit:y(R,["prevent"]),class:"space-y-3"},[e("div",it,[j(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value.content=s),required:"",rows:"2",class:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none",placeholder:"Write your comment...",onKeydown:xe(y(R,["ctrl"]),["enter"])},null,40,ut),[[U,v.value.content]]),e("button",{type:"submit",disabled:d.value==="createComment",class:"bg-gradient-to-r from-purple-600 to-orange-500 hover:from-purple-700 hover:to-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center self-end"},[d.value==="createComment"?(o(),g(r(h),{key:0,class:"w-4 h-4 animate-spin"})):(o(),g(r(Te),{key:1,class:"w-4 h-4"}))],8,ct)]),e("div",mt,[e("label",gt,[j(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value.status=s),type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 mr-2"},null,512),[[be,v.value.status]]),t[17]||(t[17]=e("span",{class:"text-gray-700 dark:text-gray-300"},"Auto-approve comment",-1))]),t[18]||(t[18]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Ctrl+Enter to submit",-1))])],32)])])])])):(o(),i("div",pt,[n(r(L),{class:"w-12 h-12 text-red-400 mx-auto mb-4"}),t[19]||(t[19]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Forum not found",-1)),t[20]||(t[20]=e("p",{class:"text-gray-600 dark:text-gray-400"},"The forum you're looking for doesn't exist or has been removed",-1))]))]),M.value?(o(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:T},[e("div",{onClick:t[5]||(t[5]=y(()=>{},["stop"])),class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4"},[e("div",xt,[t[21]||(t[21]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Edit Forum",-1)),e("button",{onClick:T,class:"text-gray-400 hover:text-gray-600"},[n(r(Fe),{class:"w-6 h-6"})])]),e("form",{onSubmit:y(te,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Title",-1)),j(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value.title=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[U,f.value.title]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Description",-1)),j(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>f.value.body=s),required:"",rows:"4",class:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[U,f.value.body]])]),e("div",bt,[e("button",{type:"button",onClick:T,class:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors"}," Cancel "),e("button",{type:"submit",disabled:d.value==="updateForum",class:"bg-gradient-to-r from-purple-600 to-orange-500 hover:from-purple-700 hover:to-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center"},[d.value==="updateForum"?(o(),g(r(h),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):x("",!0),t[24]||(t[24]=m(" Update Forum "))],8,ft)])],32)])])):x("",!0),k.value?(o(),i("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[8]||(t[8]=s=>k.value=!1)},[e("div",{onClick:t[7]||(t[7]=y(()=>{},["stop"])),class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4"},[e("div",vt,[e("div",yt,[n(r(L),{class:"w-6 h-6 text-red-600 mr-3"}),t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Delete Forum",-1))]),e("p",ht,' Are you sure you want to delete "'+u((P=l.value)==null?void 0:P.title)+'"? This will also delete all comments. This action cannot be undone. ',1),e("div",kt,[e("button",{onClick:t[6]||(t[6]=s=>k.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors"}," Cancel "),e("button",{onClick:oe,disabled:d.value==="deleteForum",class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center"},[d.value==="deleteForum"?(o(),g(r(h),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):x("",!0),t[26]||(t[26]=m(" Delete Forum "))],8,wt)])])])])):x("",!0),w.value?(o(),i("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[11]||(t[11]=s=>w.value=!1)},[e("div",{onClick:t[10]||(t[10]=y(()=>{},["stop"])),class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4"},[e("div",Ct,[e("div",_t,[n(r(L),{class:"w-6 h-6 text-red-600 mr-3"}),t[27]||(t[27]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Delete Comment",-1))]),t[29]||(t[29]=e("p",{class:"text-gray-600 dark:text-gray-300 mb-6"}," Are you sure you want to delete this comment? This action cannot be undone. ",-1)),e("div",Ft,[e("button",{onClick:t[9]||(t[9]=s=>w.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors"}," Cancel "),e("button",{onClick:ne,disabled:d.value==="deleteComment",class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center"},[d.value==="deleteComment"?(o(),g(r(h),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):x("",!0),t[28]||(t[28]=m(" Delete Comment "))],8,Dt)])])])])):x("",!0)])}}};export{Kt as default};
