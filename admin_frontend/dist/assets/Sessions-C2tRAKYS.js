import{_ as ee,u as te,g as x,f as w,p as ae,c as r,o,b as t,h as y,l as C,k as v,i as n,t as i,F as f,s as h,a as H,d as c,n as I,w as p,v as U,B as S,C as se}from"./index-nOqVMhSP.js";import{L as V}from"./loader-CmDhcKWI.js";import{P as le}from"./plus-DuFhQe66.js";import{R as oe}from"./radio-C9ykdOzN.js";import{c as N}from"./createLucideIcon-BxhE3_JV.js";import{C as de}from"./clock-Bqxswd8m.js";import{M as re}from"./mic-BHMlvyvd.js";import{S as ie}from"./square-pen-BYKpSTKJ.js";import{T as ne}from"./trash-CULHkSjr.js";import{X as D}from"./x-D4KeTYyF.js";import{I as ue}from"./image-gjYv8EsK.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=N("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=N("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),ve={class:"space-y-6"},pe={class:"flex justify-between items-center"},be={class:"flex items-center gap-3"},ge=["disabled"],xe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},fe={class:"p-6"},he={class:"flex items-center mb-4"},ke={class:"h-12 w-12 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 font-bold text-lg mr-3"},_e={class:"flex-1"},we={class:"text-lg font-semibold text-slate-900 dark:text-white"},ye={class:"text-sm text-slate-500 dark:text-slate-400"},Ce={class:"flex items-center text-sm text-slate-600 dark:text-slate-400 mb-3"},Pe={class:"flex items-center text-sm text-slate-600 dark:text-slate-400 mb-3"},Se={class:"flex items-center text-sm text-slate-600 dark:text-slate-400 mb-4"},Fe={key:0,class:"mb-4"},Me={class:"flex flex-wrap gap-1"},Ue={key:1,class:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-2"},Ve={class:"flex items-center justify-between"},je=["onClick","disabled"],$e={class:"flex items-center gap-1"},Ae=["onClick","disabled"],He=["onClick","disabled"],Ie={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},De={class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[85vh] flex flex-col"},Ne={class:"p-4 border-b border-slate-200 dark:border-slate-700 flex-shrink-0"},qe={class:"flex justify-between items-center"},Be={class:"text-lg font-semibold text-slate-900 dark:text-white"},ze={class:"flex-1 overflow-y-auto p-4 space-y-4"},Te={class:"flex items-center gap-4"},Le={class:"w-20 h-20 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600 flex items-center justify-center bg-slate-50 dark:bg-slate-700/50 overflow-hidden"},Re=["src"],Ee={class:"flex-1"},Je={class:"grid grid-cols-2 gap-3"},Ge=["value"],Oe={class:"grid grid-cols-2 gap-3"},Xe={class:"border border-slate-300 dark:border-slate-600 rounded-lg p-3 bg-slate-50 dark:bg-slate-700/50"},Ke={key:0,class:"mb-3"},Qe={class:"flex flex-wrap gap-1"},We=["onClick"],Ye=["value"],Ze={class:"flex items-center"},et={class:"p-4 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3 flex-shrink-0"},tt=["disabled"],at={__name:"Sessions",setup(st){const d=te(),q=x(()=>d.getters.programs),B=x(()=>d.getters.stations),j=x(()=>d.getters.hosts),u=x(()=>d.getters.loading),P=w(!1),m=w(null),b=w(""),k=w(""),l=w({title:"",station_id:"",duration:60,studio:"A",type:"live_show",description:"",status:"active",selected_hosts:[],image:null}),z=x(()=>l.value.title&&l.value.station_id&&l.value.duration>0),T=x(()=>j.value.data.filter(s=>!l.value.selected_hosts.includes(s.id))),L=s=>{const e=j.value.data.find(a=>a.id===s);return e?e.name:"Unknown Host"},R=s=>{if(!s)return"Unknown";const e=Math.floor(s/60),a=s%60;return e>0?`${e}h ${a}m`:`${a}m`},E=s=>{const e=s.target.files[0];if(e){if(e.size>2*1024*1024){d.dispatch("template_play_error_file","Image size must be less than 2MB");return}l.value.image=e;const a=new FileReader;a.onload=_=>{k.value=_.target.result},a.readAsDataURL(e)}},J=()=>{b.value&&!l.value.selected_hosts.includes(b.value)&&(l.value.selected_hosts.push(b.value),b.value="")},G=s=>{l.value.selected_hosts=l.value.selected_hosts.filter(e=>e!==s)},O=()=>{l.value={title:"",station_id:"",duration:60,studio:"A",type:"live_show",description:"",status:"active",selected_hosts:[],image:null},b.value="",k.value=""},X=s=>{l.value={...s,selected_hosts:s.hosts?s.hosts.map(e=>e.id):[],image:null},k.value=s.image_url||"",m.value=s,P.value=!0},F=()=>{P.value=!1,m.value=null,O()},K=async()=>{try{const s=new FormData;Object.keys(l.value).forEach(e=>{e==="selected_hosts"?s.append("host_ids",JSON.stringify(l.value[e])):e==="image"&&l.value[e]?s.append("image",l.value[e]):e!=="image"&&l.value[e]!==null&&l.value[e]!==void 0&&s.append(e,l.value[e])}),m.value?await d.dispatch("update_program",{programId:m.value.id,data:s}):await d.dispatch("create_program",s),await M(),F(),m.value?d.dispatch("template_play_success_file","Program updated successfully"):d.dispatch("template_play_success_file","Program created successfully")}catch(s){console.error("Failed to save program:",s),d.dispatch("template_play_error_file","Failed to save program")}},Q=async s=>{if(confirm(`Are you sure you want to delete "${s.title}"?`))try{await d.dispatch("delete_program",{id:s.id,data:{}}),await M(),d.dispatch("template_play_delete_file","Program deleted successfully")}catch(e){console.error("Failed to delete program:",e),d.dispatch("template_play_error_file","Failed to delete program")}},W=async s=>{try{const e=s.status==="active"?"inactive":"active";await d.dispatch("toggle_program_status",{id:s.id,data:{status:e}}),s.status=e,d.dispatch("template_play_success_file","Program status updated")}catch(e){console.error("Failed to toggle program status:",e),d.dispatch("template_play_error_file","Failed to update program status")}},M=async()=>{try{await d.dispatch("fetch_programs",{data:{per_page:20},page:1})}catch(s){console.error("Failed to fetch programs:",s)}},Y=async()=>{try{await d.dispatch("fetch_stations",{data:{per_page:50},page:1})}catch(s){console.error("Failed to fetch stations:",s)}},Z=async()=>{try{await d.dispatch("fetch_hosts",{data:{per_page:50},page:1})}catch(s){console.error("Failed to fetch hosts:",s)}};return ae(async()=>{try{await Promise.all([M(),Y(),Z()])}catch(s){console.error("Failed to initialize radio programs:",s),d.dispatch("template_play_error_file","Failed to load radio programs data")}}),(s,e)=>(o(),r("div",ve,[t("div",pe,[e[10]||(e[10]=t("div",null,[t("h1",{class:"text-2xl font-semibold text-slate-900 dark:text-white"},"Radio Programs"),t("p",{class:"text-sm text-slate-600 dark:text-slate-400 mt-1"},"Create and manage your radio programs")],-1)),t("div",be,[t("button",{onClick:e[0]||(e[0]=a=>P.value=!0),disabled:u.value==="create_program",class:"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium disabled:opacity-50"},[u.value==="create_program"?(o(),C(n(V),{key:0,class:"h-4 w-4 animate-spin"})):(o(),C(n(le),{key:1,class:"h-4 w-4"})),v(" "+i(u.value==="create_program"?"Creating...":"Create Program"),1)],8,ge)])]),t("div",xe,[u.value==="fetch_programs"?(o(),r(f,{key:0},h(6,a=>t("div",{key:`skeleton-${a}`,class:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6 animate-pulse"},e[11]||(e[11]=[H('<div class="flex items-center mb-4" data-v-bdc8a033><div class="h-12 w-12 rounded-full bg-slate-200 dark:bg-slate-700 mr-3" data-v-bdc8a033></div><div class="space-y-2" data-v-bdc8a033><div class="h-4 w-24 bg-slate-200 dark:bg-slate-700 rounded" data-v-bdc8a033></div><div class="h-3 w-32 bg-slate-200 dark:bg-slate-700 rounded" data-v-bdc8a033></div></div></div><div class="space-y-3" data-v-bdc8a033><div class="h-4 w-20 bg-slate-200 dark:bg-slate-700 rounded" data-v-bdc8a033></div><div class="h-3 w-full bg-slate-200 dark:bg-slate-700 rounded" data-v-bdc8a033></div><div class="h-3 w-3/4 bg-slate-200 dark:bg-slate-700 rounded" data-v-bdc8a033></div><div class="flex justify-between items-center mt-4" data-v-bdc8a033><div class="h-6 w-16 bg-slate-200 dark:bg-slate-700 rounded-full" data-v-bdc8a033></div><div class="flex gap-2" data-v-bdc8a033><div class="h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded" data-v-bdc8a033></div><div class="h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded" data-v-bdc8a033></div></div></div></div>',2)]))),64)):(o(!0),r(f,{key:1},h(q.value.data,a=>{var _,$,A;return o(),r("div",{key:a.id,class:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-lg transition-shadow"},[t("div",fe,[t("div",he,[t("div",ke,[c(n(oe),{class:"h-6 w-6"})]),t("div",_e,[t("h3",we,i(a.title),1),t("p",ye,i((_=a.type)==null?void 0:_.replace("_"," ").replace(/\b\w/g,g=>g.toUpperCase())),1)])]),t("div",Ce,[c(n(ce),{class:"h-4 w-4 mr-1"}),v(" "+i(($=a.station)==null?void 0:$.name)+" - "+i((A=a.station)==null?void 0:A.frequency)+" FM ",1)]),t("div",Pe,[c(n(de),{class:"h-4 w-4 mr-1"}),v(" "+i(R(a.duration))+" program ",1)]),t("div",Se,[c(n(re),{class:"h-4 w-4 mr-1"}),v(" Studio "+i(a.studio),1)]),a.hosts&&a.hosts.length>0?(o(),r("div",Fe,[e[12]||(e[12]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400 mb-2"},"Hosts:",-1)),t("div",Me,[(o(!0),r(f,null,h(a.hosts,g=>(o(),r("span",{key:g.id,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300"},i(g.name),1))),128))])])):y("",!0),a.description?(o(),r("p",Ue,i(a.description),1)):y("",!0),t("div",Ve,[t("button",{onClick:g=>W(a),disabled:u.value==="toggle_program_status",class:I(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium disabled:opacity-50 transition-colors",a.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"])},[u.value==="toggle_program_status"?(o(),C(n(V),{key:0,class:"w-3 h-3 mr-1.5 animate-spin"})):(o(),r("div",{key:1,class:I(["w-1.5 h-1.5 rounded-full mr-1.5",a.status==="active"?"bg-green-500":"bg-slate-400"])},null,2)),v(" "+i(a.status==="active"?"Active":"Inactive"),1)],10,je),t("div",$e,[t("button",{onClick:g=>X(a),disabled:u.value==="update_program",class:"text-slate-400 hover:text-emerald-600 dark:hover:text-emerald-400 disabled:opacity-50 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"},[c(n(ie),{class:"h-4 w-4"})],8,Ae),t("button",{onClick:g=>Q(a),disabled:u.value==="delete_program",class:"text-slate-400 hover:text-red-600 dark:hover:text-red-400 disabled:opacity-50 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"},[c(n(ne),{class:"h-4 w-4"})],8,He)])])])])}),128))]),P.value||m.value?(o(),r("div",Ie,[t("div",De,[t("div",Ne,[t("div",qe,[t("h2",Be,i(m.value?"Edit Program":"Create New Program"),1),t("button",{onClick:F,class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"},[c(n(D),{class:"h-5 w-5"})])])]),t("div",ze,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Program Image",-1)),t("div",Te,[t("div",Le,[k.value?(o(),r("img",{key:0,src:k.value,alt:"Preview",class:"w-full h-full object-cover rounded-lg"},null,8,Re)):(o(),C(n(ue),{key:1,class:"h-8 w-8 text-slate-400"}))]),t("div",Ee,[t("input",{type:"file",ref:"imageInput",onChange:E,accept:"image/*",class:"hidden"},null,544),t("button",{onClick:e[1]||(e[1]=a=>s.$refs.imageInput.click()),type:"button",class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center justify-center gap-2"},[c(n(me),{class:"h-4 w-4"}),e[13]||(e[13]=v(" Choose Image "))]),e[14]||(e[14]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},"JPG, PNG up to 2MB",-1))])])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Program Title *",-1)),p(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.title=a),class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",placeholder:"e.g., Morning Vibes, Capital Jazz Hour",required:""},null,512),[[U,l.value.title]])]),t("div",Je,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Station *",-1)),p(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.station_id=a),class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",required:""},[e[17]||(e[17]=t("option",{value:""},"Choose station...",-1)),(o(!0),r(f,null,h(B.value,a=>(o(),r("option",{key:a.id,value:a.id},i(a.name)+" FM ",9,Ge))),128))],512),[[S,l.value.station_id]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Duration (min) *",-1)),p(t("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.duration=a),min:"1",max:"480",class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",placeholder:"60",required:""},null,512),[[U,l.value.duration]])])]),t("div",Oe,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Studio *",-1)),p(t("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.studio=a),class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",required:""},e[20]||(e[20]=[t("option",{value:"A"},"Studio A",-1),t("option",{value:"B"},"Studio B",-1),t("option",{value:"C"},"Studio C",-1),t("option",{value:"D"},"Studio D",-1)]),512),[[S,l.value.studio]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Type *",-1)),p(t("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>l.value.type=a),class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",required:""},e[22]||(e[22]=[H('<option value="live_show" data-v-bdc8a033>Live Show</option><option value="interview" data-v-bdc8a033>Interview</option><option value="podcast" data-v-bdc8a033>Podcast</option><option value="news" data-v-bdc8a033>News</option><option value="music" data-v-bdc8a033>Music</option><option value="talk_show" data-v-bdc8a033>Talk Show</option><option value="sports" data-v-bdc8a033>Sports</option><option value="special" data-v-bdc8a033>Special</option>',8)]),512),[[S,l.value.type]])])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Hosts",-1)),t("div",Xe,[l.value.selected_hosts.length>0?(o(),r("div",Ke,[t("div",Qe,[(o(!0),r(f,null,h(l.value.selected_hosts,a=>(o(),r("div",{key:a,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300"},[v(i(L(a))+" ",1),t("button",{onClick:_=>G(a),class:"ml-1 hover:bg-indigo-200 dark:hover:bg-indigo-800 rounded-full p-0.5"},[c(n(D),{class:"h-3 w-3"})],8,We)]))),128))])])):y("",!0),p(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>b.value=a),onChange:J,class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"},[e[24]||(e[24]=t("option",{value:""},"Add host...",-1)),(o(!0),r(f,null,h(T.value,a=>(o(),r("option",{key:a.id,value:a.id},i(a.name),9,Ye))),128))],544),[[S,b.value]])])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Description",-1)),p(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=a=>l.value.description=a),rows:"3",class:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",placeholder:"Program description..."},null,512),[[U,l.value.description]])]),t("div",null,[t("div",Ze,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=a=>l.value.status=a),"true-value":"active","false-value":"inactive",class:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-slate-300 dark:border-slate-600 rounded"},null,512),[[se,l.value.status]]),e[27]||(e[27]=t("label",{class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},"Active Program",-1))])])]),t("div",et,[t("button",{onClick:F,class:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors"}," Cancel "),t("button",{onClick:K,disabled:u.value==="create_program"||u.value==="update_program"||!z.value,class:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 text-white rounded-md text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors"},[u.value==="create_program"||u.value==="update_program"?(o(),C(n(V),{key:0,class:"h-4 w-4 animate-spin"})):y("",!0),v(" "+i(m.value?"Update":"Create"),1)],8,tt)])])])):y("",!0)]))}},bt=ee(at,[["__scopeId","data-v-bdc8a033"]]);export{bt as default};
