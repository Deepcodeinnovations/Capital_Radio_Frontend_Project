{"version":3,"file":"Sessions-CGnbWLl8.js","sources":["../../src/views/app/sessions/Sessions.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <!-- Header -->\r\n    <div class=\"flex justify-between items-center\">\r\n      <div>\r\n        <h1 class=\"text-2xl font-semibold text-slate-900 dark:text-white\">Radio Programs</h1>\r\n        <p class=\"text-sm text-slate-600 dark:text-slate-400 mt-1\">Create and manage your radio programs</p>\r\n      </div>\r\n      \r\n      <div class=\"flex items-center gap-3\">\r\n        <button \r\n          @click=\"showAddProgramModal = true\" \r\n          :disabled=\"loading === 'create_program'\"\r\n          class=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium disabled:opacity-50\"\r\n        >\r\n          <LoaderIcon v-if=\"loading === 'create_program'\" class=\"h-4 w-4 animate-spin\" />\r\n          <PlusIcon v-else class=\"h-4 w-4\" />\r\n          {{ loading === 'create_program' ? 'Creating...' : 'Create Program' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Programs Grid -->\r\n    <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n      <!-- Skeleton Loading Cards -->\r\n      <div v-if=\"loading === 'fetch_programs'\" v-for=\"n in 6\" :key=\"`skeleton-${n}`\" class=\"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6 animate-pulse\">\r\n        <div class=\"flex items-center mb-4\">\r\n          <div class=\"h-12 w-12 rounded-full bg-slate-200 dark:bg-slate-700 mr-3\"></div>\r\n          <div class=\"space-y-2\">\r\n            <div class=\"h-4 w-24 bg-slate-200 dark:bg-slate-700 rounded\"></div>\r\n            <div class=\"h-3 w-32 bg-slate-200 dark:bg-slate-700 rounded\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"space-y-3\">\r\n          <div class=\"h-4 w-20 bg-slate-200 dark:bg-slate-700 rounded\"></div>\r\n          <div class=\"h-3 w-full bg-slate-200 dark:bg-slate-700 rounded\"></div>\r\n          <div class=\"h-3 w-3/4 bg-slate-200 dark:bg-slate-700 rounded\"></div>\r\n          <div class=\"flex justify-between items-center mt-4\">\r\n            <div class=\"h-6 w-16 bg-slate-200 dark:bg-slate-700 rounded-full\"></div>\r\n            <div class=\"flex gap-2\">\r\n              <div class=\"h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded\"></div>\r\n              <div class=\"h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Actual Program Cards -->\r\n      <div v-else v-for=\"program in programs.data\" :key=\"program.id\" class=\"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-lg transition-shadow\">\r\n        <div class=\"p-6\">\r\n          <div class=\"flex items-center mb-4\">\r\n            <div class=\"h-12 w-12 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 font-bold text-lg mr-3\">\r\n              <RadioIcon class=\"h-6 w-6\" />\r\n            </div>\r\n            <div class=\"flex-1\">\r\n              <h3 class=\"text-lg font-semibold text-slate-900 dark:text-white\">{{ program.title }}</h3>\r\n              <p class=\"text-sm text-slate-500 dark:text-slate-400\">{{ program.type?.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase()) }}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Station Info -->\r\n          <div class=\"flex items-center text-sm text-slate-600 dark:text-slate-400 mb-3\">\r\n            <MapPinIcon class=\"h-4 w-4 mr-1\" />\r\n            {{ program.station?.name }} - {{ program.station?.frequency }} FM\r\n          </div>\r\n\r\n          <!-- Duration -->\r\n          <div class=\"flex items-center text-sm text-slate-600 dark:text-slate-400 mb-3\">\r\n            <ClockIcon class=\"h-4 w-4 mr-1\" />\r\n            {{ formatDuration(program.duration) }} program\r\n          </div>\r\n\r\n          <!-- Studio Info -->\r\n          <div class=\"flex items-center text-sm text-slate-600 dark:text-slate-400 mb-4\">\r\n            <MicIcon class=\"h-4 w-4 mr-1\" />\r\n            Studio {{ program.studio }}\r\n          </div>\r\n\r\n          <!-- Hosts Pills -->\r\n          <div v-if=\"program.hosts && program.hosts.length > 0\" class=\"mb-4\">\r\n            <p class=\"text-xs text-slate-500 dark:text-slate-400 mb-2\">Hosts:</p>\r\n            <div class=\"flex flex-wrap gap-1\">\r\n              <span v-for=\"host in program.hosts\" :key=\"host.id\" \r\n                class=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300\"\r\n              >\r\n                {{ host.name }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Description -->\r\n          <p v-if=\"program.description\" class=\"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-2\">{{ program.description }}</p>\r\n\r\n          <!-- Status and Actions -->\r\n          <div class=\"flex items-center justify-between\">\r\n            <button \r\n              @click=\"toggleProgramStatus(program)\"\r\n              :disabled=\"loading === 'toggle_program_status'\"\r\n              :class=\"[\r\n                'inline-flex items-center px-2 py-1 rounded-full text-xs font-medium disabled:opacity-50 transition-colors',\r\n                program.status === 'active' \r\n                  ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50' \r\n                  : 'bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600'\r\n              ]\"\r\n            >\r\n              <LoaderIcon v-if=\"loading === 'toggle_program_status'\" class=\"w-3 h-3 mr-1.5 animate-spin\" />\r\n              <div v-else\r\n                :class=\"[\r\n                  'w-1.5 h-1.5 rounded-full mr-1.5',\r\n                  program.status === 'active' ? 'bg-green-500' : 'bg-slate-400'\r\n                ]\"\r\n              ></div>\r\n              {{ program.status === 'active' ? 'Active' : 'Inactive' }}\r\n            </button>\r\n            \r\n            <div class=\"flex items-center gap-1\">\r\n              <button \r\n                @click=\"editProgram(program)\" \r\n                :disabled=\"loading === 'update_program'\"\r\n                class=\"text-slate-400 hover:text-emerald-600 dark:hover:text-emerald-400 disabled:opacity-50 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors\"\r\n              >\r\n                <EditIcon class=\"h-4 w-4\" />\r\n              </button>\r\n              <button \r\n                @click=\"deleteProgram(program)\" \r\n                :disabled=\"loading === 'delete_program'\"\r\n                class=\"text-slate-400 hover:text-red-600 dark:hover:text-red-400 disabled:opacity-50 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors\"\r\n              >\r\n                <TrashIcon class=\"h-4 w-4\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- Add/Edit Program Modal -->\r\n    <div v-if=\"showAddProgramModal || editingProgram\" class=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\r\n      <div class=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[85vh] flex flex-col\">\r\n        <!-- Fixed Header -->\r\n        <div class=\"p-4 border-b border-slate-200 dark:border-slate-700 flex-shrink-0\">\r\n          <div class=\"flex justify-between items-center\">\r\n            <h2 class=\"text-lg font-semibold text-slate-900 dark:text-white\">\r\n              {{ editingProgram ? 'Edit Program' : 'Create New Program' }}\r\n            </h2>\r\n            <button @click=\"closeModal\" class=\"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300\">\r\n              <XIcon class=\"h-5 w-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Scrollable Content -->\r\n        <div class=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n          <!-- Program Image Upload -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2\">Program Image</label>\r\n            <div class=\"flex items-center gap-4\">\r\n              <!-- Image Preview -->\r\n              <div class=\"w-20 h-20 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600 flex items-center justify-center bg-slate-50 dark:bg-slate-700/50 overflow-hidden\">\r\n                <img v-if=\"imagePreview\" :src=\"imagePreview\" alt=\"Preview\" class=\"w-full h-full object-cover rounded-lg\" />\r\n                <ImageIcon v-else class=\"h-8 w-8 text-slate-400\" />\r\n              </div>\r\n              \r\n              <!-- Upload Button -->\r\n              <div class=\"flex-1\">\r\n                <input \r\n                  type=\"file\" \r\n                  ref=\"imageInput\"\r\n                  @change=\"handleImageUpload\"\r\n                  accept=\"image/*\"\r\n                  class=\"hidden\"\r\n                />\r\n                <button \r\n                  @click=\"$refs.imageInput.click()\"\r\n                  type=\"button\"\r\n                  class=\"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center justify-center gap-2\"\r\n                >\r\n                  <UploadIcon class=\"h-4 w-4\" />\r\n                  Choose Image\r\n                </button>\r\n                <p class=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">JPG, PNG up to 2MB</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Program Title -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1\">Program Title *</label>\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"programForm.title\" \r\n              class=\"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm\" \r\n              placeholder=\"e.g., Morning Vibes, Capital Jazz Hour\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <!-- Station and Duration -->\r\n          <div class=\"grid grid-cols-2 gap-3\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1\">Station *</label>\r\n              <select \r\n                v-model=\"programForm.station_id\" \r\n                class=\"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm\"\r\n                required\r\n              >\r\n                <option value=\"\">Choose station...</option>\r\n                <option v-for=\"station in stations\" :key=\"station.id\" :value=\"station.id\">\r\n                  {{ station.name }} FM\r\n                </option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label class=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1\">Duration (min) *</label>\r\n              <input \r\n                type=\"number\" \r\n                v-model=\"programForm.duration\" \r\n                min=\"1\" \r\n                max=\"480\"\r\n                class=\"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm\" \r\n                placeholder=\"60\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Studio and Type -->\r\n          <div class=\"grid grid-cols-2 gap-3\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1\">Studio *</label>\r\n              <select \r\n                v-model=\"programForm.studio\" \r\n                class=\"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm\"\r\n                required\r\n              >\r\n                <option value=\"A\">Studio A</option>\r\n                <option value=\"B\">Studio B</option>\r\n                <option value=\"C\">Studio C</option>\r\n                <option value=\"D\">Studio D</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label class=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1\">Type *</label>\r\n              <select \r\n                v-model=\"programForm.type\" \r\n                class=\"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm\"\r\n                required\r\n              >\r\n                <option value=\"live_show\">Live Show</option>\r\n                <option value=\"interview\">Interview</option>\r\n                <option value=\"podcast\">Podcast</option>\r\n                <option value=\"news\">News</option>\r\n                <option value=\"music\">Music</option>\r\n                <option value=\"talk_show\">Talk Show</option>\r\n                <option value=\"sports\">Sports</option>\r\n                <option value=\"special\">Special</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Hosts Selection -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1\">Hosts</label>\r\n            <div class=\"border border-slate-300 dark:border-slate-600 rounded-lg p-3 bg-slate-50 dark:bg-slate-700/50\">\r\n              <!-- Selected Hosts -->\r\n              <div v-if=\"programForm.selected_hosts.length > 0\" class=\"mb-3\">\r\n                <div class=\"flex flex-wrap gap-1\">\r\n                  <div v-for=\"hostId in programForm.selected_hosts\" :key=\"hostId\" \r\n                    class=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300\"\r\n                  >\r\n                    {{ getHostName(hostId) }}\r\n                    <button @click=\"removeHost(hostId)\" class=\"ml-1 hover:bg-indigo-200 dark:hover:bg-indigo-800 rounded-full p-0.5\">\r\n                      <XIcon class=\"h-3 w-3\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <!-- Add Host -->\r\n              <select \r\n                v-model=\"selectedHostToAdd\" \r\n                @change=\"addHost\"\r\n                class=\"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm\"\r\n              >\r\n                <option value=\"\">Add host...</option>\r\n                <option v-for=\"host in availableHosts\" :key=\"host.id\" :value=\"host.id\">\r\n                  {{ host.name }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Description -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1\">Description</label>\r\n            <textarea \r\n              v-model=\"programForm.description\" \r\n              rows=\"3\" \r\n              class=\"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm\" \r\n              placeholder=\"Program description...\"\r\n            ></textarea>\r\n          </div>\r\n\r\n          <!-- Status -->\r\n          <div>\r\n            <div class=\"flex items-center\">\r\n              <input \r\n                type=\"checkbox\" \r\n                v-model=\"programForm.status\" \r\n                :true-value=\"'active'\"\r\n                :false-value=\"'inactive'\"\r\n                class=\"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-slate-300 dark:border-slate-600 rounded\"\r\n              />\r\n              <label class=\"ml-2 text-sm text-slate-700 dark:text-slate-300\">Active Program</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Fixed Footer -->\r\n        <div class=\"p-4 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3 flex-shrink-0\">\r\n          <button \r\n            @click=\"closeModal\" \r\n            class=\"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button \r\n            @click=\"saveProgram\" \r\n            :disabled=\"loading === 'create_program' || loading === 'update_program' || !isFormValid\"\r\n            class=\"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 text-white rounded-md text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors\"\r\n          >\r\n            <LoaderIcon v-if=\"loading === 'create_program' || loading === 'update_program'\" class=\"h-4 w-4 animate-spin\" />\r\n            {{ editingProgram ? 'Update' : 'Create' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport {\r\n  Plus as PlusIcon,\r\n  Edit as EditIcon,\r\n  Trash as TrashIcon,\r\n  X as XIcon,\r\n  Loader as LoaderIcon,\r\n  Radio as RadioIcon,\r\n  MapPin as MapPinIcon,\r\n  Mic as MicIcon,\r\n  Clock as ClockIcon,\r\n  Image as ImageIcon,\r\n  Upload as UploadIcon\r\n} from 'lucide-vue-next';\r\n\r\nconst store = useStore();\r\n\r\n// Computed properties from store\r\nconst programs = computed(() => store.getters.programs);\r\nconst stations = computed(() => store.getters.stations);\r\nconst hosts = computed(() => store.getters.hosts);\r\nconst loading = computed(() => store.getters.loading);\r\n\r\n// Modal states\r\nconst showAddProgramModal = ref(false);\r\nconst editingProgram = ref(null);\r\nconst selectedHostToAdd = ref('');\r\nconst imagePreview = ref('');\r\n\r\n// Form data\r\nconst programForm = ref({\r\n  title: '',\r\n  station_id: '',\r\n  duration: 60,\r\n  studio: 'A',\r\n  type: 'live_show',\r\n  description: '',\r\n  status: 'active',\r\n  selected_hosts: [],\r\n  image: null\r\n});\r\n\r\n// Form validation\r\nconst isFormValid = computed(() => {\r\n  return programForm.value.title && \r\n         programForm.value.station_id && \r\n         programForm.value.duration > 0;\r\n});\r\n\r\n// Available hosts for selection\r\nconst availableHosts = computed(() => {\r\n  return hosts.value.data.filter(host => !programForm.value.selected_hosts.includes(host.id));\r\n});\r\n\r\n// Helper functions\r\nconst getHostName = (hostId) => {\r\n  const host = hosts.value.data.find(h => h.id === hostId);\r\n  return host ? host.name : 'Unknown Host';\r\n};\r\n\r\nconst formatDuration = (duration) => {\r\n  if (!duration) return 'Unknown';\r\n  const hours = Math.floor(duration / 60);\r\n  const minutes = duration % 60;\r\n  if (hours > 0) {\r\n    return `${hours}h ${minutes}m`;\r\n  }\r\n  return `${minutes}m`;\r\n};\r\n\r\nconst handleImageUpload = (event) => {\r\n  const file = event.target.files[0];\r\n  if (file) {\r\n    if (file.size > 2 * 1024 * 1024) {\r\n      store.dispatch('template_play_error_file', 'Image size must be less than 2MB');\r\n      return;\r\n    }\r\n    \r\n    programForm.value.image = file;\r\n    \r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      imagePreview.value = e.target.result;\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }\r\n};\r\n\r\nconst addHost = () => {\r\n  if (selectedHostToAdd.value && !programForm.value.selected_hosts.includes(selectedHostToAdd.value)) {\r\n    programForm.value.selected_hosts.push(selectedHostToAdd.value);\r\n    selectedHostToAdd.value = '';\r\n  }\r\n};\r\n\r\nconst removeHost = (hostId) => {\r\n  programForm.value.selected_hosts = programForm.value.selected_hosts.filter(id => id !== hostId);\r\n};\r\n\r\n// Reset form\r\nconst resetForm = () => {\r\n  programForm.value = {\r\n    title: '',\r\n    station_id: '',\r\n    duration: 60,\r\n    studio: 'A',\r\n    type: 'live_show',\r\n    description: '',\r\n    status: 'active',\r\n    selected_hosts: [],\r\n    image: null\r\n  };\r\n  selectedHostToAdd.value = '';\r\n  imagePreview.value = '';\r\n};\r\n\r\n// Edit program\r\nconst editProgram = (program) => {\r\n  programForm.value = { \r\n    ...program,\r\n    selected_hosts: program.hosts ? program.hosts.map(h => h.id) : [],\r\n    image: null\r\n  };\r\n  imagePreview.value = program.image_url || '';\r\n  editingProgram.value = program;\r\n  showAddProgramModal.value = true;\r\n};\r\n\r\n// Close modal\r\nconst closeModal = () => {\r\n  showAddProgramModal.value = false;\r\n  editingProgram.value = null;\r\n  resetForm();\r\n};\r\n\r\n// Save program\r\nconst saveProgram = async () => {\r\n  try {\r\n    const formData = new FormData();\r\n    \r\n    // Append all form fields\r\n    Object.keys(programForm.value).forEach(key => {\r\n      if (key === 'selected_hosts') {\r\n        formData.append('host_ids', JSON.stringify(programForm.value[key]));\r\n      } else if (key === 'image' && programForm.value[key]) {\r\n        formData.append('image', programForm.value[key]);\r\n      } else if (key !== 'image' && programForm.value[key] !== null && programForm.value[key] !== undefined) {\r\n        formData.append(key, programForm.value[key]);\r\n      }\r\n    });\r\n    \r\n    if (editingProgram.value) {\r\n      await store.dispatch('update_program', {\r\n        programId: editingProgram.value.id,\r\n        data: formData\r\n      });\r\n    } else {\r\n      await store.dispatch('create_program', formData);\r\n    }\r\n    \r\n    await fetchPrograms();\r\n    closeModal();\r\n    \r\n    if (editingProgram.value) {\r\n      store.dispatch('template_play_success_file', 'Program updated successfully');\r\n    } else {\r\n      store.dispatch('template_play_success_file', 'Program created successfully');\r\n    }\r\n  } catch (error) {\r\n    console.error('Failed to save program:', error);\r\n    store.dispatch('template_play_error_file', 'Failed to save program');\r\n  }\r\n};\r\n\r\n// Delete program\r\nconst deleteProgram = async (program) => {\r\n  if (confirm(`Are you sure you want to delete \"${program.title}\"?`)) {\r\n    try {\r\n      await store.dispatch('delete_program', {\r\n        id: program.id,\r\n        data: {}\r\n      });\r\n      \r\n      await fetchPrograms();\r\n      store.dispatch('template_play_delete_file', 'Program deleted successfully');\r\n    } catch (error) {\r\n      console.error('Failed to delete program:', error);\r\n      store.dispatch('template_play_error_file', 'Failed to delete program');\r\n    }\r\n  }\r\n};\r\n\r\n// Toggle program status\r\nconst toggleProgramStatus = async (program) => {\r\n  try {\r\n    const newStatus = program.status === 'active' ? 'inactive' : 'active';\r\n    \r\n    await store.dispatch('toggle_program_status', {\r\n      id: program.id,\r\n      data: { status: newStatus }\r\n    });\r\n    \r\n    // Update local state\r\n    program.status = newStatus;\r\n    store.dispatch('template_play_success_file', 'Program status updated');\r\n  } catch (error) {\r\n    console.error('Failed to toggle program status:', error);\r\n    store.dispatch('template_play_error_file', 'Failed to update program status');\r\n  }\r\n};\r\n\r\n// Fetch data\r\nconst fetchPrograms = async () => {\r\n  try {\r\n    await store.dispatch('fetch_programs', {\r\n      data: { per_page: 20 },\r\n      page: 1\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch programs:', error);\r\n  }\r\n};\r\n\r\nconst fetchStations = async () => {\r\n  try {\r\n    await store.dispatch('fetch_stations', {\r\n      data: { per_page: 50 },\r\n      page: 1\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch stations:', error);\r\n  }\r\n};\r\n\r\nconst fetchHosts = async () => {\r\n  try {\r\n    await store.dispatch('fetch_hosts', {\r\n      data: { per_page: 50 },\r\n      page: 1\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch hosts:', error);\r\n  }\r\n};\r\n\r\n// Initialize component\r\nonMounted(async () => {\r\n  try {\r\n    await Promise.all([\r\n      fetchPrograms(),\r\n      fetchStations(),\r\n      fetchHosts()\r\n    ]);\r\n  } catch (error) {\r\n    console.error('Failed to initialize radio programs:', error);\r\n    store.dispatch('template_play_error_file', 'Failed to load radio programs data');\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.line-clamp-2 {\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n</style>"],"names":["store","useStore","programs","computed","stations","hosts","loading","showAddProgramModal","ref","editingProgram","selectedHostToAdd","imagePreview","programForm","isFormValid","availableHosts","host","getHostName","hostId","h","formatDuration","duration","hours","minutes","handleImageUpload","event","file","reader","e","addHost","removeHost","id","resetForm","editProgram","program","closeModal","saveProgram","formData","key","fetchPrograms","error","deleteProgram","toggleProgramStatus","newStatus","fetchStations","fetchHosts","onMounted"],"mappings":"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"}