{"version":3,"file":"Forums-C11i5AlZ.js","sources":["../../src/views/app/forums/Forums.vue"],"sourcesContent":["<template>\r\n  <div class=\"\">\r\n    <!-- Header -->\r\n    <div class=\"flex justify-between items-center mb-6\">\r\n      <h2 class=\"text-2xl font-bold text-gray-900 dark:text-white\">Forums Management</h2>\r\n      <button\r\n        @click=\"openCreateModal\"\r\n        class=\"bg-gradient-to-r from-purple-600 to-orange-500 hover:from-purple-700 hover:to-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center\"\r\n      >\r\n        <PlusIcon class=\"w-5 h-5 mr-2\" />\r\n        Create Forum\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Filters -->\r\n    <div class=\"mb-6 flex flex-wrap gap-4\">\r\n      <select\r\n        v-model=\"filters.station_id\"\r\n        @change=\"fetchForums\"\r\n        class=\"px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n      >\r\n        <option value=\"\">All Stations</option>\r\n        <option v-for=\"station in stations\" :key=\"station.id\" :value=\"station.id\">{{ station.name }}</option>\r\n      </select>\r\n\r\n      <select\r\n        v-model=\"filters.status\"\r\n        @change=\"fetchForums\"\r\n        class=\"px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n      >\r\n        <option value=\"\">All Status</option>\r\n        <option value=\"1\">Active</option>\r\n        <option value=\"0\">Inactive</option>\r\n      </select>\r\n    </div>\r\n\r\n    <!-- Loading State -->\r\n    <div v-if=\"loading === 'fetchForums'\" class=\"flex justify-center py-8\">\r\n      <LoaderIcon class=\"w-8 h-8 animate-spin text-purple-600\" />\r\n    </div>\r\n\r\n    <!-- Forums List -->\r\n    <div v-else-if=\"forums?.data?.length\" class=\"space-y-4\">\r\n      <div\r\n        v-for=\"forum in forums.data\"\r\n        :key=\"forum.id\"\r\n        class=\"bg-gray-50 dark:bg-slate-700 rounded-lg p-4 border border-gray-200 dark:border-slate-600\"\r\n      >\r\n        <div class=\"flex justify-between items-start\">\r\n          <div class=\"flex-1\">\r\n            <router-link :to=\"{ name: 'ForumDetails', params: { id: forum.id } }\" class=\"flex items-center gap-3 mb-2\">\r\n              <h3 class=\"font-semibold text-gray-900 dark:text-white\">{{ forum.title }}</h3>\r\n              <span\r\n                :class=\"forum.status ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300' : 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300'\"\r\n                class=\"px-2 py-1 rounded-full text-xs font-medium\"\r\n              >\r\n                {{ forum.status ? 'Active' : 'Inactive' }}\r\n              </span>\r\n              <span class=\"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 px-2 py-1 rounded-full text-xs font-medium\">\r\n                {{ getStationName(forum.station_id) }}\r\n              </span>\r\n            </router-link>\r\n            <p class=\"text-gray-600 dark:text-gray-300 text-sm line-clamp-2\">{{ forum.body }}</p>\r\n            <div class=\"flex items-center gap-4 mt-2 text-xs text-gray-500 dark:text-gray-400\">\r\n              <span>Created: {{ formatDate(forum.created_at) }}</span>\r\n              <span>Comments: {{ forum.comments_count || 0 }}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"flex items-center gap-2 ml-4\">\r\n            <!-- Status Toggle -->\r\n            <button\r\n              @click=\"toggleStatus(forum)\"\r\n              :disabled=\"loading === 'updateForum'\"\r\n              class=\"p-2 rounded-lg transition-colors\"\r\n              :class=\"forum.status \r\n                ? 'text-green-600 hover:bg-green-100 dark:hover:bg-green-900' \r\n                : 'text-red-600 hover:bg-red-100 dark:hover:bg-red-900'\"\r\n            >\r\n              <ToggleLeftIcon v-if=\"!forum.status\" class=\"w-5 h-5\" />\r\n              <ToggleRightIcon v-else class=\"w-5 h-5\" />\r\n            </button>\r\n\r\n            <!-- Edit Button -->\r\n            <button\r\n              @click=\"openEditModal(forum)\"\r\n              class=\"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900 rounded-lg transition-colors\"\r\n            >\r\n              <EditIcon class=\"w-5 h-5\" />\r\n            </button>\r\n\r\n            <!-- Delete Button -->\r\n            <button\r\n              @click=\"confirmDelete(forum)\"\r\n              class=\"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors\"\r\n            >\r\n              <TrashIcon class=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Pagination -->\r\n      <div v-if=\"forums.total > forums.per_page\" class=\"flex justify-center mt-6\">\r\n        <nav class=\"flex items-center gap-2\">\r\n          <button\r\n            v-for=\"page in paginationPages\"\r\n            :key=\"page\"\r\n            @click=\"changePage(page)\"\r\n            :disabled=\"page === forums.current_page\"\r\n            class=\"px-3 py-2 rounded-lg text-sm font-medium transition-colors\"\r\n            :class=\"page === forums.current_page \r\n              ? 'bg-purple-600 text-white' \r\n              : 'text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600'\"\r\n          >\r\n            {{ page }}\r\n          </button>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Empty State -->\r\n    <div v-else class=\"text-center py-12\">\r\n      <MessageSquareIcon class=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n      <h3 class=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">No forums found</h3>\r\n      <p class=\"text-gray-600 dark:text-gray-400\">Create your first forum to get started</p>\r\n    </div>\r\n\r\n    <!-- Create/Edit Modal -->\r\n    <div\r\n      v-if=\"showModal\"\r\n      class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\r\n      @click=\"closeModal\"\r\n    >\r\n      <div\r\n        @click.stop\r\n        class=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4\"\r\n      >\r\n        <div class=\"flex justify-between items-center p-6 border-b border-gray-200 dark:border-slate-600\">\r\n          <h3 class=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n            {{ editingForum ? 'Edit Forum' : 'Create Forum' }}\r\n          </h3>\r\n          <button @click=\"closeModal\" class=\"text-gray-400 hover:text-gray-600\">\r\n            <XIcon class=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <form @submit.prevent=\"submitForm\" class=\"p-6 space-y-4\">\r\n          <!-- Station Selection -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Radio Station\r\n            </label>\r\n            <select\r\n              v-model=\"form.station_id\"\r\n              required\r\n              class=\"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n            >\r\n              <option value=\"\">Select Station</option>\r\n              <option v-for=\"station in stations\" :key=\"station.id\" :value=\"station.id\">{{ station.name }}</option>\r\n            </select>\r\n          </div>\r\n\r\n          <!-- Title -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Title\r\n            </label>\r\n            <input\r\n              v-model=\"form.title\"\r\n              type=\"text\"\r\n              required\r\n              class=\"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n              placeholder=\"Enter forum title\"\r\n            />\r\n          </div>\r\n\r\n          <!-- Body -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Description\r\n            </label>\r\n            <textarea\r\n              v-model=\"form.body\"\r\n              required\r\n              rows=\"4\"\r\n              class=\"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n              placeholder=\"Enter forum description\"\r\n            ></textarea>\r\n          </div>\r\n\r\n          <!-- Status -->\r\n          <div>\r\n            <label class=\"flex items-center\">\r\n              <input\r\n                v-model=\"form.status\"\r\n                type=\"checkbox\"\r\n                class=\"rounded border-gray-300 text-purple-600 focus:ring-purple-500\"\r\n              />\r\n              <span class=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">Active</span>\r\n            </label>\r\n          </div>\r\n\r\n          <!-- Actions -->\r\n          <div class=\"flex justify-end gap-3 pt-4\">\r\n            <button\r\n              type=\"button\"\r\n              @click=\"closeModal\"\r\n              class=\"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              :disabled=\"loading === 'createForum' || loading === 'updateForum'\"\r\n              class=\"bg-gradient-to-r from-purple-600 to-orange-500 hover:from-purple-700 hover:to-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center\"\r\n            >\r\n              <LoaderIcon v-if=\"loading === 'createForum' || loading === 'updateForum'\" class=\"w-4 h-4 mr-2 animate-spin\" />\r\n              {{ editingForum ? 'Update' : 'Create' }}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Delete Confirmation Modal -->\r\n    <div\r\n      v-if=\"showDeleteModal\"\r\n      class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\r\n      @click=\"showDeleteModal = false\"\r\n    >\r\n      <div\r\n        @click.stop\r\n        class=\"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4\"\r\n      >\r\n        <div class=\"p-6\">\r\n          <div class=\"flex items-center mb-4\">\r\n            <AlertTriangleIcon class=\"w-6 h-6 text-red-600 mr-3\" />\r\n            <h3 class=\"text-lg font-semibold text-gray-900 dark:text-white\">Delete Forum</h3>\r\n          </div>\r\n          <p class=\"text-gray-600 dark:text-gray-300 mb-6\">\r\n            Are you sure you want to delete \"{{ forumToDelete?.title }}\"? This action cannot be undone.\r\n          </p>\r\n          <div class=\"flex justify-end gap-3\">\r\n            <button\r\n              @click=\"showDeleteModal = false\"\r\n              class=\"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              @click=\"deleteForum\"\r\n              :disabled=\"loading === 'deleteForum'\"\r\n              class=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center\"\r\n            >\r\n              <LoaderIcon v-if=\"loading === 'deleteForum'\" class=\"w-4 h-4 mr-2 animate-spin\" />\r\n              Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport {\r\n  Plus as PlusIcon,\r\n  Edit as EditIcon,\r\n  Trash as TrashIcon,\r\n  X as XIcon,\r\n  Loader as LoaderIcon,\r\n  MessageSquare as MessageSquareIcon,\r\n  AlertTriangle as AlertTriangleIcon,\r\n  ToggleLeft as ToggleLeftIcon,\r\n  ToggleRight as ToggleRightIcon\r\n} from 'lucide-vue-next';\r\n\r\nconst store = useStore();\r\n\r\n// Reactive data\r\nconst showModal = ref(false);\r\nconst showDeleteModal = ref(false);\r\nconst editingForum = ref(null);\r\nconst forumToDelete = ref(null);\r\nconst filters = ref({\r\n  station_id: '',\r\n  status: '',\r\n  page: 1\r\n});\r\n\r\nconst form = ref({\r\n  title: '',\r\n  body: '',\r\n  station_id: '',\r\n  status: true\r\n});\r\n\r\n// Computed properties\r\nconst forums = computed(() => store.getters.forums);\r\nconst loading = computed(() => store.getters.loading);\r\nconst stations = computed(() => store.getters.stations || []);\r\nconst paginationPages = computed(() => {\r\n  if (!forums.value?.last_page) return [];\r\n  const pages = [];\r\n  for (let i = 1; i <= forums.value.last_page; i++) {\r\n    pages.push(i);\r\n  }\r\n  return pages;\r\n});\r\n\r\n// Methods\r\nconst getStationName = (stationId) => {\r\n  const station = stations.value.find(s => s.id === stationId);\r\n  return station ? station.name : 'Unknown Station';\r\n};\r\n\r\nconst fetchStations = async () => {\r\n  let data = {\r\n    per_page: 100\r\n  }\r\n  let page = 1\r\n  try {\r\n    await store.dispatch('fetch_stations', {\r\n      data,\r\n      page\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch stations:', error);\r\n    store.dispatch('template_play_error_file', 'Failed to load stations');\r\n  }\r\n};\r\n\r\nconst fetchForums = async () => {\r\n  await store.dispatch('fetchForums', filters.value);\r\n};\r\n\r\nconst formatDate = (dateString) => {\r\n  return new Date(dateString).toLocaleDateString();\r\n};\r\n\r\nconst openCreateModal = () => {\r\n  editingForum.value = null;\r\n  form.value = {\r\n    title: '',\r\n    body: '',\r\n    station_id: '',\r\n    status: true\r\n  };\r\n  showModal.value = true;\r\n};\r\n\r\nconst openEditModal = (forum) => {\r\n  editingForum.value = forum;\r\n  form.value = {\r\n    title: forum.title,\r\n    body: forum.body,\r\n    station_id: forum.station_id,\r\n    status: forum.status\r\n  };\r\n  showModal.value = true;\r\n};\r\n\r\nconst closeModal = () => {\r\n  showModal.value = false;\r\n  editingForum.value = null;\r\n};\r\n\r\nconst submitForm = async () => {\r\n  try {\r\n    if (editingForum.value) {\r\n      await store.dispatch('updateForum', {\r\n        id: editingForum.value.id,\r\n        data: form.value\r\n      });\r\n    } else {\r\n      await store.dispatch('createForum', form.value);\r\n    }\r\n    closeModal();\r\n    await fetchForums();\r\n  } catch (error) {\r\n    console.error('Error submitting form:', error);\r\n  }\r\n};\r\n\r\nconst toggleStatus = async (forum) => {\r\n  try {\r\n    await store.dispatch('updateForum', {\r\n      id: forum.id,\r\n      data: { ...forum, status: !forum.status }\r\n    });\r\n    await fetchForums();\r\n  } catch (error) {\r\n    console.error('Error toggling status:', error);\r\n  }\r\n};\r\n\r\nconst confirmDelete = (forum) => {\r\n  forumToDelete.value = forum;\r\n  showDeleteModal.value = true;\r\n};\r\n\r\nconst deleteForum = async () => {\r\n  try {\r\n    await store.dispatch('deleteForum', forumToDelete.value.id);\r\n    showDeleteModal.value = false;\r\n    forumToDelete.value = null;\r\n    await fetchForums();\r\n  } catch (error) {\r\n    console.error('Error deleting forum:', error);\r\n  }\r\n};\r\n\r\nconst changePage = async (page) => {\r\n  filters.value.page = page;\r\n  await fetchForums();\r\n};\r\n\r\n// Lifecycle\r\nonMounted(() => {\r\n  fetchForums();\r\n  fetchStations();\r\n});\r\n</script>"],"names":["store","useStore","showModal","ref","showDeleteModal","editingForum","forumToDelete","filters","form","forums","computed","loading","stations","paginationPages","_a","pages","i","getStationName","stationId","station","s","fetchStations","data","page","error","fetchForums","formatDate","dateString","openCreateModal","openEditModal","forum","closeModal","submitForm","toggleStatus","confirmDelete","deleteForum","changePage","onMounted"],"mappings":"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"}