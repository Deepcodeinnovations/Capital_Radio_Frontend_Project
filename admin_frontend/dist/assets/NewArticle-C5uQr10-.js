import{_ as ee,e as te,A as re,u as ae,i as U,g as m,w as F,h as le,r as j,c as i,o as s,b as t,d as C,t as x,m as R,p as B,k as G,y as oe,l as d,v as n,I as L,F as I,C as S,s as se,j as A,x as E}from"./index-H5beSXt9.js";import{A as de}from"./arrow-left-BlC2RKWX.js";import{N as ie}from"./newspaper-BYIiXVB8.js";import"./createLucideIcon-DKNoFLvU.js";const ue={class:"p-6 space-y-6"},ne={class:"flex items-center justify-between"},ge={class:"text-2xl font-bold text-gray-900 dark:text-white"},me={class:"text-sm text-gray-600 dark:text-gray-400"},ce={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},be={class:"space-y-4"},ye={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pe={class:"md:col-span-2"},fe=["value"],xe=["value"],ve={class:"space-y-4"},ke={class:"space-y-4"},we={class:"grid grid-cols-1 gap-4"},he={class:"space-y-4"},_e={class:"flex items-center space-x-6"},Ue={class:"h-32 w-32 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600 relative"},Ce=["src"],Ie={class:"flex-1"},Se={class:"flex items-center space-x-3"},Ae={for:"featured-image",class:"cursor-pointer bg-white dark:bg-gray-700 py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none"},Ee={class:"space-y-4"},Ve={class:"flex items-center space-x-3"},Ne={for:"gallery-images",class:"cursor-pointer bg-white dark:bg-gray-700 py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none"},Fe={key:0,class:"grid grid-cols-4 gap-4"},je=["src"],Re=["onClick"],Be=["src"],Ge=["onClick"],Le={class:"space-y-4"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Oe={class:"md:col-span-2"},Te={class:"md:col-span-2 space-y-3"},Pe={class:"flex items-center"},De={class:"flex items-center"},$e={class:"flex items-center"},Je={class:"space-y-4"},We={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700"},qe=["disabled"],ze={__name:"NewArticle",setup(He){const V=te(),v=re(),u=ae(),k=U(()=>u.getters.loading),M=U(()=>u.getters.categories||[]),O=U(()=>u.getters.stations||[]),y=U(()=>!!v.params.id),r=m({title:"",summary:"",excerpt:"",content:"",meta_title:"",meta_description:"",meta_keywords:"",category_id:"",station_id:"",source:"",source_url:"",priority:0,is_published:!1,is_featured:!1,is_breaking:!1,featured_image_url:"",gallery_images:[]}),c=m(null),g=m([]),b=m(""),p=m([]),f=m(""),w=m(!1),T=m({height:300,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],placeholder:"Write your article content here...",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica","Impact","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],callbacks:{onImageUpload:function(a){for(let e=0;e<a.length;e++){const o=a[e],h=new FileReader;h.onload=(function(l){$(this).summernote("insertImage",l.target.result)}).bind(this),h.readAsDataURL(o)}}}}),P=a=>{r.value.content=a},D=a=>{const e=a.target.files[0];e&&(c.value=e,b.value=URL.createObjectURL(e))},J=()=>{r.value.featured_image_url="",b.value="",c.value=null;const a=document.getElementById("featured-image");a&&(a.value="")},W=()=>{c.value=null,b.value=r.value.featured_image_url||"";const a=document.getElementById("featured-image");a&&(a.value="")},q=a=>{const e=Array.from(a.target.files);r.value.gallery_images&&r.value.gallery_images.length>0&&g.value.length===0&&(w.value=!0),g.value=[...g.value,...e],e.forEach(o=>{p.value.push(URL.createObjectURL(o))})},z=a=>{URL.revokeObjectURL(p.value[a]),p.value.splice(a,1),g.value.splice(a,1);const e=document.getElementById("gallery-images");e&&(e.value="")},H=async a=>{if(confirm("Are you sure you want to remove this image?"))try{await u.dispatch("removegalleryimage",{articleId:v.params.id,imageId:a}),await N()}catch(e){console.error("Error removing gallery image:",e)}},K=()=>{p.value.forEach(e=>URL.revokeObjectURL(e)),p.value=[],g.value=[],r.value.gallery_images=[],w.value=!0;const a=document.getElementById("gallery-images");a&&(a.value="")},N=async()=>{var a,e;if(y.value)try{await u.dispatch("fetcharticle",v.params.id);const o=u.getters.article;o&&(r.value={...o,category_id:((a=o.category)==null?void 0:a.id)||"",station_id:((e=o.station)==null?void 0:e.id)||""},b.value=o.featured_image_url||"",o.tags&&(f.value=o.tags.join(", ")))}catch(o){console.error("Error fetching article:",o),V.push({name:"News"})}},Q=async()=>{try{await u.dispatch("fetchcategories")}catch(a){console.error("Error fetching categories:",a)}},X=async()=>{let a={per_page:100},e=1;try{await u.dispatch("fetch_stations",{data:a,page:e})}catch(o){console.error("Failed to fetch stations:",o),u.dispatch("template_play_error_file","Failed to load stations")}},Y=async()=>{try{const a=new FormData;if(Object.keys(r.value).forEach(e=>{e!=="gallery_images"&&r.value[e]!==null&&r.value[e]!==""&&(typeof r.value[e]=="boolean"?a.append(e,r.value[e]?"true":"false"):a.append(e,r.value[e]))}),f.value){const e=f.value.split(",").map(o=>o.trim()).filter(o=>o);a.append("tags",JSON.stringify(e))}c.value&&a.append("featured_image",c.value),g.value.length>0&&(g.value.forEach((e,o)=>{a.append(`gallery_image_${o}`,e)}),w.value&&a.append("replace_gallery","true")),y.value?await u.dispatch("updatearticle",{id:v.params.id,data:a}):await u.dispatch("createarticle",a),V.push({name:"News"})}catch(a){console.error("Error saving article:",a)}};return F(()=>r.value.title,a=>{r.value.meta_title||(r.value.meta_title=a)}),F(()=>r.value.summary,a=>{r.value.meta_description||(r.value.meta_description=a)}),le(()=>{Q(),X(),y.value&&N()}),(a,e)=>{const o=j("router-link"),h=j("SummernoteEditor");return s(),i("div",ue,[t("div",ne,[t("div",null,[t("h1",ge,x(y.value?"Edit News Article":"Add News Article"),1),t("p",me,x(y.value?"Update your news article":"Create a new news article for your network"),1)]),C(o,{to:{name:"News"},class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 flex items-center"},{default:R(()=>[C(G(de),{class:"h-4 w-4 mr-1"}),e[16]||(e[16]=B(" Back to News ",-1))]),_:1,__:[16]})]),t("div",ce,[t("form",{onSubmit:oe(Y,["prevent"]),class:"space-y-6"},[t("div",be,[e[22]||(e[22]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Article Information",-1)),t("div",ye,[t("div",pe,[e[17]||(e[17]=t("label",{for:"title",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Article Title*",-1)),d(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=l=>r.value.title=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g. New Music Festival Coming This Summer"},null,512),[[n,r.value.title]])]),t("div",null,[e[19]||(e[19]=t("label",{for:"category_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Category",-1)),d(t("select",{id:"category_id","onUpdate:modelValue":e[1]||(e[1]=l=>r.value.category_id=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"},[e[18]||(e[18]=t("option",{value:""},"Select a category",-1)),(s(!0),i(I,null,S(M.value,l=>(s(),i("option",{key:l.id,value:l.id},x(l.name),9,fe))),128))],512),[[L,r.value.category_id]])]),t("div",null,[e[21]||(e[21]=t("label",{for:"station_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Station",-1)),d(t("select",{id:"station_id","onUpdate:modelValue":e[2]||(e[2]=l=>r.value.station_id=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"},[e[20]||(e[20]=t("option",{value:""},"Select a station",-1)),(s(!0),i(I,null,S(O.value,l=>(s(),i("option",{key:l.id,value:l.id},x(l.name),9,xe))),128))],512),[[L,r.value.station_id]])])])]),t("div",ve,[e[27]||(e[27]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Article Content",-1)),t("div",null,[e[23]||(e[23]=t("label",{for:"summary",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Summary",-1)),d(t("textarea",{id:"summary","onUpdate:modelValue":e[3]||(e[3]=l=>r.value.summary=l),rows:"2",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"A brief summary of the article..."},null,512),[[n,r.value.summary]])]),t("div",null,[e[24]||(e[24]=t("label",{for:"excerpt",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Excerpt",-1)),d(t("textarea",{id:"excerpt","onUpdate:modelValue":e[4]||(e[4]=l=>r.value.excerpt=l),rows:"2",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Short excerpt for article previews..."},null,512),[[n,r.value.excerpt]])]),t("div",null,[e[25]||(e[25]=t("label",{for:"content",class:"block text-sm font-medium text-white dark:text-gray-300 mb-1"},"Full Content*",-1)),C(h,{modelValue:r.value.content,"onUpdate:modelValue":e[5]||(e[5]=l=>r.value.content=l),config:T.value,class:"summernote-editor bg-white",onInput:P},null,8,["modelValue","config"]),e[26]||(e[26]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Write your full article content",-1))])]),t("div",ke,[e[31]||(e[31]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"SEO Settings",-1)),t("div",we,[t("div",null,[e[28]||(e[28]=t("label",{for:"meta_title",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Meta Title",-1)),d(t("input",{id:"meta_title","onUpdate:modelValue":e[6]||(e[6]=l=>r.value.meta_title=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"SEO title (defaults to article title)"},null,512),[[n,r.value.meta_title]])]),t("div",null,[e[29]||(e[29]=t("label",{for:"meta_description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Meta Description",-1)),d(t("textarea",{id:"meta_description","onUpdate:modelValue":e[7]||(e[7]=l=>r.value.meta_description=l),rows:"2",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"SEO description (defaults to summary)"},null,512),[[n,r.value.meta_description]])]),t("div",null,[e[30]||(e[30]=t("label",{for:"meta_keywords",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Meta Keywords",-1)),d(t("input",{id:"meta_keywords","onUpdate:modelValue":e[8]||(e[8]=l=>r.value.meta_keywords=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"SEO keywords, comma separated"},null,512),[[n,r.value.meta_keywords]])])])]),t("div",he,[e[35]||(e[35]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Featured Image",-1)),t("div",_e,[t("div",Ue,[b.value?(s(),i("img",{key:0,src:b.value,class:"h-full w-full object-cover rounded-lg",alt:"Featured image"},null,8,Ce)):(s(),se(G(ie),{key:1,class:"h-12 w-12 text-gray-400"})),b.value&&!c.value?(s(),i("button",{key:2,type:"button",onClick:J,class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full h-6 w-6 flex items-center justify-center text-xs hover:bg-red-600"}," × ")):A("",!0)]),t("div",Ie,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Upload Featured Image",-1)),t("div",Se,[t("label",Ae,[e[32]||(e[32]=t("span",null,"Choose file",-1)),t("input",{id:"featured-image",type:"file",class:"sr-only",accept:"image/*",onChange:D},null,32)]),c.value?(s(),i("button",{key:0,type:"button",onClick:W,class:"px-3 py-2 text-sm text-red-600 hover:text-red-800"}," Clear ")):A("",!0)]),e[34]||(e[34]=t("p",{class:"ml-0 mt-1 text-xs text-gray-500 dark:text-gray-400"},"PNG, JPG, GIF up to 2MB (1200x630px recommended)",-1))])])]),t("div",Ee,[e[39]||(e[39]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Gallery Images",-1)),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Upload Gallery Images",-1)),t("div",Ve,[t("label",Ne,[e[36]||(e[36]=t("span",null,"Choose files",-1)),t("input",{id:"gallery-images",type:"file",class:"sr-only",accept:"image/*",multiple:"",onChange:q},null,32)]),g.value.length>0||r.value.gallery_images&&r.value.gallery_images.length>0?(s(),i("button",{key:0,type:"button",onClick:K,class:"px-3 py-2 text-sm text-red-600 hover:text-red-800"}," Clear All ")):A("",!0)]),e[38]||(e[38]=t("p",{class:"ml-0 mt-1 text-xs text-gray-500 dark:text-gray-400"},"Select multiple images for gallery",-1))]),g.value.length>0||r.value.gallery_images&&r.value.gallery_images.length>0?(s(),i("div",Fe,[(s(!0),i(I,null,S(w.value?[]:r.value.gallery_images||[],(l,_)=>(s(),i("div",{key:"existing-"+_,class:"relative"},[t("img",{src:l.url,class:"h-20 w-20 object-cover rounded-lg",alt:"Gallery image"},null,8,je),t("button",{type:"button",onClick:Z=>H(l.id),class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs hover:bg-red-600"}," × ",8,Re)]))),128)),(s(!0),i(I,null,S(p.value,(l,_)=>(s(),i("div",{key:"new-"+_,class:"relative"},[t("img",{src:l,class:"h-20 w-20 object-cover rounded-lg",alt:"Gallery preview"},null,8,Be),t("button",{type:"button",onClick:Z=>z(_),class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs hover:bg-red-600"}," × ",8,Ge)]))),128))])):A("",!0)]),t("div",Le,[e[46]||(e[46]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Publishing Details",-1)),t("div",Me,[t("div",null,[e[40]||(e[40]=t("label",{for:"priority",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Priority",-1)),d(t("input",{id:"priority","onUpdate:modelValue":e[9]||(e[9]=l=>r.value.priority=l),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"0"},null,512),[[n,r.value.priority]])]),t("div",null,[e[41]||(e[41]=t("label",{for:"source",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Source",-1)),d(t("input",{id:"source","onUpdate:modelValue":e[10]||(e[10]=l=>r.value.source=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g. Reuters, BBC, etc."},null,512),[[n,r.value.source]])]),t("div",Oe,[e[42]||(e[42]=t("label",{for:"source_url",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Source URL",-1)),d(t("input",{id:"source_url","onUpdate:modelValue":e[11]||(e[11]=l=>r.value.source_url=l),type:"url",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/original-article"},null,512),[[n,r.value.source_url]])]),t("div",Te,[t("label",Pe,[d(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>r.value.is_published=l),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[E,r.value.is_published]]),e[43]||(e[43]=t("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Publish this article",-1))]),t("label",De,[d(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>r.value.is_featured=l),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[E,r.value.is_featured]]),e[44]||(e[44]=t("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Feature this article on homepage",-1))]),t("label",$e,[d(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>r.value.is_breaking=l),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[E,r.value.is_breaking]]),e[45]||(e[45]=t("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Mark as breaking news",-1))])])])]),t("div",Je,[e[48]||(e[48]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2"},"Tags",-1)),t("div",null,[e[47]||(e[47]=t("label",{for:"tags",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Article Tags",-1)),d(t("input",{id:"tags","onUpdate:modelValue":e[15]||(e[15]=l=>f.value=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g. music, festival, summer (comma separated)"},null,512),[[n,f.value]])])]),t("div",We,[C(o,{to:"/dashboard/news",class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:R(()=>e[49]||(e[49]=[B(" Cancel ",-1)])),_:1,__:[49]}),t("button",{type:"submit",disabled:k.value==="createarticle"||k.value==="updatearticle",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-purple-500 hover:from-blue-700 hover:to-purple-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},x(k.value==="createarticle"||k.value==="updatearticle"?"Saving...":y.value?"Update Article":"Save Article"),9,qe)])],32)])])}}},Ze=ee(ze,[["__scopeId","data-v-5fe6fdd8"]]);export{Ze as default};
//# sourceMappingURL=NewArticle-C5uQr10-.js.map
