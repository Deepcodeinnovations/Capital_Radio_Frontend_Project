import{_ as z,u as W,e as f,r as m,q,c as i,g as e,a as D,k as F,l as n,i as d,s as Z,v as J,t as l,F as S,h as C,p as x,o as r,j as P,n as j}from"./index-edbe1eb9.js";import{V as Q}from"./volume-2-64c60364.js";import{P as X}from"./play-38bfec14.js";import{S as K}from"./search-b661152d.js";import{P as ee}from"./pin-cefd7c02.js";import{F as M}from"./flame-6a0b16c1.js";import{E as L}from"./eye-abd3ccc6.js";import{M as h}from"./message-circle-305ea2f7.js";import{U as A}from"./user-d3ee3d66.js";import{c as te}from"./createLucideIcon-0e9853d2.js";const se=te("PlusIcon",[["line",{x1:"12",x2:"12",y1:"5",y2:"19",key:"pwfkuu"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]]);const ae={class:"min-h-screen"},oe={class:"relative min-h-[70vh] flex items-center justify-center overflow-hidden",style:{"margin-top":"5rem !important"}},re={class:"relative z-10 container mx-auto px-6 text-center"},le={class:"flex flex-col sm:flex-row gap-4 justify-center items-center"},ie=["disabled"],ne={class:"flex items-center justify-center space-x-3"},ce={key:0,class:"w-5 h-5 border-2 rounded-full border-white border-t-transparent animate-spin"},de={key:3,class:"tracking-widest text-sm"},ue={key:4,class:"tracking-widest text-sm"},be={key:5,class:"tracking-widest text-sm"},pe={class:"bg-gray-50 relative",id:"forums-content"},fe={class:"max-w-7xl mx-auto px-6 py-12 relative z-10"},ve={class:"mb-12"},he={class:"relative max-w-2xl mx-auto"},me={key:0,class:"flex justify-center items-center py-20"},xe={key:1},_e={class:"flex items-center justify-between mb-8"},ge={class:"text-black font-black uppercase tracking-wider"},we={class:"text-black font-black uppercase tracking-wider"},ke={key:0,class:"mb-12"},ye={class:"flex items-center gap-4 mb-8"},Se={class:"w-12 h-12 bg-red-600 flex items-center justify-center"},Ce={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Ne=["onClick"],Ie={class:"flex items-start justify-between mb-4"},Oe={class:"flex items-center space-x-2"},Te={key:0,class:"bg-black text-white px-3 py-1 text-xs font-black tracking-wider uppercase flex items-center gap-1"},Ee={class:"flex items-center space-x-4 text-sm text-gray-600 font-bold"},Ue={class:"flex items-center space-x-1"},De={class:"flex items-center space-x-1"},Fe={class:"text-xl font-black text-black mb-3 group-hover:text-red-600 transition-colors line-clamp-2 uppercase tracking-wide"},Pe={class:"text-gray-600 mb-4 line-clamp-2 text-sm"},je={class:"flex items-center justify-between"},Me={class:"flex items-center space-x-2"},Le={class:"w-10 h-10 border-2 border-black bg-red-600 flex items-center justify-center"},Ae={class:"text-sm font-black text-black uppercase"},Re={class:"text-xs text-gray-600 font-bold"},Ve={class:"space-y-4 mb-8"},$e={class:"flex items-center gap-4 mb-8"},Be={class:"w-12 h-12 bg-black flex items-center justify-center"},Ge=["onClick"],Ye={class:"flex items-start space-x-4"},He={class:"flex-shrink-0 mt-1"},ze={class:"flex-1 min-w-0"},We={class:"flex items-center space-x-3 mb-2"},qe={key:0,class:"bg-red-600 text-white px-3 py-1 text-xs font-black tracking-wider uppercase flex items-center gap-1"},Ze={class:"text-lg font-black text-black mb-2 group-hover:text-red-600 transition-colors line-clamp-2 uppercase tracking-wide"},Je={class:"text-gray-600 text-sm mb-4 line-clamp-2"},Qe={class:"flex items-center justify-between"},Xe={class:"flex items-center space-x-2"},Ke={class:"w-8 h-8 border border-black bg-red-600 flex items-center justify-center"},et={class:"text-sm font-black text-black uppercase"},tt={class:"text-xs text-gray-600 font-bold"},st={class:"flex items-center space-x-4 text-sm text-gray-600 font-bold"},at={class:"flex items-center space-x-1"},ot={class:"flex items-center space-x-1"},rt={key:1,class:"flex justify-center items-center gap-2 mt-12"},lt=["disabled"],it={class:"flex items-center gap-1"},nt=["onClick"],ct=["disabled"],dt={key:2,class:"text-center py-20"},ut={class:"w-20 h-20 bg-gray-200 border-4 border-black flex items-center justify-center mx-auto mb-6"},bt={class:"text-gray-600 mb-6 font-bold"},pt={class:"fixed bottom-8 right-8"},ft={__name:"forums",setup(vt){var E;const b=W(),a=f(()=>b.getters.forums),_=f(()=>b.getters.station),N=f(()=>b.getters.isPlaying),u=m(!1),p=m(""),g=m(null),R=async()=>{u.value=!0;try{await b.dispatch("togglePlayPause")}catch(o){console.error("Failed to toggle playback:",o)}finally{u.value=!1}},v=m({search:"",station_id:((E=_.value)==null?void 0:E.id)||1,page:1,per_page:12});f(()=>{var o;return(o=a.value)!=null&&o.metrics?{total_topics:a.value.metrics.total_topics||0,total_replies:a.value.metrics.total_comments||0,active_users:a.value.metrics.total_views||0,online_now:a.value.metrics.online_now||0}:{total_topics:0,total_replies:0,active_users:0,online_now:0}});const I=f(()=>{var o;return(o=a.value)!=null&&o.data?a.value.data.filter(t=>t.is_pinned):[]}),V=f(()=>{var o;return(o=a.value)!=null&&o.data?a.value.data.filter(t=>!t.is_pinned):[]}),$=f(()=>{var U;if(!((U=a.value)!=null&&U.total_pages))return[];const o=a.value.current_page,t=a.value.total_pages,s=[],c=Math.max(1,o-2),k=Math.min(t,o+2);for(let y=c;y<=k;y++)s.push(y);return s}),O=o=>{const t=new Date(o),s=new Date,c=(s-t)/(1e3*60*60);return c<1?`${Math.floor((s-t)/(1e3*60))} MIN AGO`:c<24?`${Math.floor(c)} HR AGO`:c<48?"YESTERDAY":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==s.getFullYear()?"numeric":void 0}).toUpperCase()},B=()=>{g.value&&clearTimeout(g.value),g.value=setTimeout(()=>{v.value.search=p.value,v.value.page=1,G()},500)},G=async()=>{u.value=!0;try{await b.dispatch("fetch_user_forums",v.value)}catch(o){console.error("Failed to fetch filtered forums:",o)}finally{u.value=!1}},w=async o=>{var s;if(o<1||o>a.value.total_pages)return;v.value.page=o,u.value=!0;const t={...v.value,station_id:((s=_.value)==null?void 0:s.id)||1};try{await b.dispatch("fetch_user_forums",t),window.scrollTo({top:0,behavior:"smooth"})}catch(c){console.error("Failed to fetch forums:",c)}finally{u.value=!1}},T=()=>{console.log("Create new topic")},Y=()=>{document.getElementById("forums-content").scrollIntoView({behavior:"smooth",block:"start"})},H=async()=>{var t;u.value=!0;const o={...v.value,station_id:((t=_.value)==null?void 0:t.id)||1};try{await b.dispatch("fetch_user_forums",o)}catch(s){console.error("Failed to fetch forums:",s)}finally{u.value=!1}};return q(()=>{H()}),(o,t)=>(r(),i("div",ae,[e("section",oe,[t[5]||(t[5]=e("div",{class:"absolute inset-0"},[e("img",{src:"https://images.unsplash.com/photo-1516280440614-37939bbacd81?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80",alt:"Community Discussion",class:"w-full h-full object-cover"}),e("div",{class:"absolute inset-0 bg-black/60"})],-1)),e("div",re,[t[4]||(t[4]=D('<div class="inline-block bg-red-600 text-white px-6 py-2 mb-8 transform -rotate-1" data-v-f013581b><span class="font-black text-sm tracking-widest uppercase" data-v-f013581b>COMMUNITY</span></div><h1 class="text-6xl font-black text-white mb-6 leading-none" data-v-f013581b> BEAT <span class="block text-red-600" data-v-f013581b>FORUMS</span></h1><p class="text-xl text-white/90 mb-12 max-w-3xl mx-auto leading-relaxed" data-v-f013581b> Join the discussion and connect with fellow Beat FM listeners across Uganda </p>',3)),e("div",le,[e("button",{onClick:R,disabled:u.value,class:"bg-red-600 hover:bg-red-700 text-white font-black px-12 py-4 transition-all duration-300 transform hover:scale-105 shadow-lg border-4 border-red-600"},[e("div",ne,[u.value?(r(),i("div",ce)):N.value?(r(),F(n(Q),{key:1,size:20,class:"animate-bounce"})):(r(),F(n(X),{key:2,size:20})),u.value?(r(),i("span",de,"CONNECTING")):N.value?(r(),i("span",ue,"LIVE NOW")):(r(),i("span",be,"LISTEN LIVE"))])],8,ie),e("button",{onClick:Y,class:"bg-white/10 backdrop-blur-md border-4 border-white text-white font-black px-8 py-4 hover:bg-white hover:text-black transition-all duration-300 transform hover:scale-105"},t[3]||(t[3]=[e("span",{class:"tracking-widest text-sm"},"BROWSE TOPICS",-1)]))])]),t[6]||(t[6]=D('<div class="absolute bottom-0 left-0 w-full overflow-hidden" style="transform:translateY(1px);" data-v-f013581b><svg class="w-full h-auto" preserveAspectRatio="none" viewBox="0 0 1200 120" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-f013581b><defs data-v-f013581b><linearGradient id="forumWaveGradient" x1="0%" y1="0%" x2="100%" y2="0%" data-v-f013581b><stop offset="0%" style="stop-color:#DC2626;stop-opacity:1;" data-v-f013581b></stop><stop offset="50%" style="stop-color:#000000;stop-opacity:1;" data-v-f013581b></stop><stop offset="100%" style="stop-color:#DC2626;stop-opacity:1;" data-v-f013581b></stop></linearGradient></defs><path d="M0,60 C200,100 400,20 600,60 C800,100 1000,20 1200,60 L1200,120 L0,120 Z" fill="url(#forumWaveGradient)" data-v-f013581b></path><path d="M0,80 C300,40 600,100 900,80 C1000,70 1100,90 1200,80 L1200,120 L0,120 Z" fill="rgb(249 250 251)" opacity="0.9" data-v-f013581b></path></svg></div>',1))]),e("div",pe,[e("div",fe,[e("div",ve,[e("div",he,[d(n(K),{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Z(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),onInput:B,type:"text",placeholder:"SEARCH FORUM DISCUSSIONS...",class:"w-full pl-12 pr-4 py-4 bg-white border-4 border-black text-black placeholder-gray-500 focus:outline-none focus:border-red-600 font-bold uppercase tracking-wider"},null,544),[[J,p.value]])])]),u.value?(r(),i("div",me,t[7]||(t[7]=[e("div",{class:"w-12 h-12 border-4 border-gray-300 border-t-red-600 animate-spin"},null,-1)]))):a.value&&a.value.data&&a.value.data.length>0?(r(),i("div",xe,[e("div",_e,[e("div",ge,l(p.value?`SEARCH: "${p.value}"`:"ALL DISCUSSIONS")+" - "+l(a.value.data.length)+" OF "+l(a.value.total),1),e("div",we," PAGE "+l(a.value.current_page)+" / "+l(a.value.total_pages),1)]),I.value.length>0?(r(),i("div",ke,[e("div",ye,[e("div",Se,[d(n(ee),{class:"w-6 h-6 text-white"})]),t[8]||(t[8]=e("h2",{class:"text-3xl font-black text-black uppercase tracking-wider"},"PINNED DISCUSSIONS",-1)),t[9]||(t[9]=e("div",{class:"flex-1 h-1 bg-red-600"},null,-1))]),e("div",Ce,[(r(!0),i(S,null,C(I.value,s=>{var c;return r(),i("div",{key:s.id,class:"bg-white border-4 border-black p-6 transition-all hover:border-red-600 group cursor-pointer transform hover:scale-105",onClick:k=>o.$router.push({name:"forum_details",params:{id:s.slug}})},[e("div",Ie,[e("div",Oe,[t[11]||(t[11]=e("span",{class:"bg-red-600 text-white px-3 py-1 text-xs font-black tracking-wider uppercase"}," PINNED ",-1)),s.is_hot?(r(),i("span",Te,[d(n(M),{class:"w-3 h-3"}),t[10]||(t[10]=P(" HOT "))])):x("",!0)]),e("div",Ee,[e("div",Ue,[d(n(L),{class:"w-4 h-4"}),e("span",null,l(s.views_count||0),1)]),e("div",De,[d(n(h),{class:"w-4 h-4"}),e("span",null,l(s.comments_count||0),1)])])]),e("h3",Fe,l(s.title),1),e("p",Pe,l(s.body),1),e("div",je,[e("div",Me,[e("div",Le,[d(n(A),{class:"w-5 h-5 text-white"})]),e("div",null,[e("p",Ae,l(((c=s.creator)==null?void 0:c.name)||"ANONYMOUS"),1),e("p",Re,l(O(s.created_at)),1)])])])],8,Ne)}),128))])])):x("",!0),e("div",Ve,[e("div",$e,[e("div",Be,[d(n(h),{class:"w-6 h-6 text-white"})]),t[12]||(t[12]=e("h2",{class:"text-3xl font-black text-black uppercase tracking-wider"},"ALL DISCUSSIONS",-1)),t[13]||(t[13]=e("div",{class:"flex-1 h-1 bg-black"},null,-1))]),(r(!0),i(S,null,C(V.value,s=>{var c;return r(),i("div",{key:s.id,class:"bg-white border-2 border-black p-6 transition-all hover:border-red-600 group cursor-pointer transform hover:scale-105",onClick:k=>o.$router.push({name:"forum_details",params:{id:s.slug}})},[e("div",Ye,[e("div",He,[e("div",{class:j(["w-12 h-12 border-2 border-black flex items-center justify-center",s.is_hot?"bg-red-600 text-white":"bg-white text-black"])},[d(n(h),{class:"w-6 h-6"})],2)]),e("div",ze,[e("div",We,[t[15]||(t[15]=e("span",{class:"bg-gray-200 text-black px-3 py-1 text-xs font-black tracking-wider uppercase"}," GENERAL ",-1)),s.is_hot?(r(),i("span",qe,[d(n(M),{class:"w-3 h-3"}),t[14]||(t[14]=P(" HOT "))])):x("",!0)]),e("h3",Ze,l(s.title),1),e("p",Je,l(s.body),1),e("div",Qe,[e("div",Xe,[e("div",Ke,[d(n(A),{class:"w-4 h-4 text-white"})]),e("div",null,[e("p",et,l(((c=s.creator)==null?void 0:c.name)||"ANONYMOUS"),1),e("p",tt,l(O(s.created_at)),1)])]),e("div",st,[e("div",at,[d(n(L),{class:"w-4 h-4"}),e("span",null,l(s.views_count||0),1)]),e("div",ot,[d(n(h),{class:"w-4 h-4"}),e("span",null,l(s.comments_count||0),1)])])])])])],8,Ge)}),128))]),a.value.total_pages>1?(r(),i("div",rt,[e("button",{onClick:t[1]||(t[1]=s=>w(a.value.current_page-1)),disabled:a.value.current_page<=1,class:"px-6 py-3 bg-white border-2 border-black text-black font-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-black hover:text-white transition-all uppercase tracking-wider"}," PREVIOUS ",8,lt),e("div",it,[(r(!0),i(S,null,C($.value,s=>(r(),i("button",{key:s,onClick:c=>w(s),class:j(["w-12 h-12 transition-all font-black border-2",s===a.value.current_page?"bg-red-600 text-white border-red-600":"bg-white border-black text-black hover:bg-black hover:text-white"])},l(s),11,nt))),128))]),e("button",{onClick:t[2]||(t[2]=s=>w(a.value.current_page+1)),disabled:a.value.current_page>=a.value.total_pages,class:"px-6 py-3 bg-white border-2 border-black text-black font-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-black hover:text-white transition-all uppercase tracking-wider"}," NEXT ",8,ct)])):x("",!0)])):(r(),i("div",dt,[e("div",ut,[d(n(h),{class:"w-10 h-10 text-gray-400"})]),t[16]||(t[16]=e("h3",{class:"text-2xl font-black text-black mb-4 uppercase tracking-wider"},"NO DISCUSSIONS FOUND",-1)),e("p",bt,l(p.value?`NO RESULTS FOR "${p.value}"`:"BE THE FIRST TO START A DISCUSSION!"),1),e("button",{onClick:T,class:"px-8 py-4 bg-red-600 text-white font-black hover:bg-red-700 transition-all border-4 border-red-600 uppercase tracking-wider"}," START NEW DISCUSSION ")])),e("div",pt,[e("button",{onClick:T,class:"w-16 h-16 bg-red-600 border-4 border-red-600 flex items-center justify-center text-white shadow-lg hover:shadow-xl hover:scale-110 transition-all duration-200 hover:bg-red-700"},[d(n(se),{class:"w-8 h-8"})])])])])]))}},Nt=z(ft,[["__scopeId","data-v-f013581b"]]);export{Nt as default};
